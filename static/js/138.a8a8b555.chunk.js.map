{"version":3,"file":"static/js/138.a8a8b555.chunk.js","mappings":"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","sources":["components/chatbot/VoiceAgentHelpers.js","components/chatbot/EmailAgent.js","components/chatbot/EmailFormModal.js","components/chatbot/Siri.js","components/chatbot/AIAssistant.js","components/chatbot/ChatBot.js","components/chatbot/AgenticHelpers.js"],"sourcesContent":["// VoiceAgentHelpers.js - ENHANCED WITH VISUAL FEEDBACK\nimport { getFunctions, httpsCallable } from \"firebase/functions\";\nimport {\n  ProactiveSuggestionsEngine,\n  TaskOrchestrator,\n  IntentPredictor,\n  QuestionDecomposer,\n  FollowUpGenerator,\n  PreferenceLearner,\n} from \"./AgenticHelpers\";\n\nexport const subscribeToRouteChanges = (callback) => {\n  if (globalHistory && typeof globalHistory.listen === \"function\") {\n    return globalHistory.listen((location) => {\n      callback(location.pathname);\n    });\n  }\n  // Fallback for popstate if history not available (though less reliable for internal routing without history)\n  const onPopState = () => callback(window.location.pathname);\n  window.addEventListener(\"popstate\", onPopState);\n  return () => window.removeEventListener(\"popstate\", onPopState);\n};\n\n// ROUTER HISTORY REFERENCE\nlet globalHistory = null;\nexport const setGlobalHistory = (history) => {\n  globalHistory = history;\n  // If we have history, we can listen to changes\n  if (history && typeof history.listen === \"function\") {\n    history.listen((location) => {\n      // This part might be used if we wanted to trigger something global\n    });\n  }\n};\n\n// HELPER: Navigate using history if available, else standard location\nconst navigateTo = (path) => {\n  if (globalHistory) {\n    globalHistory.push(path);\n  } else {\n    // Fallback for non-SPA or if history not set\n    window.location.href = path;\n  }\n};\nconst getCurrentRoute = () => {\n  if (globalHistory) return globalHistory.location.pathname;\n  return window.location.pathname === \"/\" ? \"/home\" : window.location.pathname;\n};\n\n// ============= PORTFOLIO DATA =============\nexport const LAXMAN_PORTFOLIO_DATA = `\nK LAXMAN - SDE @ CAMS Chennai | IIT Delhi CSE 2024\n\nCURRENT: SDE at CAMS (Jun 2024-Present)\n- CamsLens GenAI: 80k+ docs/month, 95% accuracy\n- Tech: Vertex AI Gemini-flash 2.0, GCP, BigQuery\n\nTOP PROJECTS:\n1. CamsLens Enterprise GenAI (2024) - 80k docs, 95% accuracy, Vertex AI\n2. Financial Email AI (2025) - FastAPI, LLM, 95% PAN/ARN extraction\n3. Stock Exchange (2024) - Java Spring Boot, JWT, 100+ users\n4. Table Recognition (2023) - PDF ML, 90% SVM accuracy\n5. RAVI Accessibility (2022) - Flask, 500+ STEM docs\n\nEDUCATION: IIT Delhi Dual Degree CSE (2018-2024)\n- TA for 300+ students\n- Specialization: AI/ML, CV, NLP\n\nSKILLS:\n- Languages: Java, Python, JavaScript\n- AI/ML: PyTorch, Vertex AI, OpenCV, NLP\n- Cloud: GCP (Cloud Run, Vertex AI, BigQuery), AWS, Docker\n- Full Stack: React, Node.js, Spring Boot, MongoDB\n\nCONTACT:\nEmail: Laxmankethavath5@gmail.com\nPhone: +91-9000063740\nLinkedIn: linkedin.com/in/k-laxman\nGitHub: github.com/Laxman824\nLocation: Chennai, India\n`;\n\n// ============= RESPONSE CACHE =============\nconst ResponseCache = {\n  cache: new Map(),\n  maxSize: 50,\n  ttl: 1800000,\n\n  getKey(input, route) {\n    return `${input.toLowerCase().trim()}_${route}`;\n  },\n\n  get(input, route) {\n    const key = this.getKey(input, route);\n    const cached = this.cache.get(key);\n\n    if (!cached) return null;\n\n    if (Date.now() - cached.timestamp > this.ttl) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    console.log(\" Cache hit! Saved API call\");\n    return cached.response;\n  },\n\n  set(input, route, response) {\n    const key = this.getKey(input, route);\n\n    if (this.cache.size >= this.maxSize) {\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n\n    this.cache.set(key, {\n      response,\n      timestamp: Date.now(),\n    });\n  },\n\n  clear() {\n    this.cache.clear();\n  },\n};\n\n// ============= VOICE SHORTCUTS =============\nexport const VoiceShortcuts = {\n  commands: {\n    next: () => {\n      const routes = [\n        \"/home\",\n        \"/projects\",\n        \"/experience\",\n        \"/education\",\n        \"/contact\",\n      ];\n      const current = getCurrentRoute();\n      // Handle case where current route might be / or unknown\n      const index =\n        routes.indexOf(current) === -1 ? 0 : routes.indexOf(current);\n      const next = routes[(index + 1) % routes.length];\n      navigateTo(next);\n      return {\n        response: `Moving to ${next.replace(\"/\", \"\")} page`,\n        action: \"NONE\",\n        skipAI: true,\n      };\n    },\n\n    previous: () => {\n      const routes = [\n        \"/home\",\n        \"/projects\",\n        \"/experience\",\n        \"/education\",\n        \"/contact\",\n      ];\n      const current = getCurrentRoute();\n      const index =\n        routes.indexOf(current) === -1 ? 0 : routes.indexOf(current);\n      const prev = routes[(index - 1 + routes.length) % routes.length];\n      navigateTo(prev);\n      return {\n        response: `Going back to ${prev.replace(\"/\", \"\")} page`,\n        action: \"NONE\",\n        skipAI: true,\n      };\n    },\n\n    back: () => {\n      if (globalHistory) {\n        globalHistory.goBack();\n      } else {\n        window.history.back();\n      }\n      return {\n        response: \"Going back\",\n        action: \"NONE\",\n        skipAI: true,\n      };\n    },\n\n    home: () => ({\n      response: \"Taking you home\",\n      action: \"NAVIGATE_HOME\",\n      skipAI: true,\n    }),\n\n    top: () => {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n      return {\n        response: \"Scrolling to top\",\n        action: \"NONE\",\n        skipAI: true,\n      };\n    },\n\n    bottom: () => {\n      window.scrollTo({ top: document.body.scrollHeight, behavior: \"smooth\" });\n      return {\n        response: \"Scrolling to bottom\",\n        action: \"NONE\",\n        skipAI: true,\n      };\n    },\n\n    projects: () => ({\n      response: \"Showing projects\",\n      action: \"NAVIGATE_PROJECTS\",\n      skipAI: true,\n    }),\n\n    experience: () => ({\n      response: \"Showing experience\",\n      action: \"NAVIGATE_EXPERIENCE\",\n      skipAI: true,\n    }),\n\n    education: () => ({\n      response: \"Showing education\",\n      action: \"NAVIGATE_EDUCATION\",\n      skipAI: true,\n    }),\n\n    contact: () => ({\n      response: \"Showing contact info\",\n      action: \"NAVIGATE_CONTACT\",\n      skipAI: true,\n    }),\n\n    reset: () => ({\n      response: \"Resetting conversation memory\",\n      action: \"RESET_MEMORY\",\n      skipAI: true,\n    }),\n\n    clear: () => ({\n      response: \"Clearing chat history\",\n      action: \"RESET_MEMORY\",\n      skipAI: true,\n    }),\n  },\n\n  isShortcut(input) {\n    const normalized = input.toLowerCase().trim();\n    return this.commands.hasOwnProperty(normalized);\n  },\n\n  execute(input) {\n    const normalized = input.toLowerCase().trim();\n    const command = this.commands[normalized];\n    return command ? command() : null;\n  },\n};\n\n// ============= ENHANCED VISUAL AGENT =============\nexport const VisualAgent = {\n  activeGlowTimeout: null,\n\n  initialize() {\n    console.log(\" Initializing Enhanced Visual Agent...\");\n\n    if (document.readyState === \"loading\") {\n      document.addEventListener(\"DOMContentLoaded\", () =>\n        this.logAvailableSections()\n      );\n    } else {\n      setTimeout(() => this.logAvailableSections(), 2000);\n    }\n\n    // Add global styles for enhanced effects\n    this.injectGlobalStyles();\n  },\n\n  injectGlobalStyles() {\n    if (document.getElementById(\"voice-agent-styles\")) return;\n\n    const style = document.createElement(\"style\");\n    style.id = \"voice-agent-styles\";\n    style.textContent = `\n      @keyframes voiceNavigationGlow {\n        0%, 100% {\n          box-shadow: \n            0 0 20px rgba(59, 130, 246, 0.4),\n            0 0 40px rgba(59, 130, 246, 0.3),\n            0 0 60px rgba(59, 130, 246, 0.2),\n            0 0 80px rgba(59, 130, 246, 0.1),\n            inset 0 0 20px rgba(59, 130, 246, 0.1);\n        }\n        50% {\n          box-shadow: \n            0 0 30px rgba(59, 130, 246, 0.6),\n            0 0 60px rgba(59, 130, 246, 0.5),\n            0 0 90px rgba(59, 130, 246, 0.4),\n            0 0 120px rgba(59, 130, 246, 0.3),\n            inset 0 0 30px rgba(59, 130, 246, 0.2);\n        }\n      }\n\n      @keyframes voiceNavigationPulse {\n        0%, 100% {\n          transform: scale(1) translateZ(0);\n        }\n        50% {\n          transform: scale(1.01) translateZ(2px);\n        }\n      }\n\n      @keyframes voiceCardHighlight {\n        0%, 100% {\n          box-shadow: \n            0 0 15px rgba(34, 197, 94, 0.4),\n            0 0 30px rgba(34, 197, 94, 0.3),\n            0 0 45px rgba(34, 197, 94, 0.2);\n          transform: scale(1);\n        }\n        50% {\n          box-shadow: \n            0 0 25px rgba(34, 197, 94, 0.6),\n            0 0 50px rgba(34, 197, 94, 0.5),\n            0 0 75px rgba(34, 197, 94, 0.4);\n          transform: scale(1.03);\n        }\n      }\n\n      .voice-navigated {\n        animation: voiceNavigationGlow 3s ease-in-out, \n                   voiceNavigationPulse 3s ease-in-out;\n        border: 2px solid rgba(59, 130, 246, 0.3) !important;\n        border-radius: 16px !important;\n        position: relative;\n        z-index: 10;\n      }\n\n      .voice-navigated::before {\n        content: '';\n        position: absolute;\n        inset: -4px;\n        background: linear-gradient(\n          45deg,\n          transparent,\n          rgba(59, 130, 246, 0.1),\n          transparent\n        );\n        border-radius: 18px;\n        pointer-events: none;\n        animation: shimmer 2s linear infinite;\n      }\n\n      @keyframes shimmer {\n        0% { transform: translateX(-100%); }\n        100% { transform: translateX(100%); }\n      }\n\n      .voice-card-highlighted {\n        animation: voiceCardHighlight 2s ease-in-out;\n        border: 2px solid rgba(34, 197, 94, 0.4) !important;\n        position: relative;\n        z-index: 100;\n      }\n\n      /* Smooth scroll behavior */\n      html {\n        scroll-behavior: smooth;\n      }\n\n      /* Navigation breadcrumb */\n      .voice-navigation-indicator {\n        position: fixed;\n        top: 80px;\n        right: 20px;\n        background: linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(37, 99, 235, 0.95));\n        color: white;\n        padding: 12px 20px;\n        border-radius: 12px;\n        font-size: 14px;\n        font-weight: 600;\n        box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4);\n        z-index: 9999;\n        animation: slideInRight 0.5s ease-out;\n        backdrop-filter: blur(10px);\n      }\n\n      @keyframes slideInRight {\n        from {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n\n      .voice-navigation-indicator::before {\n        content: '';\n        margin-right: 8px;\n      }\n    `;\n    document.head.appendChild(style);\n  },\n\n  logAvailableSections() {\n    console.log(\" Scanning current page...\");\n    const currentRoute = getCurrentRoute() || \"/home\";\n    console.log(\"Current route:\", currentRoute);\n\n    const mainContainers = [\n      \".greeting-main\",\n      \".education-main\",\n      \".experience-main\",\n      \".contact-main\",\n      \".projects-main\",\n      \".main\",\n    ];\n\n    mainContainers.forEach((sel) => {\n      const el = document.querySelector(sel);\n      if (el) {\n        console.log(` Found: ${sel}`);\n      }\n    });\n\n    // Check for project cards\n    const projectCards = document.querySelectorAll(\n      \".project-card, .repo-card-div\"\n    );\n    console.log(` Found ${projectCards.length} project cards`);\n  },\n\n  // Show navigation indicator\n  showNavigationIndicator(pageName) {\n    // Remove existing indicator\n    const existing = document.querySelector(\".voice-navigation-indicator\");\n    if (existing) existing.remove();\n\n    // Create new indicator\n    const indicator = document.createElement(\"div\");\n    indicator.className = \"voice-navigation-indicator\";\n    indicator.textContent = `Navigated to ${pageName}`;\n    document.body.appendChild(indicator);\n\n    // Auto-remove after 3 seconds\n    setTimeout(() => {\n      indicator.style.animation = \"slideInRight 0.5s ease-out reverse\";\n      setTimeout(() => indicator.remove(), 500);\n    }, 2000);\n  },\n\n  // Enhanced highlighting with persistent glow\n  async highlightElement(selector, duration = 4000, waitForRender = false) {\n    console.log(\" Attempting to highlight:\", selector);\n\n    if (waitForRender) {\n      await new Promise((resolve) => setTimeout(resolve, 700));\n    }\n\n    let element = document.querySelector(selector);\n\n    if (!element) {\n      console.warn(` Element not found: ${selector}`);\n      return false;\n    }\n\n    this.doEnhancedHighlight(element, duration);\n    return true;\n  },\n\n  doEnhancedHighlight(element, duration) {\n    console.log(\" Enhanced highlighting:\", element.className);\n\n    // Scroll to top first for better UX\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n\n    // Wait a bit then scroll to element\n    setTimeout(() => {\n      element.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\",\n        inline: \"nearest\",\n      });\n    }, 300);\n\n    // Clear any existing glow\n    if (this.activeGlowTimeout) {\n      clearTimeout(this.activeGlowTimeout);\n    }\n\n    // Remove previous highlights\n    document.querySelectorAll(\".voice-navigated\").forEach((el) => {\n      el.classList.remove(\"voice-navigated\");\n    });\n\n    // Add the glow class\n    element.classList.add(\"voice-navigated\");\n\n    // Remove after duration\n    this.activeGlowTimeout = setTimeout(() => {\n      element.classList.remove(\"voice-navigated\");\n    }, duration);\n  },\n\n  // Highlight individual project card\n  async highlightProjectCard(index, duration = 3000) {\n    console.log(\" Highlighting project card:\", index);\n\n    // Wait for page to render\n    await new Promise((resolve) => setTimeout(resolve, 800));\n\n    const cards = document.querySelectorAll(\".project-card, .repo-card-div\");\n\n    if (!cards || cards.length === 0) {\n      console.warn(\" No project cards found\");\n      return false;\n    }\n\n    const card = cards[index - 1]; // 1-indexed to 0-indexed\n\n    if (!card) {\n      console.warn(\n        ` Project card ${index} not found (only ${cards.length} cards exist)`\n      );\n      return false;\n    }\n\n    // Scroll to card\n    card.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n\n    // Remove previous highlights\n    document.querySelectorAll(\".voice-card-highlighted\").forEach((el) => {\n      el.classList.remove(\"voice-card-highlighted\");\n    });\n\n    // Add highlight\n    card.classList.add(\"voice-card-highlighted\");\n\n    // Remove after duration\n    setTimeout(() => {\n      card.classList.remove(\"voice-card-highlighted\");\n    }, duration);\n\n    console.log(\" Project card highlighted\");\n    return true;\n  },\n\n  highlightMultiple(selectors, delayBetween = 2000) {\n    selectors.forEach((selector, index) => {\n      setTimeout(() => {\n        this.highlightElement(selector, 2500);\n      }, index * delayBetween);\n    });\n  },\n};\n\n// ============= VIEWPORT TRACKER =============\nexport const ViewportTracker = {\n  getCurrentVisibleSection() {\n    const mainContainers = document.querySelectorAll('[class*=\"main\"]');\n\n    for (const container of mainContainers) {\n      const rect = container.getBoundingClientRect();\n      const inView = rect.top >= -100 && rect.top <= window.innerHeight * 0.5;\n\n      if (inView) {\n        return {\n          id: container.className,\n          type: \"main-container\",\n          title: container.className.replace(\"-main\", \"\").replace(/\\s+/g, \" \"),\n        };\n      }\n    }\n    return null;\n  },\n\n  getCompactContext() {\n    const visible = this.getCurrentVisibleSection();\n    if (!visible || !visible.title) return \"\";\n\n    return `Currently viewing: ${visible.title}`;\n  },\n};\n\n// ============= MEMORY MANAGER =============\nexport const MemoryManager = {\n  STORAGE_KEY: \"laxman_ai_chat_history\",\n  MAX_HISTORY: 10,\n\n  saveHistory(history) {\n    try {\n      const trimmed = history.slice(-this.MAX_HISTORY);\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(trimmed));\n      console.log(\" Chat history saved:\", trimmed.length, \"turns\");\n      return trimmed;\n    } catch (error) {\n      console.warn(\" Failed to save chat history:\", error);\n      return history;\n    }\n  },\n\n  loadHistory() {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      return stored ? JSON.parse(stored) : [];\n    } catch (error) {\n      console.warn(\" Failed to load chat history:\", error);\n      return [];\n    }\n  },\n\n  addTurn(userInput, aiResponse, action = \"NONE\") {\n    const history = this.loadHistory();\n    history.push({\n      user: userInput,\n      assistant: aiResponse,\n      action: action,\n      timestamp: Date.now(),\n      route: getCurrentRoute() || \"/home\",\n    });\n    return this.saveHistory(history);\n  },\n\n  clearHistory() {\n    try {\n      localStorage.removeItem(this.STORAGE_KEY);\n      ResponseCache.clear();\n      console.log(\" Chat history cleared\");\n      return true;\n    } catch (error) {\n      console.warn(\" Failed to clear chat history:\", error);\n      return false;\n    }\n  },\n\n  getCompactContext() {\n    const history = this.loadHistory();\n    if (history.length === 0) return \"\";\n\n    const recent = history.slice(-3);\n    return recent\n      .map((turn) => `User: ${turn.user}\\nBot: ${turn.assistant}`)\n      .join(\"\\n\");\n  },\n\n  getLastAction() {\n    const history = this.loadHistory();\n    if (history.length === 0) return null;\n    return history[history.length - 1].action;\n  },\n};\n\n// ============= ENHANCED AGENT EXECUTOR =============\nexport const AgentExecutor = {\n  getPageSelector(route) {\n    const selectorMap = {\n      \"/home\": \".greeting-main\",\n      \"/projects\": \".projects-main\",\n      \"/experience\": \".experience-main\",\n      \"/education\": \".education-main\",\n      \"/contact\": \".contact-main\",\n      \"/github\": \".github-main\",\n    };\n\n    return selectorMap[route] || \".main\";\n  },\n\n  getPageName(route) {\n    const nameMap = {\n      \"/home\": \"Home\",\n      \"/projects\": \"Projects\",\n      \"/experience\": \"Experience\",\n      \"/education\": \"Education\",\n      \"/contact\": \"Contact\",\n      \"/github\": \"GitHub Stats\",\n    };\n\n    return nameMap[route] || route.replace(\"/\", \"\");\n  },\n\n  getRouteFromHighlightAction(action) {\n    const routeMap = {\n      HIGHLIGHT_HOME: \"/home\",\n      HIGHLIGHT_PROJECTS: \"/projects\",\n      HIGHLIGHT_EXPERIENCE: \"/experience\",\n      HIGHLIGHT_EDUCATION: \"/education\",\n      HIGHLIGHT_SKILLS: \"/home\", // Skills are usually on home\n      HIGHLIGHT_CONTACT: \"/contact\",\n      HIGHLIGHT_GITHUB: \"/github\",\n      HIGHLIGHT_RESUME: \"/contact\",\n    };\n\n    // Default to current route or home if unknown\n    return routeMap[action] || getCurrentRoute() || \"/home\";\n  },\n\n  isOnCorrectPage(targetRoute) {\n    const current = getCurrentRoute() || \"/home\";\n    return current === targetRoute;\n  },\n  async executeWorkflow(workflowName, callbacks, showNotice) {\n    await TaskOrchestrator.executeWorkflow(workflowName, {\n      executeAction: (action) => this.execute(action, showNotice),\n      speak: callbacks.speak,\n    });\n  },\n  async execute(action, showNotice) {\n    if (!action || action === \"NONE\") {\n      return false;\n    }\n\n    console.log(\" Agent executing action:\", action);\n\n    // Handle HIGHLIGHT_PROJECT_[N] actions\n    if (action.startsWith(\"HIGHLIGHT_PROJECT_\")) {\n      const match = action.match(/HIGHLIGHT_PROJECT_(\\d+)/);\n      if (match) {\n        const projectIndex = parseInt(match[1]);\n\n        // Navigate to projects if not there\n        if (!this.isOnCorrectPage(\"/projects\")) {\n          navigateTo(\"/projects\");\n          VisualAgent.showNavigationIndicator(\"Projects\");\n          await new Promise((resolve) => setTimeout(resolve, 700));\n        }\n\n        // Highlight specific card\n        const highlighted = await VisualAgent.highlightProjectCard(\n          projectIndex\n        );\n\n        if (highlighted && showNotice) {\n          showNotice(\n            \"info\",\n            \" Highlighting\",\n            `Project #${projectIndex}`,\n            1500\n          );\n        }\n\n        return highlighted;\n      }\n    }\n\n    // Handle other HIGHLIGHT actions\n    if (action.startsWith(\"HIGHLIGHT_\")) {\n      const targetRoute = this.getRouteFromHighlightAction(action);\n      const needsNavigation = !this.isOnCorrectPage(targetRoute);\n\n      if (needsNavigation) {\n        console.log(` Navigating to ${targetRoute}`);\n        navigateTo(targetRoute);\n\n        // Show navigation indicator\n        const pageName = this.getPageName(targetRoute);\n        VisualAgent.showNavigationIndicator(pageName);\n\n        if (showNotice) {\n          showNotice(\"info\", \" Navigating\", `${pageName}...`, 1000);\n        }\n\n        await new Promise((resolve) => setTimeout(resolve, 700));\n      }\n\n      const selector = this.getPageSelector(targetRoute);\n      const highlighted = await VisualAgent.highlightElement(\n        selector,\n        4000,\n        false\n      );\n\n      if (highlighted && showNotice) {\n        const sectionName = this.getPageName(targetRoute);\n        showNotice(\"info\", \" Viewing\", sectionName, 1500);\n      }\n\n      return highlighted;\n    }\n\n    // Handle NAVIGATE actions\n    switch (action) {\n      case \"NAVIGATE_HOME\":\n        navigateTo(\"/home\");\n        VisualAgent.showNavigationIndicator(\"Home\");\n        if (showNotice) showNotice(\"info\", \" Navigation\", \"Home\", 1500);\n        // Auto-highlight after navigation\n        setTimeout(() => {\n          VisualAgent.highlightElement(\".greeting-main\", 4000);\n        }, 700);\n        return true;\n\n      case \"NAVIGATE_PROJECTS\":\n        navigateTo(\"/projects\");\n        VisualAgent.showNavigationIndicator(\"Projects\");\n        if (showNotice) showNotice(\"info\", \" Navigation\", \"Projects\", 1500);\n        setTimeout(() => {\n          VisualAgent.highlightElement(\".projects-main\", 4000);\n        }, 700);\n        return true;\n\n      case \"NAVIGATE_EXPERIENCE\":\n        navigateTo(\"/experience\");\n        VisualAgent.showNavigationIndicator(\"Experience\");\n        if (showNotice) showNotice(\"info\", \" Navigation\", \"Experience\", 1500);\n        setTimeout(() => {\n          VisualAgent.highlightElement(\".experience-main\", 4000);\n        }, 700);\n        return true;\n\n      case \"NAVIGATE_EDUCATION\":\n        navigateTo(\"/education\");\n        VisualAgent.showNavigationIndicator(\"Education\");\n        if (showNotice) showNotice(\"info\", \" Navigation\", \"Education\", 1500);\n        setTimeout(() => {\n          VisualAgent.highlightElement(\".education-main\", 4000);\n        }, 700);\n        return true;\n\n      case \"NAVIGATE_CONTACT\":\n        navigateTo(\"/contact\");\n        VisualAgent.showNavigationIndicator(\"Contact\");\n        if (showNotice) showNotice(\"info\", \" Navigation\", \"Contact\", 1500);\n        setTimeout(() => {\n          VisualAgent.highlightElement(\".contact-main\", 4000);\n        }, 700);\n        return true;\n\n      case \"NAVIGATE_GITHUB\":\n        navigateTo(\"/github\");\n        VisualAgent.showNavigationIndicator(\"GitHub Stats\");\n        if (showNotice)\n          showNotice(\"info\", \" Navigation\", \"GitHub Stats\", 1500);\n        setTimeout(() => {\n          VisualAgent.highlightElement(\".github-main\", 4000);\n        }, 700);\n        return true;\n\n      case \"SCROLL_TOP\":\n        window.scrollTo({ top: 0, behavior: \"smooth\" });\n        return true;\n\n      case \"SCROLL_BOTTOM\":\n        window.scrollTo({\n          top: document.body.scrollHeight,\n          behavior: \"smooth\",\n        });\n        return true;\n\n      case \"RESET_MEMORY\":\n        MemoryManager.clearHistory();\n        if (showNotice) showNotice(\"info\", \" Reset\", \"Memory cleared\", 2000);\n        setTimeout(() => window.location.reload(), 2000);\n        return true;\n\n      default:\n        console.warn(\" Unknown action:\", action);\n        return false;\n    }\n  },\n\n  getRouteFromHighlightAction(action) {\n    const routeMap = {\n      HIGHLIGHT_HOME: \"/home\",\n      HIGHLIGHT_PROJECTS: \"/projects\",\n      HIGHLIGHT_EXPERIENCE: \"/experience\",\n      HIGHLIGHT_EDUCATION: \"/education\",\n      HIGHLIGHT_SKILLS: \"/home\", // Skills are usually on home\n      HIGHLIGHT_CONTACT: \"/contact\",\n      HIGHLIGHT_GITHUB: \"/github\",\n      HIGHLIGHT_RESUME: \"/contact\",\n    };\n\n    // Default to current route or home if unknown\n    return routeMap[action] || getCurrentRoute() || \"/home\";\n  },\n\n  getRouteContext(currentRoute) {\n    const route = currentRoute\n      ? currentRoute.replace(\"/\", \"\").toLowerCase()\n      : \"home\";\n    const contexts = {\n      home: \"Home (overview)\",\n      projects: \"Projects (technical work)\",\n      experience: \"Experience (career)\",\n      education: \"Education (IIT Delhi)\",\n      contact: \"Contact (reach out)\",\n      github: \"GitHub Stats\",\n    };\n    return contexts[route] || route;\n  },\n\n  getCurrentRoute() {\n    return getCurrentRoute() || \"/home\";\n  },\n};\n\n// ============= PROACTIVE SUGGESTIONS =============\nexport const ProactiveSuggestions = {\n  getSuggestionsForRoute(route) {\n    const suggestions = {\n      \"/home\": [\n        \"Want to see his projects?\",\n        \"Curious about IIT Delhi?\",\n        \"Check his latest work at CAMS?\",\n      ],\n      \"/projects\": [\n        \"Details about CamsLens?\",\n        \"Show me project 1\",\n        \"Highlight top project\",\n      ],\n      \"/experience\": [\n        \"Know about CAMS role?\",\n        \"His teaching experience?\",\n        \"Show education?\",\n      ],\n      \"/education\": [\n        \"IIT Delhi achievements?\",\n        \"See his projects?\",\n        \"Teaching assistant work?\",\n      ],\n      \"/contact\": [\n        \"View LinkedIn?\",\n        \"See GitHub projects?\",\n        \"Back to projects?\",\n      ],\n    };\n    return suggestions[route] || suggestions[\"/home\"];\n  },\n\n  getRandomSuggestion(route) {\n    const suggestions = this.getSuggestionsForRoute(route);\n    return suggestions[Math.floor(Math.random() * suggestions.length)];\n  },\n};\n\n// ============= AI RESPONSE =============\nexport const getAgenticAIResponse = async (userInput, deviceInfo) => {\n  try {\n    if (VoiceShortcuts.isShortcut(userInput)) {\n      const result = VoiceShortcuts.execute(userInput);\n      console.log(\" Shortcut executed, skipped API call\");\n      return result;\n    }\n\n    const currentRoute = AgentExecutor.getCurrentRoute();\n    const cached = ResponseCache.get(userInput, currentRoute);\n    if (cached) {\n      return cached;\n    }\n\n    const maxWords = deviceInfo?.isMobile ? 120 : 150;\n    const routeContext = AgentExecutor.getRouteContext(currentRoute);\n    const conversationContext = MemoryManager.getCompactContext();\n    const viewportContext = ViewportTracker.getCompactContext();\n\n    const compactPrompt = `You are Laxman's AI. Respond in ${maxWords} words max.\n\nCONTEXT:\nPage: ${routeContext}\n${viewportContext ? `Viewing: ${viewportContext}` : \"\"}\n${conversationContext ? `Recent chat:\\n${conversationContext}` : \"\"}\n\nACTIONS (use ONE only):\nNAVIGATE_HOME, NAVIGATE_PROJECTS, NAVIGATE_EXPERIENCE, NAVIGATE_EDUCATION, NAVIGATE_CONTACT, NAVIGATE_GITHUB,\nHIGHLIGHT_HOME, HIGHLIGHT_PROJECTS, HIGHLIGHT_EXPERIENCE, HIGHLIGHT_EDUCATION, HIGHLIGHT_CONTACT, HIGHLIGHT_SKILLS,\nHIGHLIGHT_PROJECT_1, HIGHLIGHT_PROJECT_2, HIGHLIGHT_PROJECT_3, HIGHLIGHT_PROJECT_4, HIGHLIGHT_PROJECT_5,\nSCROLL_TOP, SCROLL_BOTTOM, RESET_MEMORY, NONE\n\nRULES:\n- If asking to see/show/view a page  use NAVIGATE_[PAGE]\n- If asking \"show project 1\" or \"top project\"  use HIGHLIGHT_PROJECT_1\n- If asking \"highlight\" on current page  use HIGHLIGHT_[CURRENT_PAGE]\n- Navigation auto-scrolls and glows the section\n- Be brief, enthusiastic, helpful\n\nPORTFOLIO:\n${LAXMAN_PORTFOLIO_DATA}\n\nUSER: \"${userInput}\"\n\nRESPOND (JSON only):\n{\"response\":\"[answer in ${maxWords} words]\",\"action\":\"[ONE action or NONE]\"}`;\n\n    console.log(\" Sending request...\");\n\n    const functions = getFunctions();\n    const callGemini = httpsCallable(functions, \"callGemini\");\n\n    const result = await callGemini({\n      prompt: compactPrompt,\n      maxTokens: 256,\n    });\n\n    const data = result.data;\n    const candidate = data.candidates?.[0];\n\n    if (!candidate) {\n      throw new Error(\"No candidates returned\");\n    }\n\n    const rawText = candidate.content?.parts?.[0]?.text;\n\n    if (!rawText?.trim()) {\n      throw new Error(\"Empty response\");\n    }\n\n    let parsedResponse;\n    try {\n      const cleanedText = rawText\n        .replace(/```json\\s*/gi, \"\")\n        .replace(/```\\s*/g, \"\")\n        .trim();\n\n      parsedResponse = JSON.parse(cleanedText);\n    } catch (parseError) {\n      const jsonMatch = rawText.match(/\\{[\\s\\S]*\\}/);\n      if (jsonMatch) {\n        parsedResponse = JSON.parse(jsonMatch[0]);\n      } else {\n        throw new Error(\"No JSON found\");\n      }\n    }\n\n    if (!parsedResponse.response) {\n      throw new Error(\"Invalid JSON format\");\n    }\n\n    parsedResponse.action = parsedResponse.action || \"NONE\";\n\n    ResponseCache.set(userInput, currentRoute, parsedResponse);\n\n    console.log(\" Parsed response:\", parsedResponse);\n    return parsedResponse;\n  } catch (error) {\n    console.error(\" AI Error (using fallback):\", error.message);\n\n    console.log(\" Falling back to enhanced knowledge base...\");\n    const fallback = getFallbackResponse(userInput, deviceInfo);\n    console.log(\" Fallback response ready:\", fallback);\n    return fallback;\n  }\n};\n\n// ============= ENHANCED FALLBACK SYSTEM =============\nconst EnhancedFallbackSystem = {\n  // Comprehensive knowledge base\n  knowledgeBase: {\n    // PROJECTS\n    projects: {\n      keywords: [\n        \"project\",\n        \"work\",\n        \"built\",\n        \"created\",\n        \"developed\",\n        \"camslens\",\n        \"portfolio\",\n        \"build\",\n        \"made\",\n        \"coding\",\n      ],\n      responses: [\n        \"He's built 35+ impressive projects! His flagship CamsLens processes 80,000+ documents monthly with 95% accuracy using RAG based Vector Search! and worked on mutliple AI/ML, Full Stack, and Cloud projects!\",\n        \"Amazing portfolio! Top projects: CamsLens AI Platform, Financial Email Automation, Stock Exchange Platform, and RAVI Accessibility Tool! \",\n        \"His projects span AI/ML, Full Stack, and Cloud! CamsLens, NexGen Gaming, and RoomFlow are highlights!\",\n      ],\n      action: \"NAVIGATE_PROJECTS\",\n    },\n\n    camslens: {\n      keywords: [\"camslens\", \"cams lens\", \"enterprise ai\", \"genai\", \"flagship\"],\n      responses: [\n        \"CamsLens is his flagship project! Enterprise GenAI platform processing 80,000+ documents monthly with 95% accuracy using Vertex AI Gemini-flash 2.0!\",\n        \"CamsLens: Real-time RSS ingestion, AI-powered queries, 60% faster responses, CMEK-compliant storage. Built with Google Cloud Run and BigQuery!\",\n      ],\n      action: \"HIGHLIGHT_PROJECT_1\",\n    },\n\n    topProject: {\n      keywords: [\n        \"top project\",\n        \"best project\",\n        \"main project\",\n        \"first project\",\n        \"number one\",\n        \"primary project\",\n      ],\n      responses: [\n        \"His #1 project is CamsLens - an Enterprise GenAI platform with 95% accuracy, processing 80,000+ docs monthly!\",\n        \"Top project: CamsLens! Uses Vertex AI Gemini-flash 2.0, handles massive document processing with real-time capabilities!\",\n      ],\n      action: \"HIGHLIGHT_PROJECT_1\",\n    },\n\n    // EXPERIENCE\n    experience: {\n      keywords: [\n        \"experience\",\n        \"job\",\n        \"career\",\n        \"work history\",\n        \"employment\",\n        \"working\",\n        \"company\",\n        \"employer\",\n      ],\n      responses: [\n        \"He's currently SDE at CAMS Chennai (June 2024-Present) building enterprise AI platforms! Previously taught 300+ students at IIT Delhi!\",\n        \"Software Development Engineer at CAMS! Built CamsLens GenAI platform, automated RSS feeds, optimized Vertex AI datastores!\",\n        \"Current: SDE at CAMS Chennai. Past: Software Engineer at RAVI IIT Delhi, Teaching Assistant for 300+ students, Eamvey Technologies intern!\",\n      ],\n      action: \"NAVIGATE_EXPERIENCE\",\n    },\n\n    cams: {\n      keywords: [\n        \"cams\",\n        \"current job\",\n        \"current work\",\n        \"current role\",\n        \"where work\",\n        \"employer\",\n      ],\n      responses: [\n        \"At CAMS since June 2024! Developed CamsLens GenAI platform, real-time RSS ingestion, AI query APIs - all with 95% accuracy!\",\n        \"Software Development Engineer at CAMS Chennai! Building enterprise AI solutions using Vertex AI, Google Cloud Run, and BigQuery!\",\n      ],\n      action: \"NAVIGATE_EXPERIENCE\",\n    },\n\n    // EDUCATION\n    education: {\n      keywords: [\n        \"education\",\n        \"study\",\n        \"studied\",\n        \"college\",\n        \"university\",\n        \"iit\",\n        \"delhi\",\n        \"degree\",\n        \"qualification\",\n        \"academic\",\n      ],\n      responses: [\n        \"IIT Delhi Alumni! Dual Degree (B.Tech + M.Tech) in Computer Science, graduated 2024. Specialized in AI/ML, Computer Vision, NLP!\",\n        \"Completed dual degree from prestigious IIT Delhi (2018-2024)! Computer Science & Engineering with AI/ML specialization!\",\n        \"IIT Delhi graduate 2024! Also served as Teaching Assistant mentoring 300+ students in Data Structures and Programming!\",\n      ],\n      action: \"NAVIGATE_EDUCATION\",\n    },\n\n    iit: {\n      keywords: [\"iit delhi\", \"indian institute\", \"iit\"],\n      responses: [\n        \"IIT Delhi - one of India's top engineering institutes! He completed his dual degree in CSE there (2018-2024), specializing in AI/ML!\",\n        \"From IIT Delhi! Not just studied but also mentored 300+ students as Teaching Assistant. Graduated with dual degree in Computer Science!\",\n      ],\n      action: \"NAVIGATE_EDUCATION\",\n    },\n\n    // SKILLS\n    skills: {\n      keywords: [\n        \"skill\",\n        \"technology\",\n        \"tech\",\n        \"programming\",\n        \"language\",\n        \"stack\",\n        \"know\",\n        \"proficient\",\n        \"expert\",\n      ],\n      responses: [\n        \"Master of Java, Python, JavaScript! Expert in AI/ML (PyTorch, Vertex AI, OpenCV), Full Stack (MERN, Spring Boot), Cloud (GCP, AWS, Docker)!\",\n        \"Tech stack: Languages (Java, Python, JS), AI/ML (Vertex AI, TensorFlow, NLP), Cloud (GCP, Docker), Full Stack (React, Node, Spring Boot)!\",\n        \"Impressive skills! Programming: Java/Python/JS. AI: Vertex AI/PyTorch/OpenCV. Cloud: GCP/AWS/Docker. Full Stack: MERN/Spring Boot!\",\n      ],\n      action: \"HIGHLIGHT_SKILLS\",\n    },\n\n    ai: {\n      keywords: [\n        \"ai\",\n        \"ml\",\n        \"machine learning\",\n        \"artificial intelligence\",\n        \"deep learning\",\n        \"computer vision\",\n        \"nlp\",\n      ],\n      responses: [\n        \"AI/ML Expert! PyTorch, TensorFlow, Vertex AI Gen AI, Computer Vision (OpenCV), NLP (spaCy, LLMs), Document Processing, Image Recognition!\",\n        \"Strong in AI/ML! Built enterprise GenAI platforms, email automation with LLMs, table recognition systems, driver drowsiness detection!\",\n      ],\n      action: \"HIGHLIGHT_SKILLS\",\n    },\n\n    cloud: {\n      keywords: [\"cloud\", \"gcp\", \"aws\", \"azure\", \"google cloud\", \"devops\"],\n      responses: [\n        \"Cloud Pro! Google Cloud (Cloud Run, Vertex AI, BigQuery, GCS), AWS basics, Docker, Kubernetes, CI/CD with GitHub Actions!\",\n        \"Cloud expertise: GCP primary (Cloud Run, Vertex AI), Docker containerization, basic AWS & Azure. DevOps with Jenkins and Git!\",\n      ],\n      action: \"HIGHLIGHT_SKILLS\",\n    },\n\n    // CONTACT\n    contact: {\n      keywords: [\n        \"contact\",\n        \"email\",\n        \"phone\",\n        \"reach\",\n        \"linkedin\",\n        \"github\",\n        \"connect\",\n        \"hire\",\n        \"talk\",\n      ],\n      responses: [\n        \"Reach him at Laxmankethavath5@gmail.com or +91-9000063740! Also on LinkedIn (linkedin.com/in/k-laxman) and GitHub (github.com/Laxman824)!\",\n        \"Contact: Email laxmankethavath5@gmail.com, Phone +91-9000063740, LinkedIn /in/k-laxman, GitHub @Laxman824. Based in Chennai, India!\",\n        \"He's very approachable! Email: laxmankethavath5@gmail.com, LinkedIn: linkedin.com/in/k-laxman. Currently in Chennai!\",\n      ],\n      action: \"NAVIGATE_CONTACT\",\n    },\n\n    location: {\n      keywords: [\"where\", \"location\", \"live\", \"based\", \"city\", \"place\"],\n      responses: [\n        \"Based in Chennai, Tamil Nadu, India! Working at CAMS building innovative tech solutions!\",\n        \"Currently in Chennai, India - working on cutting-edge AI platforms at CAMS!\",\n      ],\n      action: \"NONE\",\n    },\n\n    // TEACHING\n    teaching: {\n      keywords: [\"teaching\", \"mentor\", \"ta\", \"assistant\", \"students\", \"taught\"],\n      responses: [\n        \"Teaching Assistant at IIT Delhi (2019-2021)! Mentored 300+ undergraduate students in Data Structures and Introduction to Programming!\",\n        \"Passionate educator! Taught 300+ students at IIT Delhi covering Data Structures, Programming, and advanced CS concepts!\",\n      ],\n      action: \"NAVIGATE_EXPERIENCE\",\n    },\n\n    // ACHIEVEMENTS\n    achievements: {\n      keywords: [\n        \"achievement\",\n        \"accomplishment\",\n        \"success\",\n        \"impressive\",\n        \"highlight\",\n      ],\n      responses: [\n        \"Major achievements: IIT Delhi dual degree, 25+ projects, CamsLens with 95% accuracy, taught 300+ students, multiple virtual internships!\",\n        \"Highlights: Enterprise AI platform (80K docs/month), IIT Delhi graduate, Full Stack expert, mentored 300+ students, 25+ technical projects!\",\n      ],\n      action: \"NAVIGATE_HOME\",\n    },\n  },\n\n  // Smart pattern matching with scoring\n  findBestMatch(userInput) {\n    const input = userInput.toLowerCase().trim();\n    let bestMatch = null;\n    let bestScore = 0;\n\n    for (const [category, data] of Object.entries(this.knowledgeBase)) {\n      let score = 0;\n\n      // Check keyword matches\n      for (const keyword of data.keywords) {\n        if (input.includes(keyword)) {\n          score += keyword.split(\" \").length; // Multi-word keywords score higher\n        }\n      }\n\n      // Bonus for exact phrase matches\n      if (data.keywords.some((k) => input === k)) {\n        score += 10;\n      }\n\n      // Bonus for question patterns\n      if (\n        input.startsWith(\"what\") ||\n        input.startsWith(\"tell\") ||\n        input.startsWith(\"show\")\n      ) {\n        score += 1;\n      }\n\n      if (score > bestScore) {\n        bestScore = score;\n        bestMatch = { category, data };\n      }\n    }\n\n    return bestScore > 0 ? bestMatch : null;\n  },\n\n  // Get contextual response\n  getResponse(userInput) {\n    const match = this.findBestMatch(userInput);\n\n    if (!match) {\n      return null; // Will use generic fallback\n    }\n\n    // Pick a random response from available responses\n    const responses = match.data.responses;\n    const randomResponse =\n      responses[Math.floor(Math.random() * responses.length)];\n\n    return {\n      response: randomResponse,\n      action: match.data.action,\n      category: match.category,\n    };\n  },\n};\n// ============= FALLBACK =============\n// ============= ENHANCED FALLBACK (Never Disappoints Users) =============\nexport const getFallbackResponse = (userInput, deviceInfo) => {\n  console.log(\" Enhanced fallback analyzing:\", userInput);\n\n  // Try enhanced fallback first\n  const enhancedMatch = EnhancedFallbackSystem.getResponse(userInput);\n\n  if (enhancedMatch) {\n    console.log(\n      \" Enhanced fallback match:\",\n      enhancedMatch.category,\n      \"(NO API CALL)\"\n    );\n    return {\n      response: enhancedMatch.response,\n      action: enhancedMatch.action,\n    };\n  }\n\n  // Greeting detection\n  const greetings = [\n    \"hello\",\n    \"hi\",\n    \"hey\",\n    \"greetings\",\n    \"namaste\",\n    \"hola\",\n    \"good morning\",\n    \"good evening\",\n  ];\n  if (greetings.some((g) => userInput.toLowerCase().includes(g))) {\n    return {\n      response: deviceInfo?.isMobile\n        ? \"Hey! I'm Laxman's AI. Ask about his projects, skills, or experience!\"\n        : \"Hey there! I'm Laxman's AI assistant. Ask me about his impressive projects, IIT Delhi background, or technical skills!\",\n      action: \"NONE\",\n    };\n  }\n\n  // Help/capability questions\n  const helpKeywords = [\"help\", \"what can\", \"how to\", \"what do\", \"can you\"];\n  if (helpKeywords.some((k) => userInput.toLowerCase().includes(k))) {\n    return {\n      response:\n        \"I can tell you about Laxman's projects, work experience, education, skills, and contact info! I can also navigate and highlight sections. Try asking!\",\n      action: \"NONE\",\n    };\n  }\n\n  // Navigation commands (even if not recognized)\n  const input = userInput.toLowerCase();\n  if (\n    input.includes(\"go to\") ||\n    input.includes(\"take me\") ||\n    input.includes(\"navigate\")\n  ) {\n    if (input.includes(\"project\")) {\n      return {\n        response: \"Taking you to projects section!\",\n        action: \"NAVIGATE_PROJECTS\",\n      };\n    }\n    if (input.includes(\"experience\") || input.includes(\"work\")) {\n      return {\n        response: \"Showing work experience!\",\n        action: \"NAVIGATE_EXPERIENCE\",\n      };\n    }\n    if (input.includes(\"education\") || input.includes(\"study\")) {\n      return {\n        response: \"Navigating to education section!\",\n        action: \"NAVIGATE_EDUCATION\",\n      };\n    }\n    if (input.includes(\"contact\") || input.includes(\"reach\")) {\n      return {\n        response: \"Here's contact information!\",\n        action: \"NAVIGATE_CONTACT\",\n      };\n    }\n    if (input.includes(\"home\")) {\n      return {\n        response: \"Going to home page!\",\n        action: \"NAVIGATE_HOME\",\n      };\n    }\n  }\n\n  // Specific question patterns\n  if (input.includes(\"how many\") || input.includes(\"number of\")) {\n    if (input.includes(\"project\")) {\n      return {\n        response:\n          \"He's built 25+ technical projects! From enterprise AI platforms to full-stack applications. Want to see them?\",\n        action: \"NAVIGATE_PROJECTS\",\n      };\n    }\n    if (input.includes(\"year\") || input.includes(\"experience\")) {\n      return {\n        response:\n          \"2+ years since starting at IIT Delhi (2018), currently SDE at CAMS since June 2024!\",\n        action: \"NAVIGATE_EXPERIENCE\",\n      };\n    }\n  }\n\n  // \"Tell me about\" patterns\n  if (\n    input.startsWith(\"tell\") ||\n    input.startsWith(\"explain\") ||\n    input.startsWith(\"describe\")\n  ) {\n    return {\n      response:\n        \"I'd love to share! He's an IIT Delhi graduate, SDE at CAMS, building enterprise AI platforms. 25+ projects, expert in Java/Python/AI/ML!\",\n      action: \"NAVIGATE_HOME\",\n    };\n  }\n\n  // \"Show me\" patterns\n  if (input.startsWith(\"show\") || input.startsWith(\"display\")) {\n    return {\n      response:\n        \"Let me show you! He has impressive projects, IIT Delhi education, and current work at CAMS. What interests you?\",\n      action: \"NAVIGATE_PROJECTS\",\n    };\n  }\n\n  // When/Where questions\n  if (input.startsWith(\"when\") || input.includes(\"when did\")) {\n    if (input.includes(\"graduate\") || input.includes(\"finish\")) {\n      return {\n        response:\n          \"Graduated from IIT Delhi in 2024 with dual degree in Computer Science!\",\n        action: \"NAVIGATE_EDUCATION\",\n      };\n    }\n    if (input.includes(\"start\") || input.includes(\"join\")) {\n      return {\n        response:\n          \"Started at CAMS in June 2024 as Software Development Engineer!\",\n        action: \"NAVIGATE_EXPERIENCE\",\n      };\n    }\n  }\n\n  // Why questions\n  if (input.startsWith(\"why\") || input.includes(\"why\")) {\n    return {\n      response:\n        \"Great question! He chose AI/ML at IIT Delhi, passionate about building impactful solutions. His CamsLens platform processes 80K+ docs monthly!\",\n      action: \"NAVIGATE_PROJECTS\",\n    };\n  }\n\n  // Comparison questions\n  if (\n    input.includes(\"best\") ||\n    input.includes(\"favorite\") ||\n    input.includes(\"most\")\n  ) {\n    return {\n      response:\n        \"His best work is CamsLens - Enterprise GenAI platform with 95% accuracy! Also loves full-stack development and teaching!\",\n      action: \"HIGHLIGHT_PROJECT_1\",\n    };\n  }\n\n  // Generic but intelligent fallback\n  const keywords = [\n    \"project\",\n    \"experience\",\n    \"education\",\n    \"skill\",\n    \"contact\",\n    \"work\",\n    \"iit\",\n    \"cams\",\n  ];\n  const foundKeyword = keywords.find((k) => input.includes(k));\n\n  if (foundKeyword) {\n    const responses = {\n      project: {\n        response:\n          \"He's built amazing projects like CamsLens (80K docs/month), Financial Email AI, Stock Exchange Platform, and more!\",\n        action: \"NAVIGATE_PROJECTS\",\n      },\n      experience: {\n        response:\n          \"Currently SDE at CAMS Chennai! Previously Software Engineer at RAVI IIT Delhi and Teaching Assistant for 300+ students!\",\n        action: \"NAVIGATE_EXPERIENCE\",\n      },\n      work: {\n        response:\n          \"Working at CAMS since June 2024, building enterprise AI platforms with Vertex AI and Google Cloud!\",\n        action: \"NAVIGATE_EXPERIENCE\",\n      },\n      education: {\n        response:\n          \"IIT Delhi Alumni 2024! Dual degree in Computer Science, specialized in AI/ML, Computer Vision, and NLP!\",\n        action: \"NAVIGATE_EDUCATION\",\n      },\n      skill: {\n        response:\n          \"Expert in Java, Python, JavaScript, AI/ML (Vertex AI, PyTorch), Cloud (GCP), Full Stack (MERN, Spring Boot)!\",\n        action: \"HIGHLIGHT_SKILLS\",\n      },\n      contact: {\n        response:\n          \"Email: laxmankethavath5@gmail.com, Phone: +91-9000063740, LinkedIn: /in/k-laxman, GitHub: @Laxman824!\",\n        action: \"NAVIGATE_CONTACT\",\n      },\n      iit: {\n        response:\n          \"IIT Delhi graduate 2024! Completed dual degree in Computer Science, also taught 300+ students!\",\n        action: \"NAVIGATE_EDUCATION\",\n      },\n      cams: {\n        response:\n          \"Software Development Engineer at CAMS Chennai! Built CamsLens GenAI platform processing 80,000+ documents monthly!\",\n        action: \"NAVIGATE_EXPERIENCE\",\n      },\n    };\n\n    const match = responses[foundKeyword];\n    if (match) {\n      console.log(\" Keyword-based fallback:\", foundKeyword, \"(NO API CALL)\");\n      return match;\n    }\n  }\n\n  // Ultimate fallback - still helpful\n  console.log(\" Using generic fallback with suggestion\");\n  return {\n    response: deviceInfo?.isMobile\n      ? \"I can help with projects, skills, experience, education, or contact info. What interests you?\"\n      : \"I have comprehensive knowledge about Laxman! Ask me about his impressive projects, IIT Delhi education, work at CAMS, technical skills, or how to reach him!\",\n    action: \"NAVIGATE_HOME\",\n  };\n};\n\n// ============= ROUTE TRACKING =============\nexport const setupRouteTracking = (onRouteChange) => {\n  return subscribeToRouteChanges(onRouteChange);\n};\n\n// ============= API USAGE TRACKER =============\nexport const APIUsageTracker = {\n  STORAGE_KEY: \"laxman_api_usage\",\n\n  logCall() {\n    try {\n      const usage = this.getUsage();\n      const today = new Date().toDateString();\n\n      if (usage.date !== today) {\n        usage.date = today;\n        usage.calls = 1;\n      } else {\n        usage.calls += 1;\n      }\n\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(usage));\n      console.log(` API calls today: ${usage.calls}`);\n\n      if (usage.calls > 80) {\n        console.warn(\" High API usage! Use shortcuts.\");\n      }\n\n      return usage;\n    } catch (error) {\n      console.warn(\"Failed to track usage:\", error);\n    }\n  },\n\n  getUsage() {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      return stored\n        ? JSON.parse(stored)\n        : { date: new Date().toDateString(), calls: 0 };\n    } catch {\n      return { date: new Date().toDateString(), calls: 0 };\n    }\n  },\n};\n\n// ============= EXPORTS =============\nexport default {\n  MemoryManager,\n  AgentExecutor,\n  getAgenticAIResponse,\n  getFallbackResponse,\n  setupRouteTracking,\n  VoiceShortcuts,\n  VisualAgent,\n  ViewportTracker,\n  ProactiveSuggestions,\n  ResponseCache,\n  APIUsageTracker,\n  LAXMAN_PORTFOLIO_DATA,\n};\n","// components/EmailAgent.js\n\n// ============= EMAIL AGENT (Free Tier - EmailJS) =============\nexport const EmailAgent = {\n  // EmailJS Configuration\n  config: {\n    serviceId: \"service_xe6alve\", // Replace\n    templateId: \"template_k2u1z0k\", // Replace\n    publicKey: \"ANZYSfODJvj2-066t\", // Replace\n  },\n\n  // Initialize EmailJS\n  init() {\n    if (typeof window !== \"undefined\" && !window.emailjs) {\n      const script = document.createElement(\"script\");\n      script.src =\n        \"https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js\";\n      script.onload = () => {\n        window.emailjs.init(this.config.publicKey);\n        console.log(\" EmailJS initialized\");\n      };\n      document.head.appendChild(script);\n    }\n  },\n\n  // Conversation state for collecting info\n  conversationState: {\n    isCollecting: false,\n    inquiryType: null,\n    data: {},\n    currentStep: 0,\n  },\n\n  // Email collection flows\n  inquiryFlows: {\n    HIRE: {\n      steps: [\"name\", \"email\", \"company\", \"phone\", \"message\"],\n      prompts: {\n        name: \"What's your name?\",\n        email: \"What's your email address?\",\n        company: \"Which company are you from?\",\n        phone: \"Your phone number? (or say 'skip')\",\n        message: \"Tell me about the opportunity or role.\",\n      },\n      confirmMessage: (data) =>\n        `Perfect! I'll send this to Laxman: ${data.name} from ${data.company} regarding a job opportunity. Correct?`,\n    },\n\n    COLLABORATE: {\n      steps: [\"name\", \"email\", \"project\", \"message\"],\n      prompts: {\n        name: \"What's your name?\",\n        email: \"Your email?\",\n        project: \"What's the project about?\",\n        message: \"Any additional details?\",\n      },\n      confirmMessage: (data) =>\n        `Got it! Sending collaboration request from ${data.name} about ${data.project}. Confirm?`,\n    },\n\n    QUESTION: {\n      steps: [\"name\", \"email\", \"message\"],\n      prompts: {\n        name: \"Your name?\",\n        email: \"Your email?\",\n        message: \"What's your question?\",\n      },\n      confirmMessage: (data) =>\n        `Okay! Sending your question from ${data.name}. Ready to send?`,\n    },\n  },\n\n  //  FIXED: Detect if user wants to send email\n  detectIntent(userInput) {\n    const input = userInput.toLowerCase();\n\n    //  DIRECT EMAIL PATTERNS (Highest Priority)\n    const directEmailPatterns = [\n      \"send email\",\n      \"send an email\",\n      \"send a email\",\n      \"email to\",\n      \"email laxman\",\n      \"email lakshman\",\n      \"email him\",\n      \"contact laxman\",\n      \"contact lakshman\",\n      \"reach out to laxman\",\n      \"reach out to lakshman\",\n      \"message laxman\",\n      \"message lakshman\",\n      \"write to laxman\",\n      \"write to lakshman\",\n      \"get in touch with laxman\",\n      \"get in touch with lakshman\",\n    ];\n\n    // Check direct patterns first\n    if (directEmailPatterns.some((pattern) => input.includes(pattern))) {\n      console.log(\" Email intent detected: QUESTION (direct email request)\");\n      return \"QUESTION\"; // Default to QUESTION, can be refined later\n    }\n\n    // Check for stronger intent patterns (multi-word phrases)\n    const strongIntents = {\n      HIRE: [\n        \"i want to send an email to laxman about hiring\",\n        \"i want to send an email about hiring\",\n        \"i want to send email\",\n        \"i want to hire\",\n        \"looking to hire\",\n        \"hire him\",\n        \"hire laxman\",\n        \"hire lakshman\",\n        \"recruit him\",\n        \"recruit laxman\",\n        \"recruit lakshman\",\n        \"job opportunity\",\n        \"job opening\",\n        \"position available\",\n        \"we are hiring\",\n        \"interested in hiring\",\n        \"hiring laxman\",\n        \"hiring lakshman\",\n        \"employment opportunity\",\n        \"work opportunity\",\n      ],\n      COLLABORATE: [\n        \"want to collaborate\",\n        \"collaborate with\",\n        \"collaborate with laxman\",\n        \"collaborate with lakshman\",\n        \"work together\",\n        \"partnership opportunity\",\n        \"collaborate on project\",\n        \"joint project\",\n        \"partner with\",\n        \"team up\",\n      ],\n    };\n\n    // Check strong patterns\n    for (const [type, phrases] of Object.entries(strongIntents)) {\n      if (phrases.some((phrase) => input.includes(phrase))) {\n        console.log(\" Email intent detected:\", type, \"(strong match)\");\n        return type;\n      }\n    }\n\n    // Only check single keywords if they appear with action words\n    const actionWords = [\n      \"want\",\n      \"need\",\n      \"looking\",\n      \"interested\",\n      \"can you\",\n      \"could you\",\n      \"would like\",\n      \"i'd like\",\n    ];\n    const hasActionWord = actionWords.some((word) => input.includes(word));\n\n    if (hasActionWord) {\n      const weakIntents = {\n        HIRE: [\"hire\", \"recruit\", \"email\", \"position\", \"job\"],\n        COLLABORATE: [\"collaborate\", \"partnership\"],\n        QUESTION: [\"contact\", \"message\", \"reach\", \"touch\"],\n      };\n\n      for (const [type, keywords] of Object.entries(weakIntents)) {\n        if (keywords.some((kw) => input.includes(kw))) {\n          console.log(\n            \" Email intent detected:\",\n            type,\n            \"(weak match with action)\"\n          );\n          return type;\n        }\n      }\n    }\n\n    console.log(\" No email intent detected\");\n    return null;\n  },\n\n  // Start email collection\n  startCollection(inquiryType) {\n    const flow = this.inquiryFlows[inquiryType];\n    if (!flow) return null;\n\n    this.conversationState = {\n      isCollecting: true,\n      inquiryType: inquiryType,\n      data: {},\n      currentStep: 0,\n      flow: flow,\n      useForm: true,\n    };\n\n    return {\n      response: `I'll open a secure form for your email. We can discuss the rest via voice.`,\n      action: \"OPEN_EMAIL_FORM\",\n      inquiryType: inquiryType,\n    };\n  },\n\n  //  Handover from Form to Voice\n  ingestFormData(formData) {\n    const { flow, data } = this.conversationState;\n\n    // 1. Extract Name from Email (Laxman Logic)\n    let extractedName = \"Guest\";\n    if (formData.email) {\n      const rawName = formData.email.split(\"@\")[0];\n      // Remove numbers and capitalize\n      const nameText = rawName.replace(/[0-9]/g, \"\");\n      extractedName = nameText.charAt(0).toUpperCase() + nameText.slice(1);\n    }\n\n    // 2. Save Data\n    this.conversationState.data = {\n      ...data,\n      email: formData.email,\n      name: extractedName,\n      message: formData.message || data.message || \"Details to follow...\",\n    };\n\n    console.log(\" Form data ingested:\", this.conversationState.data);\n\n    // 3. Update Step Pointer\n    // We assume Name and Email are now done. We need to find the next missing step.\n    let nextStepIndex = 0;\n    // Fast forward through steps we already have\n    while (nextStepIndex < flow.steps.length) {\n      const fieldName = flow.steps[nextStepIndex];\n      if (this.conversationState.data[fieldName]) {\n        nextStepIndex++;\n      } else {\n        break; // Found a missing field\n      }\n    }\n\n    this.conversationState.currentStep = nextStepIndex;\n\n    // 4. Generate Response\n    if (nextStepIndex >= flow.steps.length) {\n      return this.confirmAndSend();\n    }\n\n    const nextField = flow.steps[nextStepIndex];\n    const nextPrompt = flow.prompts[nextField];\n\n    return {\n      response: `Thanks ${extractedName}. I have your email. ${nextPrompt}`,\n      action: \"CONTINUE_COLLECTION\",\n    };\n  },\n\n  // Process user's voice answer\n  processAnswer(userAnswer) {\n    const { flow, currentStep, data } = this.conversationState;\n    const currentField = flow.steps[currentStep];\n\n    // If we are at email step (unlikely in hybrid, but possible), validate it\n    if (currentField === \"email\" && !this.validateEmail(userAnswer)) {\n      return {\n        response: \"Invalid email. Please say it again.\",\n        action: \"RETRY\",\n      };\n    }\n\n    // Store data\n    data[currentField] =\n      userAnswer.includes(\"skip\") || userAnswer.includes(\"no\")\n        ? \"Not provided\"\n        : userAnswer;\n\n    // Move to next\n    this.conversationState.currentStep++;\n\n    // Check if done\n    if (this.conversationState.currentStep >= flow.steps.length) {\n      return this.confirmAndSend();\n    }\n\n    // Ask next\n    const nextField = flow.steps[this.conversationState.currentStep];\n    return {\n      response: flow.prompts[nextField],\n      action: \"CONTINUE_COLLECTION\",\n    };\n  },\n\n  validateEmail(email) {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n  },\n\n  confirmAndSend() {\n    const { flow, data, inquiryType } = this.conversationState;\n    return {\n      response: flow.confirmMessage(data),\n      action: \"CONFIRM_EMAIL\",\n      onConfirm: () => this.sendEmail(inquiryType, data),\n    };\n  },\n\n  cancel() {\n    this.conversationState = {\n      isCollecting: false,\n      inquiryType: null,\n      data: {},\n      currentStep: 0,\n    };\n    return {\n      response: \"Cancelled. What else can I help with?\",\n      action: \"CANCELLED\",\n    };\n  },\n\n  async sendEmail(inquiryType, data) {\n    try {\n      const templateParams = {\n        from_name: data.name,\n        reply_to: data.email,\n        phone: data.phone || \"N/A\",\n        company: data.company || \"N/A\",\n        project: data.project || \"N/A\",\n        message: data.message,\n        inquiry_type: inquiryType,\n        timestamp: new Date().toLocaleString(),\n      };\n\n      await window.emailjs.send(\n        this.config.serviceId,\n        this.config.templateId,\n        templateParams\n      );\n\n      this.conversationState = {\n        isCollecting: false,\n        inquiryType: null,\n        data: {},\n        currentStep: 0,\n      };\n\n      return {\n        success: true,\n        response:\n          \"Sent! Laxman will contact you at \" +\n          data.email +\n          \". Anything else I can help with?\",\n        action: \"EMAIL_SENT\",\n      };\n    } catch (error) {\n      console.error(error);\n      return {\n        success: false,\n        response: \"Failed to send. Please try again later.\",\n        action: \"EMAIL_FAILED\",\n      };\n    }\n  },\n};\n\nexport default EmailAgent;\n","// components/EmailFormModal.jsx\nimport React, { useState, useEffect, useRef } from \"react\";\nimport styled, { ThemeProvider, keyframes, css } from \"styled-components\";\n\n// --- Animations ---\nconst slideUp = keyframes`\n  from { transform: translateY(100%); opacity: 0; }\n  to { transform: translateY(0); opacity: 1; }\n`;\n\nconst popIn = keyframes`\n  0% { opacity: 0; transform: scale(0.95) translateY(30px); filter: blur(8px); }\n  60% { transform: scale(1.02) translateY(-5px); }\n  100% { opacity: 1; transform: scale(1) translateY(0); filter: blur(0); }\n`;\n\nconst pulse = keyframes`\n  0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }\n  50% { box-shadow: 0 0 0 12px rgba(16, 185, 129, 0); }\n`;\n\nconst shimmer = keyframes`\n  0% { background-position: -1000px 0; }\n  100% { background-position: 1000px 0; }\n`;\n\nconst float = keyframes`\n  0%, 100% { transform: translateY(0px); }\n  50% { transform: translateY(-3px); }\n`;\n\n// --- Theme Definitions ---\nconst darkTheme = {\n  mode: \"dark\",\n  bg: \"rgba(15, 23, 42, 0.85)\",\n  bgGradient:\n    \"linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(30, 41, 59, 0.85) 100%)\",\n  text: \"#ffffff\",\n  border: \"rgba(255, 255, 255, 0.12)\",\n  borderTop: \"rgba(255, 255, 255, 0.2)\",\n  borderBottom: \"rgba(0, 0, 0, 0.4)\",\n  highlight: \"rgba(255, 255, 255, 0.18)\",\n  shadow:\n    \"0 25px 50px -12px rgba(0, 0, 0, 0.7), 0 10px 20px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1)\",\n  shadowDrag:\n    \"0 40px 80px -15px rgba(0, 0, 0, 0.8), 0 20px 40px rgba(0, 0, 0, 0.5), inset 0 2px 0 rgba(255, 255, 255, 0.15)\",\n  inputBg: \"rgba(0, 0, 0, 0.3)\",\n  accent: \"#10b981\",\n  accentSecondary: \"#047857\",\n  accentGlow: \"0 0 25px rgba(16, 185, 129, 0.4)\",\n  hoverOverlay: \"rgba(255, 255, 255, 0.03)\",\n};\n\nconst lightTheme = {\n  mode: \"light\",\n  bg: \"rgba(255, 255, 255, 0.9)\",\n  bgGradient:\n    \"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.9) 100%)\",\n  text: \"#1e293b\",\n  border: \"rgba(226, 232, 240, 0.8)\",\n  borderTop: \"rgba(255, 255, 255, 0.9)\",\n  borderBottom: \"rgba(203, 213, 225, 0.5)\",\n  highlight: \"rgba(255, 255, 255, 0.95)\",\n  shadow:\n    \"0 20px 40px -12px rgba(0, 0, 0, 0.12), 0 8px 16px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.8)\",\n  shadowDrag:\n    \"0 35px 70px -15px rgba(0, 0, 0, 0.2), 0 15px 30px rgba(0, 0, 0, 0.12), inset 0 2px 0 rgba(255, 255, 255, 1)\",\n  inputBg: \"rgba(241, 245, 249, 0.7)\",\n  accent: \"#059669\",\n  accentSecondary: \"#047857\",\n  accentGlow: \"0 0 20px rgba(5, 150, 105, 0.25)\",\n  hoverOverlay: \"rgba(0, 0, 0, 0.02)\",\n};\n\n// --- Styled Components ---\n\nconst PanelContainer = styled.div`\n  position: fixed;\n  z-index: 10001;\n\n  /* Enhanced Glassmorphism */\n  background: ${(props) => props.theme.bgGradient};\n  backdrop-filter: blur(32px) saturate(160%);\n  -webkit-backdrop-filter: blur(32px) saturate(160%);\n\n  /* Premium Borders with 3D Effect */\n  border: 1px solid ${(props) => props.theme.border};\n  border-top: 1px solid ${(props) => props.theme.borderTop};\n  border-bottom: 1px solid ${(props) => props.theme.borderBottom};\n\n  /* Dynamic Shadow Based on State */\n  box-shadow: ${(props) =>\n    props.isDragging ? props.theme.shadowDrag : props.theme.shadow};\n\n  color: ${(props) => props.theme.text};\n  display: ${(props) => (props.show ? \"flex\" : \"none\")};\n  flex-direction: column;\n  overflow: hidden;\n\n  /* Smooth Transitions */\n  transition: box-shadow 0.3s cubic-bezier(0.16, 1, 0.3, 1),\n    transform 0.2s cubic-bezier(0.16, 1, 0.3, 1),\n    width 0.4s cubic-bezier(0.16, 1, 0.3, 1),\n    height 0.4s cubic-bezier(0.16, 1, 0.3, 1), border-color 0.3s ease;\n\n  /* Prevent text selection during drag */\n  user-select: ${(props) => (props.isDragging ? \"none\" : \"auto\")};\n  -webkit-user-select: ${(props) => (props.isDragging ? \"none\" : \"auto\")};\n\n  /* DESKTOP STYLES */\n  ${(props) =>\n    !props.isMobile &&\n    css`\n      width: ${props.minimized ? \"280px\" : \"400px\"};\n      height: ${props.minimized ? \"64px\" : \"auto\"};\n      border-radius: 24px;\n      left: ${props.x}px;\n      top: ${props.y}px;\n\n      /* Enhanced 3D Transform */\n      transform-style: preserve-3d;\n      transform: perspective(1200px)\n        rotateX(${props.isDragging ? \"1.5deg\" : \"0deg\"})\n        rotateY(${props.isDragging ? \"0.5deg\" : \"0deg\"})\n        translateZ(${props.isDragging ? \"20px\" : \"0px\"})\n        scale(${props.isDragging ? \"1.02\" : \"1\"});\n\n      animation: ${popIn} 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);\n      cursor: ${props.isDragging ? \"grabbing\" : \"grab\"};\n\n      /* Drag Hint Overlay */\n      &::before {\n        content: \"\";\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: ${props.isDragging\n          ? \"radial-gradient(circle at center, rgba(16, 185, 129, 0.05), transparent)\"\n          : \"transparent\"};\n        pointer-events: none;\n        transition: background 0.3s ease;\n        border-radius: inherit;\n      }\n\n      /* Active State Glow */\n      ${(props) =>\n        props.isDragging &&\n        css`\n          &::after {\n            content: \"\";\n            position: absolute;\n            top: -2px;\n            left: -2px;\n            right: -2px;\n            bottom: -2px;\n            background: linear-gradient(\n              135deg,\n              ${props.theme.accent}30,\n              transparent\n            );\n            border-radius: inherit;\n            z-index: -1;\n            filter: blur(8px);\n            opacity: 0.6;\n          }\n        `}\n    `}\n\n  /* MOBILE STYLES */\n  ${(props) =>\n    props.isMobile &&\n    css`\n      left: 16px;\n      right: 16px;\n      bottom: ${props.minimized ? \"20px\" : \"50%\"};\n      width: auto;\n      max-width: 500px;\n      margin: 0 auto;\n      transform: ${props.minimized ? \"translateY(0)\" : \"translateY(50%)\"};\n      border-radius: 24px;\n      animation: ${slideUp} 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);\n      cursor: default;\n    `}\n`;\n\n// --- Drag Handle Indicator ---\nconst DragHandle = styled.div`\n  position: absolute;\n  top: 8px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 40px;\n  height: 4px;\n  border-radius: 2px;\n  background: ${(props) => props.theme.border};\n  opacity: ${(props) => (props.isDragging ? 0.8 : 0.3)};\n  transition: all 0.3s ease;\n  pointer-events: none;\n\n  ${(props) =>\n    !props.isMobile &&\n    css`\n      &::after {\n        content: \"\";\n        position: absolute;\n        top: -4px;\n        left: -4px;\n        right: -4px;\n        bottom: -4px;\n        background: ${props.isDragging\n          ? `radial-gradient(ellipse, ${props.theme.accent}40, transparent)`\n          : \"transparent\"};\n        filter: blur(4px);\n        border-radius: inherit;\n      }\n    `}\n`;\n\n// --- Minimized View ---\nconst MinimizedBar = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 20px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n\n  &:hover {\n    background: ${(props) => props.theme.hoverOverlay};\n\n    &::before {\n      content: \"\";\n      position: absolute;\n      top: 0;\n      left: -100%;\n      width: 100%;\n      height: 100%;\n      background: linear-gradient(\n        90deg,\n        transparent,\n        ${(props) => props.theme.highlight},\n        transparent\n      );\n      animation: ${shimmer} 2s infinite;\n    }\n  }\n\n  &:active {\n    transform: scale(0.98);\n  }\n`;\n\nconst StatusPulse = styled.div`\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background: ${(props) => props.theme.accent};\n  animation: ${pulse} 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  box-shadow: 0 0 10px ${(props) => props.theme.accent};\n`;\n\nconst MinimizedText = styled.span`\n  font-size: 14px;\n  font-weight: 600;\n  opacity: 0.95;\n  flex: 1;\n  margin-left: 14px;\n  letter-spacing: 0.3px;\n`;\n\nconst MaximizeBtn = styled.button`\n  background: rgba(255, 255, 255, 0.08);\n  border: 1px solid ${(props) => props.theme.border};\n  border-radius: 10px;\n  width: 32px;\n  height: 32px;\n  font-size: 18px;\n  color: inherit;\n  cursor: pointer;\n  opacity: 0.8;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover {\n    opacity: 1;\n    background: rgba(255, 255, 255, 0.12);\n    transform: translateY(-2px) rotate(45deg);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  }\n\n  &:active {\n    transform: translateY(0) rotate(45deg) scale(0.95);\n  }\n`;\n\n// --- Expanded View ---\nconst Header = styled.div`\n  padding: 24px 24px 18px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid ${(props) => props.theme.border};\n  position: relative;\n  background: ${(props) => props.theme.hoverOverlay};\n\n  ${(props) =>\n    !props.isMobile &&\n    css`\n      cursor: inherit;\n    `}\n`;\n\nconst TitleGroup = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 14px;\n  animation: ${float} 3s ease-in-out infinite;\n`;\n\nconst Icon = styled.div`\n  font-size: 24px;\n  filter: drop-shadow(0 2px 8px rgba(16, 185, 129, 0.3));\n  transition: transform 0.3s ease;\n\n  ${PanelContainer}:hover & {\n    transform: scale(1.1) rotate(5deg);\n  }\n`;\n\nconst TitleText = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n\n  h3 {\n    margin: 0;\n    font-size: 16px;\n    font-weight: 700;\n    letter-spacing: 0.3px;\n    background: linear-gradient(\n      135deg,\n      ${(props) => props.theme.text},\n      ${(props) => props.theme.accent}\n    );\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n  }\n\n  span {\n    font-size: 10px;\n    opacity: 0.65;\n    font-weight: 600;\n    letter-spacing: 1px;\n    text-transform: uppercase;\n    color: ${(props) => props.theme.accent};\n  }\n`;\n\nconst WindowControls = styled.div`\n  display: flex;\n  gap: 10px;\n`;\n\nconst ControlBtn = styled.button`\n  width: 32px;\n  height: 32px;\n  border-radius: 10px;\n  border: 1px solid ${(props) => props.theme.border};\n  background: rgba(255, 255, 255, 0.06);\n  color: inherit;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 18px;\n  font-weight: 600;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 0;\n    height: 0;\n    border-radius: 50%;\n    background: ${(props) =>\n      props.danger ? \"rgba(239, 68, 68, 0.2)\" : \"rgba(255,255,255,0.1)\"};\n    transform: translate(-50%, -50%);\n    transition: width 0.4s, height 0.4s;\n  }\n\n  &:hover {\n    background: ${(props) =>\n      props.danger ? \"rgba(239, 68, 68, 0.15)\" : \"rgba(255,255,255,0.12)\"};\n    border-color: ${(props) => (props.danger ? \"#ef4444\" : props.theme.accent)};\n    color: ${(props) => (props.danger ? \"#ef4444\" : props.theme.accent)};\n    transform: translateY(-2px);\n    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n\n    &::before {\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n  &:active {\n    transform: translateY(0) scale(0.95);\n  }\n`;\n\nconst FormBody = styled.form`\n  padding: 28px 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  background: ${(props) =>\n    `linear-gradient(180deg, transparent, ${props.theme.hoverOverlay})`};\n`;\n\nconst InputWrapper = styled.div`\n  position: relative;\n\n  &::after {\n    content: \"\";\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 0;\n    height: 2px;\n    background: ${(props) => props.theme.accent};\n    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n    border-radius: 2px;\n  }\n\n  &:focus-within::after {\n    width: 100%;\n  }\n`;\n\nconst InputLabel = styled.label`\n  display: block;\n  font-size: 11px;\n  font-weight: 700;\n  text-transform: uppercase;\n  letter-spacing: 1.2px;\n  margin-bottom: 10px;\n  opacity: 0.85;\n  color: ${(props) => props.theme.accent};\n  transition: all 0.3s ease;\n\n  ${InputWrapper}:focus-within & {\n    opacity: 1;\n    transform: translateX(2px);\n  }\n`;\n\nconst StyledInput = styled.input`\n  width: 100%;\n  padding: 16px 18px;\n  border-radius: 14px;\n  background: ${(props) => props.theme.inputBg};\n  border: 1.5px solid ${(props) => props.theme.border};\n  color: inherit;\n  font-size: 15px;\n  font-weight: 500;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.08);\n\n  &::placeholder {\n    color: rgba(150, 150, 150, 0.5);\n    font-weight: 400;\n  }\n\n  &:hover {\n    border-color: ${(props) => props.theme.accent}60;\n    background: ${(props) => props.theme.inputBg}dd;\n  }\n\n  &:focus {\n    outline: none;\n    border-color: ${(props) => props.theme.accent};\n    background: ${(props) => props.theme.inputBg}ff;\n    box-shadow: 0 0 0 4px ${(props) => props.theme.accent}20,\n      inset 0 2px 8px rgba(0, 0, 0, 0.1), ${(props) => props.theme.accentGlow};\n    transform: translateY(-2px);\n  }\n\n  /* Prevent dragging on input */\n  &:active {\n    cursor: text;\n  }\n`;\n\nconst ActionButton = styled.button`\n  width: 100%;\n  padding: 16px;\n  border-radius: 14px;\n  border: none;\n  background: linear-gradient(\n    135deg,\n    ${(props) => props.theme.accent} 0%,\n    ${(props) => props.theme.accentSecondary} 100%\n  );\n  color: white;\n  font-weight: 700;\n  font-size: 14px;\n  letter-spacing: 0.8px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 6px 20px ${(props) => props.theme.accent}50,\n    inset 0 1px 0 rgba(255, 255, 255, 0.2);\n  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n  text-transform: uppercase;\n\n  /* Shimmer Effect */\n  &::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(\n      90deg,\n      transparent,\n      rgba(255, 255, 255, 0.2),\n      transparent\n    );\n    transition: left 0.5s;\n  }\n\n  &:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 12px 32px ${(props) => props.theme.accent}70,\n      inset 0 1px 0 rgba(255, 255, 255, 0.3);\n\n    &::before {\n      left: 100%;\n    }\n  }\n\n  &:active {\n    transform: translateY(-1px) scale(0.98);\n  }\n\n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\n// --- Main Component ---\nexport default function EmailFormModal({\n  show,\n  onClose,\n  inquiryType,\n  onSubmit,\n  isMobile,\n  themeMode: propThemeMode,\n}) {\n  // Theme Detection\n  const [activeTheme, setActiveTheme] = useState(propThemeMode || \"dark\");\n\n  useEffect(() => {\n    const checkTheme = () => {\n      const isLight =\n        document.body.classList.contains(\"light-mode\") ||\n        document.body.getAttribute(\"data-theme\") === \"light\";\n      setActiveTheme(isLight ? \"light\" : \"dark\");\n    };\n    checkTheme();\n    const observer = new MutationObserver(checkTheme);\n    observer.observe(document.body, {\n      attributes: true,\n      attributeFilter: [\"class\", \"data-theme\"],\n    });\n    return () => observer.disconnect();\n  }, [propThemeMode]);\n\n  // UI State\n  const [minimized, setMinimized] = useState(false);\n  const [email, setEmail] = useState(\"\");\n\n  // Dragging State\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n  const [isDragging, setIsDragging] = useState(false);\n  const dragOffset = useRef({ x: 0, y: 0 });\n  const panelRef = useRef(null);\n  const velocityRef = useRef({ x: 0, y: 0 });\n  const lastPositionRef = useRef({ x: 0, y: 0 });\n  const animationFrameRef = useRef(null);\n\n  // Initialize Position (Bottom Right with padding)\n  useEffect(() => {\n    if (!isMobile && show) {\n      const initX = window.innerWidth - 440;\n      const initY = window.innerHeight - 380;\n      setPosition({\n        x: Math.max(20, initX),\n        y: Math.max(20, initY),\n      });\n    }\n  }, [isMobile, show]);\n\n  // Enhanced Drag Handlers with Smooth Movement\n  const handleDragStart = (e) => {\n    if (isMobile) return;\n\n    // Prevent dragging if clicking on interactive elements\n    const target = e.target;\n    if (\n      target.tagName === \"INPUT\" ||\n      target.tagName === \"BUTTON\" ||\n      target.closest(\"button\") ||\n      target.closest(\"input\")\n    ) {\n      return;\n    }\n\n    setIsDragging(true);\n    dragOffset.current = {\n      x: e.clientX - position.x,\n      y: e.clientY - position.y,\n    };\n    lastPositionRef.current = { x: e.clientX, y: e.clientY };\n    velocityRef.current = { x: 0, y: 0 };\n\n    // Add global cursor style\n    document.body.style.cursor = \"grabbing\";\n  };\n\n  const handleDragMove = (e) => {\n    if (!isDragging || isMobile) return;\n    e.preventDefault();\n\n    const newX = e.clientX - dragOffset.current.x;\n    const newY = e.clientY - dragOffset.current.y;\n\n    // Calculate velocity for momentum\n    velocityRef.current = {\n      x: e.clientX - lastPositionRef.current.x,\n      y: e.clientY - lastPositionRef.current.y,\n    };\n    lastPositionRef.current = { x: e.clientX, y: e.clientY };\n\n    // Smooth boundary constraints with padding\n    const padding = 20;\n    const maxX = window.innerWidth - (minimized ? 280 : 400) - padding;\n    const maxY = window.innerHeight - (minimized ? 64 : 400) - padding;\n\n    setPosition({\n      x: Math.max(padding, Math.min(newX, maxX)),\n      y: Math.max(padding, Math.min(newY, maxY)),\n    });\n  };\n\n  const handleDragEnd = () => {\n    if (!isDragging) return;\n\n    setIsDragging(false);\n    document.body.style.cursor = \"\";\n\n    // Optional: Add momentum effect\n    const applyMomentum = () => {\n      const friction = 0.92;\n      const threshold = 0.5;\n\n      if (\n        Math.abs(velocityRef.current.x) > threshold ||\n        Math.abs(velocityRef.current.y) > threshold\n      ) {\n        velocityRef.current.x *= friction;\n        velocityRef.current.y *= friction;\n\n        setPosition((prev) => {\n          const padding = 20;\n          const maxX = window.innerWidth - (minimized ? 280 : 400) - padding;\n          const maxY = window.innerHeight - (minimized ? 64 : 400) - padding;\n\n          return {\n            x: Math.max(\n              padding,\n              Math.min(prev.x + velocityRef.current.x, maxX)\n            ),\n            y: Math.max(\n              padding,\n              Math.min(prev.y + velocityRef.current.y, maxY)\n            ),\n          };\n        });\n\n        animationFrameRef.current = requestAnimationFrame(applyMomentum);\n      }\n    };\n\n    applyMomentum();\n  };\n\n  // Event Listeners\n  useEffect(() => {\n    if (isDragging) {\n      window.addEventListener(\"mousemove\", handleDragMove);\n      window.addEventListener(\"mouseup\", handleDragEnd);\n      return () => {\n        window.removeEventListener(\"mousemove\", handleDragMove);\n        window.removeEventListener(\"mouseup\", handleDragEnd);\n      };\n    }\n  }, [isDragging, minimized]);\n\n  // Cleanup animation frame\n  useEffect(() => {\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, []);\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      if (!isMobile) {\n        setPosition((prev) => {\n          const padding = 20;\n          const maxX = window.innerWidth - (minimized ? 280 : 400) - padding;\n          const maxY = window.innerHeight - (minimized ? 64 : 400) - padding;\n\n          return {\n            x: Math.max(padding, Math.min(prev.x, maxX)),\n            y: Math.max(padding, Math.min(prev.y, maxY)),\n          };\n        });\n      }\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, [isMobile, minimized]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (email && email.includes(\"@\")) {\n      onSubmit({ email });\n      setEmail(\"\");\n    }\n  };\n\n  const currentTheme = activeTheme === \"light\" ? lightTheme : darkTheme;\n\n  return (\n    <ThemeProvider theme={currentTheme}>\n      <PanelContainer\n        ref={panelRef}\n        show={show}\n        isMobile={isMobile}\n        minimized={minimized}\n        x={position.x}\n        y={position.y}\n        isDragging={isDragging}\n        onMouseDown={handleDragStart}\n      >\n        {!isMobile && <DragHandle isDragging={isDragging} />}\n\n        {minimized ? (\n          <MinimizedBar onClick={() => setMinimized(false)}>\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\n              <StatusPulse />\n              <MinimizedText>Secure Link Active</MinimizedText>\n            </div>\n            <MaximizeBtn\n              onClick={(e) => {\n                e.stopPropagation();\n                setMinimized(false);\n              }}\n            >\n              \n            </MaximizeBtn>\n          </MinimizedBar>\n        ) : (\n          <>\n            <Header isMobile={isMobile}>\n              <TitleGroup>\n                <Icon></Icon>\n                <TitleText>\n                  <h3>Connect via Email</h3>\n                  <span>JARVIS Secure Gateway</span>\n                </TitleText>\n              </TitleGroup>\n              <WindowControls>\n                <ControlBtn\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setMinimized(true);\n                  }}\n                  title=\"Minimize\"\n                >\n                  \n                </ControlBtn>\n                <ControlBtn\n                  danger\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onClose();\n                  }}\n                  title=\"Close\"\n                >\n                  \n                </ControlBtn>\n              </WindowControls>\n            </Header>\n\n            <FormBody\n              onSubmit={handleSubmit}\n              onMouseDown={(e) => e.stopPropagation()}\n            >\n              <InputWrapper>\n                <InputLabel htmlFor=\"email-input\">\n                  Enter Email Address\n                </InputLabel>\n                <StyledInput\n                  id=\"email-input\"\n                  type=\"email\"\n                  placeholder=\"name@company.com\"\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                  autoFocus\n                  required\n                />\n              </InputWrapper>\n\n              <ActionButton\n                type=\"submit\"\n                disabled={!email || !email.includes(\"@\")}\n              >\n                Continue to Voice Chat \n              </ActionButton>\n            </FormBody>\n          </>\n        )}\n      </PanelContainer>\n    </ThemeProvider>\n  );\n}\n","import React, {\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useMemo,\n} from \"react\";\nimport styled, { keyframes, css, createGlobalStyle } from \"styled-components\";\nimport { getFunctions, httpsCallable } from \"firebase/functions\";\n// ADD THIS LINE after your existing imports\nimport { EmailAgent } from \"./EmailAgent\";\nimport EmailFormModal from \"./EmailFormModal\";\nimport {\n  ProactiveSuggestionsEngine,\n  TaskOrchestrator,\n  IntentPredictor,\n  QuestionDecomposer,\n  FollowUpGenerator,\n  PreferenceLearner,\n} from \"./AgenticHelpers\";\nimport {\n  MemoryManager,\n  AgentExecutor,\n  getAgenticAIResponse,\n  getFallbackResponse,\n  setupRouteTracking,\n  VoiceShortcuts,\n  VisualAgent,\n  APIUsageTracker,\n} from \"./VoiceAgentHelpers\";\n// Enhanced portfolio data (keeping your existing data)\nconst LAXMAN_PORTFOLIO_DATA = `\nK LAXMAN - SOFTWARE DEVELOPMENT ENGINEER & AI SPECIALIST\n\n=== PROFESSIONAL SUMMARY ===\nSoftware Development Engineer at Computer Age Management Services (CAMS), Chennai (June 2024 - Present)\nIIT Delhi Alumni (2018-2024) - B.Tech + M.Tech in Computer Science & Engineering\nSpecialized in AI/ML, Financial Technology & Full Stack Development\nTeaching Assistant with 300+ students mentored | Enterprise AI Platform Developer\n\n=== CURRENT ROLE ===\nSoftware Development Engineer at Computer Age Management Services (CAMS)\n- Developed CamsLens Enterprise GenAI platform processing 80,000+ documents monthly with 95% accuracy\n- Implemented real-time RSS feed ingestion reducing manual monitoring by 80%\n- Designed AI-powered query APIs with 60% response time improvement\n- Built Ranking Chunks Algorithm for Vertex AI datastore optimization\n- Technologies: Vertex AI Gemini-flash 2.0, Agent Builder, Google Cloud Run, BigQuery\n- Location: Chennai, Tamil Nadu\n- Duration: June 2024 - Present\n\n=== MAJOR PROJECTS ===\n\n1.  ENTERPRISE GENAI PLATFORM (2024 - Present)\n   - Enterprise AI platform for CAMS processing 80,000+ documents monthly\n   - Achieved 95% accuracy with CMEK-compliant storage\n   - Implemented real-time RSS feed ingestion and ranking algorithms\n   - Technologies: Vertex AI Gemini-flash 2.0, Agent Builder, Google Cloud Run, BigQuery\n\n2. AI-POWERED FINANCIAL EMAIL AUTOMATION SYSTEM (2025)\n   - FastAPI microservice using Large Language Models for email classification\n   - Zero-shot learning with 95% accuracy for PAN, ARN, date extraction\n   - Processes 1,000+ emails daily, reducing manual processing by 80%\n   - Technologies: Python, FastAPI, vLLM, Docker, LLMs\n\n3. STOCK EXCHANGE PLATFORM (2024)\n   - Full-stack trading simulation supporting 100+ concurrent users\n   - JWT authentication, role-based access control (Admin/User)\n   - Sub-second response times for critical operations\n   - Technologies: Java Spring Boot, H2 DB, Spring Security\n\n4. BORDERLESS TABLE RECOGNITION & ACCESSIBILITY (2023)\n   - PDF table detection system with 30% accuracy improvement over CascadeTabNet\n   - SVM classifier achieving 90% accuracy for table cell classification\n   - Docker containerized solution for RAVI framework\n   - Technologies: Python, Layout Parser, MTL-TabNet, OpenCV, SVM\n\n5. RAVI - READING ASSISTANT FOR VISUALLY IMPAIRED (2022)\n   - STEM document conversion toolchain (PDFs, EPUBs to accessible formats)\n   - Flask web application for crowdsourced ALT TEXT generation\n   - Improved accessibility for 500+ STEM documents\n   - Technologies: Python, Flask, HTML/CSS, JavaScript\n\n6. DRIVER DROWSINESS DETECTION SYSTEM (2021)\n   - Real-time computer vision system with 90%+ detection accuracy\n   - Facial landmark detection and eye aspect ratio calculation\n   - 30 FPS performance optimized for embedded systems\n   - Technologies: Python, OpenCV, Dlib\n\n7. ENHANCED LEARNING MANAGEMENT SYSTEM (2022)\n   - Full-stack LMS for 1,000+ users during Eamvey Technologies internship\n   - Secure payment gateway handling 500+ monthly transactions\n   - 40% performance improvement through optimization\n   - Technologies: MERN Stack (MongoDB, Express.js, React, Node.js)\n\n8. NEXGEN GAMING E-COMMERCE PLATFORM (2024)\n   - Full-stack platform selling gaming consoles and accessories\n   - Features order management, delivery tracking, and smooth UI/UX\n   - Technologies: React, Node.js, MongoDB Atlas, Express, TailwindCSS, Firebase, Vercel\n\n9. IPO MONITORING & NOTIFIER (2023)\n   - Real-time IPO Grey Market Premium monitoring with instant notifications\n   - Automates tracking and reporting for higher gains\n   - Technologies: Python, OpenCV, OCR, PDF Processing, Excel Automation\n\n10. RSS FEED DOCUMENT DOWNLOADER (2023)\n    - Automated online download of documents from RSS feeds\n    - Converts feeds into structured PDFs with Excel outputs\n    - Technologies: Python, OpenCV, OCR, PDF Processing\n\n11. MSG-TO-PDF CONVERTER FOR FINANCIAL EMAILS (2023)\n    - Converts 20,000+ .MSG financial emails into structured PDFs\n    - Streamlined workflow reduces manual effort\n    - Technologies: Python, WeasyPrint, Streamlit\n\n12. PDF FOOTNOTES PROCESSOR (2023)\n    - Maps footnotes and references from PDFs into Excel sheets\n    - Optimized for large 1,000+ page financial documents\n    - Technologies: Python, OpenCV, OCR, PDF Processing\n\n13. FIELD EXTRACTION OCR FROM IMAGE (2023)\n    - Extracts fields like PAN and Folio numbers from images automatically\n    - Technologies: Python, OpenCV, DocTR, Streamlit\n\n14. LIVE SNAPSHOT & RESTORE FOR VMs (2022)\n    - KVM-based snapshot and restore service for running VMs\n    - Technologies: Rust, HTML/CSS, VMware\n\n15. WEBPAGE USING JS (2022)\n    - Fully customizable portfolio template\n    - Technologies: ReactJS, CSS\n\n16. AIRLINE DBMS PROTOTYPE (2022)\n    - Airline booking system simulation with Flask, PostgreSQL\n    - Frontend using HTML/CSS\n    - Technologies: Flask, PostgreSQL, HTML/CSS, Kaggle datasets\n\n17. LARGE FILE DOWNLOAD (2021)\n    - Socket programming project implementing BitTorrent-style transfers\n    - Efficient TCP/IP data handling with Wireshark monitoring\n    - Technologies: Python, Socket Programming, TCP/IP, Wireshark\n\n18. SIMPLE WEBPAGE WITH PAYMENT & DASHBOARD (2022)\n    - Integrated payment gateway and admin dashboard\n    - Technologies: HTML, CSS, PayPal, GitHub Deployment\n\n19. BIG NUMBER ARITHMETIC OPERATION (2021)\n    - Arithmetic handling for extremely large numbers\n    - Technologies: C, Node.js\n\n20. SIMULATION OF LIFT CONTROLLER SYSTEM (2021)\n    - Designed logic for three-floor lift operation\n    - Technologies: VHDL, Vivado, API, Integrated Circuit\n\n21. MULTI-AGENT SEARCH MODELING IN PACMAN (2021)\n    - Decision-making modeling for PACMAN game\n    - Technologies: Python, Search Algorithms, ReactJS\n\n22. VIRTUAL INTERNSHIP - GOLDMANSACHS (2022)\n    - Finance-focused virtual internship\n    - Technologies: Java, GraphQL, React, Apollo Client\n\n23. VIRTUAL INTERNSHIP - WALMART (2022)\n    - Advanced software engineering virtual experience\n    - Technologies: Flutter, Dart, React, Node.js, PostgreSQL\n\n24. VIRTUAL INTERNSHIP - JPMORGAN CHASE (2022)\n    - Projects including Metamask integration and Twitter API usage\n    - Technologies: React, Node.js, MongoDB\n\n25. VIRTUAL INTERNSHIP - HP (2022)\n    - Virtual internship with Next.js and deployment on Vercel\n    - Technologies: Next.js, Node.js, Supabase, Razorpay, Vercel\n\n=== EDUCATION ===\nIndian Institute of Technology Delhi (July 2018 - May 2024)\n- Dual Degree: Bachelor's + Master's in Computer Science & Engineering\n- Location: New Delhi, India\n- Specialized in AI/ML, Computer Vision, and NLP\n- Teaching Assistant (Fall 2019 - Spring 2021): Mentored 300+ undergraduate students\n- Courses: Data Structures, Introduction to Programming, Advanced CS concepts\n\n=== TECHNICAL SKILLS ===\nProgramming Languages:\n- Java: Spring Boot, Spring Security, Maven\n- Python: Flask, FastAPI, OpenCV, Scikit-learn, Pandas, NumPy\n- JavaScript: Node.js, React, ES6+\n\nFull Stack Development:\n- Frontend: React.js, HTML5, CSS3, TailwindCSS, JavaScript\n- Backend: Node.js, Express.js, Python Flask/FastAPI, Java Spring Boot\n- Databases: MySQL, PostgreSQL, MongoDB, H2, Google BigQuery\n- Web Technologies: REST APIs, GraphQL, WebSockets\n\nAI/ML & Data Science:\n- Frameworks: PyTorch, TensorFlow, Vertex AI Gen AI\n- Computer Vision: OpenCV, Layout Parser, MTL-TabNet, Dlib\n- NLP: spaCy, Large Language Models, Few-shot Learning\n- Specialized: Document Processing, Image Recognition, Facial Landmark Detection\n\nCloud & DevOps:\n- Google Cloud: Cloud Run, GCS, Vertex AI, BigQuery\n- AWS: Basic certification and services\n- Azure: Basic services\n- Containerization: Docker, Kubernetes\n- CI/CD: GitHub Actions, Jenkins, Git\n- Tools: Maven, npm, Postman, GCP SDK\n\n=== CONTACT ===\nEmail: [Laxmankethavath5@gmail.com](mailto:Laxmankethavath5@gmail.com)\nPhone: +91-9000063740\nLinkedIn: [Professional Profile](https://linkedin.com/in/k-laxman)\nGitHub: [Project Repository](https://github.com/Laxman824)\nPortfolio: [Personal Website](https://k-laxman-portfolio.com)\nLocation: Chennai, Tamil Nadu, India\n`;\n\n// Global Styles with Enhanced Liquid Glass Design Tokens\nconst GlobalLiquidGlassStyles = createGlobalStyle`\n  :root {\n    /* === ENHANCED TAHOE 26 / LIQUID GLASS DESIGN TOKENS === */\n    \n    /* Glass Properties */\n    --glass-blur-primary: 35px;\n    --glass-blur-secondary: 20px;\n    --glass-blur-minimal: 12px;\n    --glass-saturation: 1.8;\n    --glass-brightness: 1.1;\n    \n    /* Radius System */\n    --radius-sm: 12px;\n    --radius-md: 18px;\n    --radius-lg: 24px;\n    --radius-xl: 32px;\n    --radius-full: 50%;\n    \n    /* Rim Highlights */\n    --rim-opacity: 0.4;\n    --rim-highlight: rgba(255, 255, 255, var(--rim-opacity));\n    --rim-width: 1px;\n    \n    /* 3D Perspective System */\n    --perspective-light: 1000px;\n    --perspective-medium: 1500px;\n    --perspective-strong: 2000px;\n    \n    /* 3D Transform Values */\n    --transform-depth-light: 2px;\n    --transform-depth-medium: 4px;\n    --transform-depth-strong: 8px;\n    \n    /* Adaptive Tinting (will be set by JS) */\n    --tint-primary: rgba(59, 130, 246, 0.1);\n    --tint-secondary: rgba(59, 130, 246, 0.05);\n    --tint-accent: rgba(59, 130, 246, 0.15);\n    \n    /* Glass Layers */\n    --glass-surface: rgba(255, 255, 255, 0.15);\n    --glass-surface-hover: rgba(255, 255, 255, 0.22);\n    --glass-surface-active: rgba(255, 255, 255, 0.28);\n    \n    /* Enhanced Shadows for 3D */\n    --shadow-soft: 0 8px 32px rgba(0, 0, 0, 0.1);\n    --shadow-medium: 0 16px 48px rgba(0, 0, 0, 0.15);\n    --shadow-strong: 0 24px 64px rgba(0, 0, 0, 0.2);\n    --shadow-3d-light: 0 4px 16px rgba(0, 0, 0, 0.1), 0 2px 8px rgba(0, 0, 0, 0.05);\n    --shadow-3d-medium: 0 8px 24px rgba(0, 0, 0, 0.15), 0 4px 12px rgba(0, 0, 0, 0.1);\n    --shadow-3d-strong: 0 12px 32px rgba(0, 0, 0, 0.2), 0 6px 16px rgba(0, 0, 0, 0.15);\n    \n    /* Animation Tokens */\n    --transition-smooth: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);\n    --transition-gentle: all 0.6s cubic-bezier(0.4, 0.0, 0.2, 1);\n    --transition-spring: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);\n    --transition-3d: transform 0.3s cubic-bezier(0.4, 0.0, 0.2, 1), box-shadow 0.3s ease;\n    \n    /* Performance Modes */\n    --motion-reduce: 0;\n    --backdrop-support: 1;\n    \n    /* Enhanced Button Color Themes */\n    --btn-mic-gradient: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);\n    --btn-auto-gradient: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);\n    --btn-test-gradient: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);\n    --btn-3d-gradient: linear-gradient(135deg, #10B981 0%, #059669 100%);\n    \n    --btn-mic-glow: rgba(239, 68, 68, 0.5);\n    --btn-auto-glow: rgba(59, 130, 246, 0.5);\n    --btn-test-glow: rgba(139, 92, 246, 0.5);\n    --btn-3d-glow: rgba(16, 185, 129, 0.5);\n  }\n\n  /* Accessibility: Reduced Motion */\n  @media (prefers-reduced-motion: reduce) {\n    :root {\n      --motion-reduce: 1;\n      --transition-smooth: none;\n      --transition-gentle: none;\n      --transition-spring: none;\n      --transition-3d: none;\n    }\n  }\n\n  /* Flat Mode for Performance */\n  .flat-mode {\n    --glass-blur-primary: 40px;\n    --glass-blur-secondary: 20px;\n    --glass-blur-minimal: 16px;\n    --backdrop-support: 0;\n    --glass-surface: rgba(255, 255, 255, 0.15);\n    --glass-surface-hover: rgba(255, 255, 255, 0.2);\n    --glass-surface-active: rgba(255, 255, 255, 0.25);\n    --shadow-3d-light: var(--shadow-soft);\n    --shadow-3d-medium: var(--shadow-medium);\n    --shadow-3d-strong: var(--shadow-strong);\n  }\n\n  /* Fallback for Non-Supporting Browsers */\n  @supports not (backdrop-filter: blur(10px)) {\n    :root {\n      --backdrop-support: 0;\n      --glass-surface: rgba(30, 41, 59, 0.9);\n      --glass-surface-hover: rgba(30, 41, 59, 0.95);\n      --glass-surface-active: rgba(30, 41, 59, 1);\n    }\n  }\n`;\n\n// Hero Image Tint Sampler Module\nconst HeroTintSampler = {\n  init(heroSelector = \".hero-image\", options = {}) {\n    const {\n      sampleSize = 10,\n      saturationBoost = 0.3,\n      opacityRange = [0.05, 0.15],\n      fallbackTint = \"rgba(59, 130, 246, 0.1)\",\n    } = options;\n\n    try {\n      const heroElement = document.querySelector(heroSelector);\n      if (!heroElement) {\n        this.setFallbackTint(fallbackTint);\n        return;\n      }\n\n      // Handle different element types\n      let imageSrc = null;\n      if (heroElement.tagName === \"IMG\") {\n        imageSrc = heroElement.src;\n      } else {\n        const bgImage = getComputedStyle(heroElement).backgroundImage;\n        const match = bgImage.match(\n          /urlKATEX_INLINE_OPEN[\"']?([^\"']+)[\"']?KATEX_INLINE_CLOSE/\n        );\n        imageSrc = match ? match[1] : null;\n      }\n\n      if (!imageSrc) {\n        this.setFallbackTint(fallbackTint);\n        return;\n      }\n\n      this.sampleImageColors(\n        imageSrc,\n        sampleSize,\n        saturationBoost,\n        opacityRange,\n        fallbackTint\n      );\n    } catch (error) {\n      console.warn(\"Hero tint sampling failed:\", error);\n      this.setFallbackTint(fallbackTint);\n    }\n  },\n\n  sampleImageColors(\n    imageSrc,\n    sampleSize,\n    saturationBoost,\n    opacityRange,\n    fallbackTint\n  ) {\n    const canvas = document.createElement(\"canvas\");\n    const ctx = canvas.getContext(\"2d\");\n    const img = new Image();\n\n    img.crossOrigin = \"anonymous\"; // Handle CORS\n\n    img.onload = () => {\n      try {\n        canvas.width = sampleSize;\n        canvas.height = sampleSize;\n        ctx.drawImage(img, 0, 0, sampleSize, sampleSize);\n\n        const imageData = ctx.getImageData(0, 0, sampleSize, sampleSize);\n        const dominantColor = this.getDominantColor(imageData.data);\n        const tintColors = this.generateTintVariations(\n          dominantColor,\n          saturationBoost,\n          opacityRange\n        );\n\n        this.applyTintColors(tintColors);\n      } catch (error) {\n        console.warn(\"Canvas processing failed:\", error);\n        this.setFallbackTint(fallbackTint);\n      }\n    };\n\n    img.onerror = () => {\n      console.warn(\"Image loading failed for tint sampling\");\n      this.setFallbackTint(fallbackTint);\n    };\n\n    img.src = imageSrc;\n  },\n\n  getDominantColor(imageData) {\n    const colorCounts = {};\n\n    for (let i = 0; i < imageData.length; i += 4) {\n      const r = imageData[i];\n      const g = imageData[i + 1];\n      const b = imageData[i + 2];\n      const alpha = imageData[i + 3];\n\n      if (alpha < 128) continue; // Skip transparent pixels\n\n      // Bucket colors to reduce noise\n      const bucketedColor = `${Math.floor(r / 32) * 32},${\n        Math.floor(g / 32) * 32\n      },${Math.floor(b / 32) * 32}`;\n      colorCounts[bucketedColor] = (colorCounts[bucketedColor] || 0) + 1;\n    }\n\n    // Find most frequent color\n    let dominantColor = \"59,130,246\"; // Fallback blue\n    let maxCount = 0;\n\n    Object.entries(colorCounts).forEach(([color, count]) => {\n      if (count > maxCount) {\n        maxCount = count;\n        dominantColor = color;\n      }\n    });\n\n    return dominantColor.split(\",\").map(Number);\n  },\n\n  generateTintVariations([r, g, b], saturationBoost, opacityRange) {\n    // Convert to HSL for better color manipulation\n    const [h, s, l] = this.rgbToHsl(r, g, b);\n\n    // Boost saturation and adjust lightness\n    const boostedS = Math.min(1, s + saturationBoost);\n    const adjustedL = Math.max(0.3, Math.min(0.7, l));\n\n    // Convert back to RGB\n    const [newR, newG, newB] = this.hslToRgb(h, boostedS, adjustedL);\n\n    return {\n      primary: `rgba(${newR}, ${newG}, ${newB}, ${opacityRange[1]})`,\n      secondary: `rgba(${newR}, ${newG}, ${newB}, ${opacityRange[0]})`,\n      accent: `rgba(${newR}, ${newG}, ${newB}, ${opacityRange[1] * 1.5})`,\n    };\n  },\n\n  rgbToHsl(r, g, b) {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    let h,\n      s,\n      l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0;\n    } else {\n      const d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n\n    return [h, s, l];\n  },\n\n  hslToRgb(h, s, l) {\n    let r, g, b;\n\n    if (s === 0) {\n      r = g = b = l;\n    } else {\n      const hue2rgb = (p, q, t) => {\n        if (t < 0) t += 1;\n        if (t > 1) t -= 1;\n        if (t < 1 / 6) return p + (q - p) * 6 * t;\n        if (t < 1 / 2) return q;\n        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n        return p;\n      };\n\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      const p = 2 * l - q;\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n  },\n\n  applyTintColors({ primary, secondary, accent }) {\n    // Initialize Enhanced Liquid Glass System\n    // NOTE: The following useEffect block is typically used within a React component.\n    // Placing it directly here will cause a syntax error as 'useEffect' is not defined\n    // in this plain JavaScript object context.\n    // If this code is intended for a React component, it should be moved there.\n    // For now, the original functionality of applyTintColors is preserved.\n    // useEffect(() => {\n    //   // Subscribe to route changes\n    //   import(\"./VoiceAgentHelpers\").then(({ subscribeToRouteChanges }) => {\n    //       const unsubscribe = subscribeToRouteChanges((pathname) => {\n    //           setCurrentRoute(pathname);\n    //       });\n    //       return unsubscribe;\n    //   });\n\n    //   const root = document.documentElement;\n    //   if (flatMode) root.classList.add(\"flat-mode\");\n    //   if (motionReduce) root.style.setProperty(\"--motion-reduce\", \"1\");\n    // }, []); // Dependencies would go here\n\n    const root = document.documentElement;\n    root.style.setProperty(\"--tint-primary\", primary);\n    root.style.setProperty(\"--tint-secondary\", secondary);\n    root.style.setProperty(\"--tint-accent\", accent);\n  },\n\n  setFallbackTint(fallbackTint) {\n    const root = document.documentElement;\n    root.style.setProperty(\"--tint-primary\", fallbackTint);\n    root.style.setProperty(\n      \"--tint-secondary\",\n      fallbackTint.replace(/[\\d.]+KATEX_INLINE_CLOSE$/, \"0.05)\")\n    );\n    root.style.setProperty(\n      \"--tint-accent\",\n      fallbackTint.replace(/[\\d.]+KATEX_INLINE_CLOSE$/, \"0.15)\")\n    );\n  },\n};\n\n// Performance Detection and Flat Mode Manager\nconst PerformanceManager = {\n  init() {\n    if (this.shouldUseFlatMode()) {\n      document.documentElement.classList.add(\"flat-mode\");\n    }\n  },\n\n  shouldUseFlatMode() {\n    // Check for explicit flat mode preference\n    if (localStorage.getItem(\"prefer-flat-mode\") === \"true\") {\n      return true;\n    }\n\n    // Performance heuristics\n    const memoryLimit = 4; // GB\n    const cpuCoreLimit = 4;\n\n    try {\n      // Memory check\n      if (navigator.deviceMemory && navigator.deviceMemory < memoryLimit) {\n        return true;\n      }\n\n      // CPU check\n      if (\n        navigator.hardwareConcurrency &&\n        navigator.hardwareConcurrency < cpuCoreLimit\n      ) {\n        return true;\n      }\n\n      // Reduced motion preference\n      if (window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches) {\n        return true;\n      }\n\n      return false;\n    } catch (error) {\n      console.warn(\"Performance detection failed:\", error);\n      return false; // Default to full experience\n    }\n  },\n\n  toggleFlatMode() {\n    const isFlat = document.documentElement.classList.toggle(\"flat-mode\");\n    localStorage.setItem(\"prefer-flat-mode\", isFlat.toString());\n    return isFlat;\n  },\n};\n\n// ============= ENHANCED LIQUID GLASS KEYFRAMES =============\nconst gentleFloat = keyframes`\n  0%, 100% { \n    transform: translateY(0px) scale(1);\n  }\n  50% {\n    transform: translateY(-8px) scale(1.02);\n  }\n`;\n\nconst liquidShimmer = keyframes`\n  0%, 100% { \n    background-position: 0% 50%;\n    opacity: 0.6;\n  }\n  50% {\n    background-position: 100% 50%;\n    opacity: 1;\n  }\n`;\n\nconst glassRipple = keyframes`\n  0% {\n    transform: scale(0.8);\n    opacity: 0.8;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.4;\n  }\n  100% {\n    transform: scale(1.3);\n    opacity: 0;\n  }\n`;\n\nconst subtleGlow = keyframes`\n  0%, 100% {\n    box-shadow: \n      0 0 30px var(--tint-primary),\n      0 0 60px var(--tint-primary),\n      var(--shadow-3d-medium);\n  }\n  50% {\n    box-shadow: \n      0 0 50px var(--tint-accent),\n      0 0 80px var(--tint-accent),\n      var(--shadow-3d-strong);\n  }\n`;\n\nconst liquidWave = keyframes`\n  0%, 100% { \n    height: 4px;\n    opacity: 0.6;\n    transform: rotateX(0deg);\n  }\n  50% { \n    height: 28px;\n    opacity: 1;\n    transform: rotateX(2deg);\n  }\n`;\n\nconst enhanced3DFloat = keyframes`\n  0%, 100% {\n    transform: perspective(var(--perspective-medium)) rotateX(0deg) rotateY(0deg) translateZ(0px);\n  }\n  25% {\n    transform: perspective(var(--perspective-medium)) rotateX(1deg) rotateY(-1deg) translateZ(2px);\n  }\n  50% {\n    transform: perspective(var(--perspective-medium)) rotateX(0deg) rotateY(1deg) translateZ(4px);\n  }\n  75% {\n    transform: perspective(var(--perspective-medium)) rotateX(-1deg) rotateY(0deg) translateZ(2px);\n  }\n`;\n\nconst listeningGlow = keyframes`\n  0%, 100% {\n    transform: scale(1);\n    opacity: 0.6;\n  }\n  50% {\n    transform: scale(1.2);\n    opacity: 0.9;\n  }\n`;\nconst thinkingGlow = keyframes`\n  0%, 100% {\n    transform: scale(1);\n    opacity: 0.7;\n  }\n  50% {\n    transform: scale(1.3);\n    opacity: 1;\n  }\n`;\n\nconst speakingGlow = keyframes`\n  0%, 100% {\n    transform: scale(1);\n    opacity: 0.6;\n  }\n  25% {\n    transform: scale(1.1);\n    opacity: 0.9;\n  }\n  75% {\n    transform: scale(1.2);\n    opacity: 0.8;\n  }\n`;\n\nconst idleGlow = keyframes`\n  0%, 100% {\n    transform: scale(1);\n    opacity: 0.4;\n  }\n  50% {\n    transform: scale(1.15);\n    opacity: 0.7;\n  }\n`;\n\n// NEW: Enhanced Button Animations\nconst buttonPulse = keyframes`\n  0%, 100% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(1.05);\n  }\n`;\n\nconst buttonGlow = keyframes`\n  0%, 100% {\n    box-shadow: \n      0 0 5px currentColor,\n      0 0 15px currentColor,\n      var(--shadow-3d-light);\n  }\n  50% {\n    box-shadow: \n      0 0 10px currentColor,\n      0 0 25px currentColor,\n      0 0 35px currentColor,\n      var(--shadow-3d-medium);\n  }\n`;\n\nconst iconRotate = keyframes`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`;\n\nconst iconBounce = keyframes`\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-3px);\n  }\n`;\n\n// ============= ENHANCED LIQUID GLASS STYLED COMPONENTS =============\n\nconst VoiceContainer = styled.div`\n  position: fixed;\n  bottom: ${(props) =>\n    props.isMobile ? (props.isKeyboardOpen ? \"10px\" : \"20px\") : \"60px\"};\n  left: ${(props) => (props.isMobile ? \"15px\" : \"30px\")};\n  width: ${(props) => (props.isMobile ? \"calc(100vw - 30px)\" : \"320px\")};\n  max-width: ${(props) => (props.isMobile ? \"340px\" : \"360px\")};\n\n  /* === ENHANCED 3D GLASS PANEL === */\n  background: linear-gradient(\n    145deg,\n    var(--glass-surface) 0%,\n    rgba(255, 255, 255, 0.05) 50%,\n    var(--glass-surface) 100%\n  );\n\n  backdrop-filter: ${(props) =>\n    props.flatMode\n      ? \"none\"\n      : \"blur(var(--glass-blur-primary)) saturate(var(--glass-saturation)) brightness(var(--glass-brightness))\"};\n\n  border-radius: var(--radius-xl);\n  padding: ${(props) => (props.isMobile ? \"20px 16px\" : \"28px 24px\")};\n\n  /* Enhanced 3D Perspective */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n  perspective: var(--perspective-medium);\n\n  /* Tahoe 26 Rim Highlight */\n  border: var(--rim-width) solid var(--rim-highlight);\n\n  /* Enhanced 3D Layered Shadows */\n  box-shadow: var(--shadow-3d-strong), inset 0 1px 0 rgba(255, 255, 255, 0.2),\n    inset 0 -1px 0 rgba(0, 0, 0, 0.1), 0 0 0 1px var(--tint-primary);\n\n  /* Enhanced 3D Animation */\n  animation: ${(props) =>\n    props.motionReduce\n      ? \"none\"\n      : css`\n          ${props.isClosing ? \"none\" : enhanced3DFloat} 12s ease-in-out infinite\n        `};\n\n  transition: var(--transition-3d);\n  z-index: 1000;\n\n  /* Mobile Specific Optimizations */\n  ${(props) =>\n    props.isMobile &&\n    css`\n      max-height: 60vh;\n      overflow: hidden;\n\n      @media (max-height: 600px) {\n        bottom: 10px;\n        max-height: 50vh;\n      }\n\n      @media (orientation: landscape) and (max-height: 500px) {\n        bottom: 5px;\n        max-height: 45vh;\n        padding: 16px 12px;\n      }\n    `}\n\n  /* Desktop 3D Hover Effects */\n  ${(props) =>\n    !props.isMobile &&\n    css`\n      &:hover {\n        transform: perspective(var(--perspective-medium)) rotateX(1deg)\n          rotateY(-1deg) translateZ(8px);\n        box-shadow: var(--shadow-3d-strong), 0 0 60px var(--tint-accent),\n          inset 0 2px 4px rgba(255, 255, 255, 0.3);\n      }\n    `}\n  \n  /* Accessibility */\n  @media (prefers-contrast: high) {\n    background: rgba(0, 0, 0, 0.9);\n    border-color: rgba(255, 255, 255, 0.8);\n  }\n\n  /* Enhanced Tint Integration with 3D depth */\n  &::before {\n    content: \"\";\n    position: absolute;\n    inset: 0;\n    background: radial-gradient(\n      circle at 30% 20%,\n      var(--tint-accent) 0%,\n      transparent 50%\n    );\n    border-radius: inherit;\n    pointer-events: none;\n    opacity: 0.3;\n    transform: translateZ(-1px);\n  }\n`;\n\nconst VoiceAvatar = styled.div`\n  width: ${(props) => (props.isMobile ? \"70px\" : \"90px\")};\n  height: ${(props) => (props.isMobile ? \"70px\" : \"90px\")};\n  border-radius: var(--radius-full);\n\n  /* Enhanced 3D Background */\n  background: ${(props) => {\n    if (props.disabled)\n      return \"linear-gradient(145deg, rgba(107, 114, 128, 0.4), rgba(75, 85, 99, 1.0))\";\n    if (props.state === \"listening\")\n      return \"linear-gradient(145deg, rgba(34, 197, 94, 0.8), rgba(16, 185, 129, 1.0))\";\n    if (props.state === \"speaking\")\n      return \"linear-gradient(145deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 1.0))\";\n    if (props.state === \"thinking\")\n      return \"linear-gradient(145deg, rgba(245, 158, 11, 0.8), rgba(217, 119, 6, 1.0))\";\n    return \"linear-gradient(145deg, var(--tint-accent), var(--tint-primary))\";\n  }};\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: ${(props) => (props.isMobile ? \"28px\" : \"36px\")};\n  cursor: ${(props) => (props.disabled ? \"not-allowed\" : \"pointer\")};\n  margin: 0 auto ${(props) => (props.isMobile ? \"16px\" : \"24px\")};\n\n  /* Enhanced 3D Properties */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n  perspective: var(--perspective-light);\n\n  /* Tahoe 26 Rim */\n  border: var(--rim-width) solid var(--rim-highlight);\n\n  /* Enhanced 3D Shadows */\n  box-shadow: var(--shadow-3d-medium), inset 0 2px 4px rgba(255, 255, 255, 0.2),\n    0 0 0 1px var(--tint-secondary);\n\n  transition: var(--transition-3d);\n  position: relative;\n  overflow: visible;\n\n  /* Enhanced Multi-State Glow Effects - Layer 1 (Inner) */\n  &::before {\n    content: \"\";\n    position: absolute;\n    inset: -25px;\n    background: ${(props) => {\n      if (props.state === \"listening\")\n        return \"radial-gradient(circle, rgba(34, 197, 94, 0.8) 0%, rgba(34, 197, 94, 0.4) 40%, transparent 70%)\";\n      if (props.state === \"thinking\")\n        return \"radial-gradient(circle, rgba(245, 158, 11, 0.8) 0%, rgba(245, 158, 11, 0.4) 40%, transparent 70%)\";\n      if (props.state === \"speaking\")\n        return \"radial-gradient(circle, rgba(239, 68, 68, 0.8) 0%, rgba(239, 68, 68, 0.4) 40%, transparent 70%)\";\n      if (props.disabled)\n        return \"radial-gradient(circle, rgba(107, 114, 128, 0.6) 0%, rgba(107, 114, 128, 0.3) 40%, transparent 70%)\";\n      return \"radial-gradient(circle, rgba(59, 130, 246, 0.7) 0%, rgba(59, 130, 246, 0.3) 40%, transparent 70%)\";\n    }};\n    border-radius: var(--radius-full);\n    pointer-events: none;\n    z-index: -1;\n    transform: scale(\n      ${(props) => {\n        if (props.state === \"listening\")\n          return 1 + (props.voiceIntensity || 0) * 0.6;\n        if (props.state === \"thinking\") return 1.1;\n        if (props.state === \"speaking\") return 1.2;\n        return 1;\n      }}\n    );\n    opacity: ${(props) => {\n      if (props.state === \"listening\")\n        return 0.8 + (props.voiceIntensity || 0) * 0.4;\n      if (props.state === \"thinking\") return 0.7;\n      if (props.state === \"speaking\") return 0.6;\n      if (props.disabled) return 0.3;\n      return 0.5;\n    }};\n    transition: all 0.3s ease;\n    animation: ${(props) => {\n      if (props.motionReduce) return \"none\";\n      if (props.state === \"listening\")\n        return css`\n          ${listeningGlow} 2s ease-in-out infinite\n        `;\n      if (props.state === \"thinking\")\n        return css`\n          ${thinkingGlow} 1.5s ease-in-out infinite\n        `;\n      if (props.state === \"speaking\")\n        return css`\n          ${speakingGlow} 0.8s ease-in-out infinite\n        `;\n      if (!props.disabled)\n        return css`\n          ${idleGlow} 4s ease-in-out infinite\n        `;\n      return \"none\";\n    }};\n  }\n\n  /* Enhanced Multi-State Glow Effects - Layer 2 (Middle) */\n  &::after {\n    content: \"\";\n    position: absolute;\n    inset: -45px;\n    background: ${(props) => {\n      if (props.state === \"listening\")\n        return \"radial-gradient(circle, rgba(34, 197, 94, 0.5) 0%, rgba(34, 197, 94, 0.2) 30%, transparent 60%)\";\n      if (props.state === \"thinking\")\n        return \"radial-gradient(circle, rgba(245, 158, 11, 0.5) 0%, rgba(245, 158, 11, 0.2) 30%, transparent 60%)\";\n      if (props.state === \"speaking\")\n        return \"radial-gradient(circle, rgba(239, 68, 68, 0.5) 0%, rgba(239, 68, 68, 0.2) 30%, transparent 60%)\";\n      if (props.disabled)\n        return \"radial-gradient(circle, rgba(107, 114, 128, 0.4) 0%, rgba(107, 114, 128, 0.1) 30%, transparent 60%)\";\n      return \"radial-gradient(circle, rgba(59, 130, 246, 0.4) 0%, rgba(59, 130, 246, 0.1) 30%, transparent 60%)\";\n    }};\n    border-radius: var(--radius-full);\n    pointer-events: none;\n    z-index: -2;\n    transform: scale(\n      ${(props) => {\n        if (props.state === \"listening\")\n          return 1 + (props.voiceIntensity || 0) * 0.4;\n        if (props.state === \"thinking\") return 1.2;\n        if (props.state === \"speaking\") return 1.3;\n        return 1;\n      }}\n    );\n    opacity: ${(props) => {\n      if (props.state === \"listening\")\n        return 0.6 + (props.voiceIntensity || 0) * 0.3;\n      if (props.state === \"thinking\") return 0.5;\n      if (props.state === \"speaking\") return 0.4;\n      if (props.disabled) return 0.2;\n      return 0.3;\n    }};\n    transition: all 0.4s ease;\n    animation: ${(props) => {\n      if (props.motionReduce) return \"none\";\n      if (props.state === \"listening\")\n        return css`\n          ${listeningGlow} 3s ease-in-out infinite reverse\n        `;\n      if (props.state === \"thinking\")\n        return css`\n          ${thinkingGlow} 2s ease-in-out infinite reverse\n        `;\n      if (props.state === \"speaking\")\n        return css`\n          ${speakingGlow} 1.2s ease-in-out infinite reverse\n        `;\n      if (!props.disabled)\n        return css`\n          ${idleGlow} 5s ease-in-out infinite reverse\n        `;\n      return \"none\";\n    }};\n  }\n\n  /* Enhanced 3D Hover Effects */\n  &:hover:not(:disabled) {\n    transform: perspective(var(--perspective-light)) rotateX(-3deg)\n      rotateY(3deg) translateZ(6px) scale(1.05);\n    box-shadow: var(--shadow-3d-strong),\n      inset 0 3px 6px rgba(255, 255, 255, 0.3), 0 0 0 2px var(--tint-accent),\n      0 0 50px var(--tint-primary), 0 0 80px var(--tint-primary);\n  }\n\n  &:active:not(:disabled) {\n    transform: perspective(var(--perspective-light)) rotateX(-1deg)\n      rotateY(1deg) translateZ(2px) scale(1.02);\n  }\n`;\n\nconst VoiceWaves = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: ${(props) => (props.isMobile ? \"3px\" : \"5px\")};\n  height: ${(props) => (props.isMobile ? \"30px\" : \"40px\")};\n  margin: ${(props) => (props.isMobile ? \"12px 0\" : \"20px 0\")};\n  opacity: ${(props) =>\n    props.state === \"listening\" || props.state === \"speaking\" ? 1 : 0};\n  transition: var(--transition-smooth);\n\n  /* Enhanced 3D Perspective */\n  perspective: var(--perspective-light);\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n\n  .wave-bar {\n    width: ${(props) => (props.isMobile ? \"3px\" : \"4px\")};\n    background: ${(props) => {\n      if (props.state === \"listening\")\n        return \"linear-gradient(to top, #22C55E, #10B981)\";\n      if (props.state === \"speaking\")\n        return \"linear-gradient(to top, #EF4444, #F87171)\";\n      return \"linear-gradient(to top, var(--tint-accent), var(--tint-primary))\";\n    }};\n    border-radius: var(--radius-sm);\n\n    /* Enhanced 3D Shadow for Depth */\n    box-shadow: var(--shadow-3d-light), inset 0 1px 0 rgba(255, 255, 255, 0.3);\n\n    /* Enhanced 3D Animation */\n    animation: ${(props) =>\n      props.motionReduce\n        ? \"none\"\n        : css`\n            ${liquidWave} 1.5s ease-in-out infinite\n          `};\n\n    transform-origin: bottom center;\n    transform-style: preserve-3d;\n\n    &:nth-child(1) {\n      animation-delay: 0s;\n    }\n    &:nth-child(2) {\n      animation-delay: 0.1s;\n    }\n    &:nth-child(3) {\n      animation-delay: 0.2s;\n    }\n    &:nth-child(4) {\n      animation-delay: 0.3s;\n    }\n    &:nth-child(5) {\n      animation-delay: 0.4s;\n    }\n    &:nth-child(6) {\n      animation-delay: 0.3s;\n    }\n    &:nth-child(7) {\n      animation-delay: 0.2s;\n    }\n    &:nth-child(8) {\n      animation-delay: 0.1s;\n    }\n  }\n`;\n\n// ENHANCED DYNAMIC VOICE BUTTON\nconst VoiceButton = styled.button`\n  width: ${(props) => (props.isMobile ? \"52px\" : \"56px\")};\n  height: ${(props) => (props.isMobile ? \"52px\" : \"56px\")};\n  border-radius: var(--radius-full);\n  border: none;\n  position: relative;\n  overflow: hidden;\n\n  /* Dynamic gradient backgrounds based on button type */\n  background: ${(props) => {\n    if (props.disabled) return \"linear-gradient(145deg, #6B7280, #4B5563)\";\n\n    switch (props.buttonType) {\n      case \"mic\":\n        return props.active\n          ? \"linear-gradient(145deg, #DC2626, #B91C1C)\"\n          : \"var(--btn-mic-gradient)\";\n      case \"auto\":\n        return props.active\n          ? \"linear-gradient(145deg, #1E40AF, #1E3A8A)\"\n          : \"var(--btn-auto-gradient)\";\n      case \"test\":\n        return props.active\n          ? \"linear-gradient(145deg, #6D28D9, #5B21B6)\"\n          : \"var(--btn-test-gradient)\";\n      case \"3d\":\n        return props.active\n          ? \"linear-gradient(145deg, #059669, #047857)\"\n          : \"var(--btn-3d-gradient)\";\n      default:\n        return \"linear-gradient(145deg, var(--glass-surface), rgba(255, 255, 255, 0.1))\";\n    }\n  }};\n\n  color: white;\n  font-size: ${(props) => (props.isMobile ? \"18px\" : \"20px\")};\n  font-weight: 700;\n  cursor: ${(props) => (props.disabled ? \"not-allowed\" : \"pointer\")};\n\n  /* Enhanced 3D Properties */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n  perspective: var(--perspective-light);\n\n  /* Dynamic shadow color based on button type */\n  box-shadow: ${(props) => {\n    const glowColor =\n      props.buttonType === \"mic\"\n        ? \"var(--btn-mic-glow)\"\n        : props.buttonType === \"auto\"\n        ? \"var(--btn-auto-glow)\"\n        : props.buttonType === \"test\"\n        ? \"var(--btn-test-glow)\"\n        : props.buttonType === \"3d\"\n        ? \"var(--btn-3d-glow)\"\n        : \"rgba(255, 255, 255, 0.2)\";\n\n    return `\n      0 4px 12px rgba(0, 0, 0, 0.15),\n      0 0 0 1px rgba(255, 255, 255, 0.1),\n      inset 0 1px 2px rgba(255, 255, 255, 0.2),\n      ${props.active ? `0 0 20px ${glowColor}` : \"\"}\n    `;\n  }};\n\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n\n  /* Animated inner content */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  /* Active state pulsing animation */\n  ${(props) =>\n    props.active &&\n    !props.motionReduce &&\n    css`\n      animation: ${buttonPulse} 2s ease-in-out infinite,\n        ${buttonGlow} 3s ease-in-out infinite;\n    `}\n\n  /* Icon container with animation */\n  .icon-wrapper {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    transition: transform 0.3s ease;\n\n    ${(props) =>\n      props.active &&\n      !props.motionReduce &&\n      css`\n        animation: ${props.buttonType === \"auto\" ? iconRotate : iconBounce}\n          ${props.buttonType === \"auto\" ? \"4s\" : \"2s\"} ease-in-out infinite;\n      `}\n  }\n\n  /* Dynamic SVG icon based on button type */\n  .icon-svg {\n    width: ${(props) => (props.isMobile ? \"22px\" : \"24px\")};\n    height: ${(props) => (props.isMobile ? \"22px\" : \"24px\")};\n    fill: currentColor;\n    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));\n  }\n\n  /* Gradient overlay for depth */\n  &::before {\n    content: \"\";\n    position: absolute;\n    inset: 0;\n    background: linear-gradient(\n      180deg,\n      rgba(255, 255, 255, 0.25) 0%,\n      rgba(255, 255, 255, 0) 50%,\n      rgba(0, 0, 0, 0.1) 100%\n    );\n    border-radius: inherit;\n    pointer-events: none;\n    opacity: 0.6;\n    transition: opacity 0.3s ease;\n  }\n\n  /* Shimmer effect on hover */\n  &::after {\n    content: \"\";\n    position: absolute;\n    inset: -50%;\n    background: linear-gradient(\n      90deg,\n      transparent 0%,\n      rgba(255, 255, 255, 0.3) 50%,\n      transparent 100%\n    );\n    transform: translateX(-100%) rotate(45deg);\n    transition: transform 0.6s ease;\n  }\n\n  /* Enhanced hover effects */\n  &:hover:not(:disabled) {\n    transform: perspective(var(--perspective-light)) rotateX(-5deg)\n      rotateY(5deg) translateZ(4px) scale(1.08);\n\n    box-shadow: ${(props) => {\n      const glowColor =\n        props.buttonType === \"mic\"\n          ? \"var(--btn-mic-glow)\"\n          : props.buttonType === \"auto\"\n          ? \"var(--btn-auto-glow)\"\n          : props.buttonType === \"test\"\n          ? \"var(--btn-test-glow)\"\n          : props.buttonType === \"3d\"\n          ? \"var(--btn-3d-glow)\"\n          : \"rgba(255, 255, 255, 0.3)\";\n\n      return `\n        0 8px 24px rgba(0, 0, 0, 0.2),\n        0 0 0 2px rgba(255, 255, 255, 0.2),\n        inset 0 2px 4px rgba(255, 255, 255, 0.3),\n        0 0 40px ${glowColor}\n      `;\n    }};\n\n    .icon-wrapper {\n      transform: scale(1.1);\n    }\n\n    &::before {\n      opacity: 0.8;\n    }\n\n    &::after {\n      transform: translateX(100%) rotate(45deg);\n    }\n  }\n\n  /* Active press effect */\n  &:active:not(:disabled) {\n    transform: perspective(var(--perspective-light)) rotateX(-2deg)\n      rotateY(2deg) translateZ(1px) scale(1.02);\n  }\n\n  /* Disabled state */\n  &:disabled {\n    opacity: 0.5;\n    filter: grayscale(0.8);\n\n    &::before,\n    &::after {\n      display: none;\n    }\n  }\n`;\n\n// Custom SVG Icons Component\nconst ButtonIcon = ({ type, ...props }) => {\n  const icons = {\n    mic: (\n      <svg viewBox=\"0 0 24 24\" className=\"icon-svg\" {...props}>\n        <path d=\"M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z\" />\n        <path d=\"M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z\" />\n      </svg>\n    ),\n    stop: (\n      <svg viewBox=\"0 0 24 24\" className=\"icon-svg\" {...props}>\n        <rect x=\"6\" y=\"6\" width=\"12\" height=\"12\" rx=\"2\" />\n      </svg>\n    ),\n    auto: (\n      <svg viewBox=\"0 0 24 24\" className=\"icon-svg\" {...props}>\n        <path d=\"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z\" />\n      </svg>\n    ),\n    test: (\n      <svg viewBox=\"0 0 24 24\" className=\"icon-svg\" {...props}>\n        <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\" />\n      </svg>\n    ),\n    \"3d\": (\n      <svg viewBox=\"0 0 24 24\" className=\"icon-svg\" {...props}>\n        <path d=\"M7 19h10V4H7v15zm2-8h6v1.5H9V11z\" />\n        <path d=\"M21 7h-2V3c0-1.1-.9-2-2-2H7c-1.1 0-2 .9-2 2v4H3c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h2v4c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-4h2c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2z\" />\n      </svg>\n    ),\n    flat: (\n      <svg viewBox=\"0 0 24 24\" className=\"icon-svg\" {...props}>\n        <path d=\"M3 5v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2zm2 0h14v14H5V5z\" />\n      </svg>\n    ),\n  };\n\n  return icons[type] || icons.mic;\n};\n\nconst InterimText = styled.div`\n  background: linear-gradient(\n    135deg,\n    rgba(34, 197, 94, 0.1) 0%,\n    rgba(16, 185, 129, 0.05) 100%\n  );\n\n  backdrop-filter: ${(props) =>\n    props.flatMode\n      ? \"none\"\n      : \"blur(var(--glass-blur-secondary)) saturate(var(--glass-saturation))\"};\n\n  color: #22c55e;\n  padding: ${(props) => (props.isMobile ? \"12px 16px\" : \"16px 20px\")};\n  border-radius: var(--radius-lg);\n  font-size: ${(props) => (props.isMobile ? \"12px\" : \"13px\")};\n  text-align: center;\n  margin: ${(props) => (props.isMobile ? \"12px 0\" : \"16px 0\")};\n\n  /* Enhanced 3D Properties */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n\n  /* Tahoe 26 Rim */\n  border: var(--rim-width) solid rgba(34, 197, 94, var(--rim-opacity));\n\n  /* Enhanced 3D Shadows */\n  box-shadow: var(--shadow-3d-light), inset 0 1px 0 rgba(255, 255, 255, 0.1),\n    0 0 0 1px rgba(34, 197, 94, 0.2);\n\n  opacity: ${(props) => (props.show ? 1 : 0)};\n  transform: ${(props) =>\n    props.show\n      ? \"translateY(0) translateZ(0)\"\n      : \"translateY(20px) translateZ(-2px)\"};\n  transition: var(--transition-3d);\n\n  font-style: italic;\n  font-weight: 500;\n  line-height: 1.4;\n\n  /* Enhanced Contrast for Accessibility */\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\n\n  @media (prefers-contrast: high) {\n    background: rgba(34, 197, 94, 0.2);\n    color: #fff;\n    border-color: #22c55e;\n  }\n`;\n\nconst NoticeCard = styled.div`\n  position: fixed;\n  top: ${(props) => (props.isMobile ? \"15px\" : \"30px\")};\n  right: ${(props) => (props.isMobile ? \"15px\" : \"30px\")};\n  left: ${(props) => (props.isMobile ? \"15px\" : \"auto\")};\n  max-width: ${(props) => (props.isMobile ? \"none\" : \"350px\")};\n\n  background: ${(props) => {\n    const baseOpacity = props.flatMode ? 0.95 : 0.15;\n    if (props.type === \"error\") return `rgba(239, 68, 68, ${baseOpacity})`;\n    if (props.type === \"warning\") return `rgba(245, 158, 11, ${baseOpacity})`;\n    if (props.type === \"success\") return `rgba(34, 197, 94, ${baseOpacity})`;\n    return `rgba(59, 130, 246, ${baseOpacity})`;\n  }};\n\n  backdrop-filter: ${(props) =>\n    props.flatMode\n      ? \"none\"\n      : \"blur(var(--glass-blur-secondary)) saturate(var(--glass-saturation))\"};\n\n  color: ${(props) =>\n    props.theme?.text || \"#ffffff\"}; /* Theme-aware text color */\n  padding: ${(props) => (props.isMobile ? \"16px 20px\" : \"20px 24px\")};\n  border-radius: var(--radius-lg);\n\n  /* Enhanced 3D Properties */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n\n  /* Tahoe 26 Rim */\n  border: var(--rim-width) solid var(--rim-highlight);\n\n  /* Enhanced 3D Layered Shadows */\n  box-shadow: var(--shadow-3d-strong), inset 0 1px 0 rgba(255, 255, 255, 0.2),\n    0 0 0 1px\n      ${(props) => {\n        if (props.type === \"error\") return \"rgba(239, 68, 68, 0.3)\";\n        if (props.type === \"warning\") return \"rgba(245, 158, 11, 0.3)\";\n        if (props.type === \"success\") return \"rgba(34, 197, 94, 0.3)\";\n        return \"rgba(59, 130, 246, 0.3)\";\n      }};\n\n  z-index: 1001;\n  transition: var(--transition-3d);\n\n  .notice-title {\n    font-weight: 700;\n    margin-bottom: 6px;\n    font-size: ${(props) => (props.isMobile ? \"14px\" : \"15px\")};\n    text-shadow: ${(props) =>\n      props.theme?.name === \"light\"\n        ? \"0 0 8px rgba(255, 255, 255, 0.8), 0 2px 4px rgba(255, 255, 255, 0.5)\"\n        : \"0 0 8px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.3)\"};\n    color: ${(props) => props.theme?.text || \"#ffffff\"};\n  }\n\n  .notice-content {\n    font-weight: 400;\n    font-size: ${(props) => (props.isMobile ? \"12px\" : \"13px\")};\n    opacity: 0.95;\n    line-height: 1.5;\n    text-shadow: ${(props) =>\n      props.theme?.name === \"light\"\n        ? \"0 0 6px rgba(255, 255, 255, 0.7), 0 1px 2px rgba(255, 255, 255, 0.4)\"\n        : \"0 0 6px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.3)\"};\n    color: ${(props) => {\n      return props.theme?.name === \"light\"\n        ? \"rgba(55, 65, 81, 0.9)\"\n        : \"rgba(255, 255, 255, 0.8)\";\n    }};\n  }\n\n  /* Enhanced Contrast for Accessibility */\n  @media (prefers-contrast: high) {\n    background: ${(props) => {\n      if (props.type === \"error\") return \"rgba(239, 68, 68, 0.95)\";\n      if (props.type === \"warning\") return \"rgba(245, 158, 11, 0.95)\";\n      if (props.type === \"success\") return \"rgba(34, 197, 94, 0.95)\";\n      return \"rgba(59, 130, 246, 0.95)\";\n    }};\n    border-width: 2px;\n    color: white;\n\n    .notice-title,\n    .notice-content {\n      color: white;\n    }\n  }\n`;\n\nconst VoiceStatus = styled.div`\n  text-align: center;\n  margin-bottom: ${(props) => (props.isMobile ? \"16px\" : \"24px\")};\n\n  /* Enhanced 3D Properties */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n\n  .status-title {\n    font-size: ${(props) => (props.isMobile ? \"16px\" : \"18px\")};\n    font-weight: 700;\n    margin-bottom: 6px;\n    letter-spacing: 0.5px;\n\n    /* Theme-aware text color */\n    color: ${(props) => props.theme?.text || \"#ffffff\"};\n    font-weight: 800;\n    text-shadow: ${(props) =>\n      props.theme?.name === \"light\"\n        ? \"0 0 8px rgba(255, 255, 255, 0.8), 0 2px 4px rgba(255, 255, 255, 0.5)\"\n        : \"0 0 8px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.3)\"};\n    transform: translateZ(1px);\n  }\n\n  .status-subtitle {\n    font-size: ${(props) => (props.isMobile ? \"11px\" : \"12px\")};\n    font-weight: 400;\n    line-height: 1.4;\n\n    /* Theme-aware text color with opacity */\n    color: ${(props) => {\n      const baseColor = props.theme?.text || \"#ffffff\";\n      return props.theme?.name === \"light\"\n        ? \"rgba(55, 65, 81, 0.9)\"\n        : \"rgba(255, 255, 255, 0.8)\";\n    }};\n    font-weight: 600;\n    text-shadow: ${(props) =>\n      props.theme?.name === \"light\"\n        ? \"0 0 6px rgba(255, 255, 255, 0.7), 0 1px 2px rgba(255, 255, 255, 0.4)\"\n        : \"0 0 6px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.3)\"};\n    transform: translateZ(0.5px);\n  }\n`;\n\nconst VoiceControls = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: ${(props) => (props.isMobile ? \"14px\" : \"18px\")};\n  margin-top: ${(props) => (props.isMobile ? \"18px\" : \"24px\")};\n\n  /* Enhanced 3D Container */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n`;\n\nconst ButtonRow = styled.div`\n  display: flex;\n  gap: ${(props) => (props.isMobile ? \"14px\" : \"18px\")};\n  justify-content: center;\n\n  /* Enhanced 3D Row */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n`;\n\nconst ButtonLabel = styled.div`\n  font-size: ${(props) => (props.isMobile ? \"11px\" : \"12px\")};\n  color: ${(props) => props.theme?.text || \"#ffffff\"}; /* Theme-aware color */\n  text-align: center;\n  margin-top: ${(props) => (props.isMobile ? \"6px\" : \"8px\")};\n  font-weight: 700;\n  letter-spacing: 0.5px;\n  line-height: 1.3;\n  text-shadow: ${(props) =>\n    props.theme?.name === \"light\"\n      ? \"0 0 6px rgba(255, 255, 255, 0.7), 0 1px 2px rgba(255, 255, 255, 0.4)\"\n      : \"0 0 6px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.3)\"};\n  transition: all 0.3s ease;\n\n  /* Semi-transparent background pill with theme awareness */\n  background: linear-gradient(\n    145deg,\n    ${(props) =>\n      props.theme?.name === \"light\"\n        ? \"rgba(255, 255, 255, 0.3)\"\n        : \"rgba(255, 255, 255, 0.1)\"},\n    ${(props) =>\n      props.theme?.name === \"light\"\n        ? \"rgba(255, 255, 255, 0.15)\"\n        : \"rgba(255, 255, 255, 0.05)\"}\n  );\n  padding: ${(props) => (props.isMobile ? \"3px 8px\" : \"4px 10px\")};\n  border-radius: 12px;\n  backdrop-filter: blur(8px);\n  border: 1px solid\n    ${(props) =>\n      props.theme?.name === \"light\"\n        ? \"rgba(255, 255, 255, 0.3)\"\n        : \"rgba(255, 255, 255, 0.1)\"};\n\n  /* Subtle glow on parent hover */\n  ${VoiceButton}:hover & {\n    background: linear-gradient(\n      145deg,\n      ${(props) =>\n        props.theme?.name === \"light\"\n          ? \"rgba(255, 255, 255, 0.5)\"\n          : \"rgba(255, 255, 255, 0.2)\"},\n      ${(props) =>\n        props.theme?.name === \"light\"\n          ? \"rgba(255, 255, 255, 0.3)\"\n          : \"rgba(255, 255, 255, 0.1)\"}\n    );\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n    color: ${(props) => props.theme?.text || \"#ffffff\"};\n  }\n\n  ${(props) =>\n    props.disabled &&\n    css`\n      opacity: 0.5;\n      color: ${(props) =>\n        props.theme?.name === \"light\"\n          ? \"rgba(107, 114, 128, 0.8)\"\n          : \"rgba(255, 255, 255, 0.6)\"};\n    `}\n`;\nconst ConnectionIndicator = styled.div`\n  position: absolute;\n  top: ${(props) => (props.isMobile ? \"12px\" : \"16px\")};\n  left: ${(props) => (props.isMobile ? \"12px\" : \"16px\")};\n  width: ${(props) => (props.isMobile ? \"12px\" : \"14px\")};\n  height: ${(props) => (props.isMobile ? \"12px\" : \"14px\")};\n  border-radius: var(--radius-full);\n\n  /* Enhanced 3D Background */\n  background: ${(props) => {\n    if (props.status === \"connected\")\n      return \"radial-gradient(circle, #22C55E, #16A34A)\";\n    if (props.status === \"connecting\")\n      return \"radial-gradient(circle, #F59E0B, #D97706)\";\n    return \"radial-gradient(circle, #EF4444, #DC2626)\";\n  }};\n\n  /* Enhanced 3D Shadow */\n  box-shadow: 0 0 ${(props) => (props.isMobile ? \"14px\" : \"18px\")}\n      ${(props) => {\n        if (props.status === \"connected\") return \"rgba(34, 197, 94, 0.4)\";\n        if (props.status === \"connecting\") return \"rgba(245, 158, 11, 0.4)\";\n        return \"rgba(239, 68, 68, 0.4)\";\n      }},\n    inset 0 1px 2px rgba(255, 255, 255, 0.3), var(--shadow-3d-light);\n\n  /* Rim Highlight */\n  border: var(--rim-width) solid rgba(255, 255, 255, 0.3);\n\n  /* Enhanced 3D Transform */\n  transform: translateZ(2px);\n\n  animation: ${(props) =>\n    props.motionReduce\n      ? \"none\"\n      : css`\n          ${subtleGlow} 2s ease-in-out infinite\n        `};\n`;\n\nconst CloseButton = styled.button`\n  position: absolute;\n  top: ${(props) => (props.isMobile ? \"12px\" : \"16px\")};\n  right: ${(props) => (props.isMobile ? \"12px\" : \"16px\")};\n  width: ${(props) => (props.isMobile ? \"32px\" : \"36px\")};\n  height: ${(props) => (props.isMobile ? \"32px\" : \"36px\")};\n  border-radius: var(--radius-full);\n  border: var(--rim-width) solid var(--rim-highlight);\n\n  /* Enhanced 3D Background */\n  background: linear-gradient(\n    145deg,\n    var(--glass-surface),\n    rgba(255, 255, 255, 0.05)\n  );\n  color: ${(props) =>\n    props.theme?.text || \"#ffffff\"}; /* Theme-aware text color */\n  font-weight: 900;\n  text-shadow: ${(props) =>\n    props.theme?.name === \"light\"\n      ? \"0 0 6px rgba(255, 255, 255, 0.7), 0 1px 2px rgba(255, 255, 255, 0.4)\"\n      : \"0 0 6px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.3)\"};\n  font-size: ${(props) => (props.isMobile ? \"18px\" : \"20px\")};\n  cursor: pointer;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  /* Enhanced 3D Properties */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n\n  /* Enhanced 3D Shadow */\n  box-shadow: var(--shadow-3d-light), inset 0 1px 2px rgba(255, 255, 255, 0.2);\n\n  transition: var(--transition-3d);\n\n  /* Enhanced 3D Transform */\n  transform: translateZ(1px);\n\n  &:hover {\n    background: linear-gradient(\n      145deg,\n      rgba(239, 68, 68, 0.2),\n      rgba(220, 38, 38, 0.1)\n    );\n    color: #dc2626;\n    font-weight: 900;\n    text-shadow: 0 0 6px rgba(255, 255, 255, 0.9), 0 1px 2px rgba(0, 0, 0, 0.4);\n    transform: perspective(var(--perspective-light)) rotateX(-2deg)\n      rotateY(2deg) translateZ(3px) scale(1.05);\n    box-shadow: var(--shadow-3d-medium), 0 0 20px rgba(239, 68, 68, 0.3),\n      inset 0 1px 2px rgba(255, 255, 255, 0.3);\n  }\n\n  &:active {\n    transform: perspective(var(--perspective-light)) rotateX(-1deg)\n      rotateY(1deg) translateZ(1px) scale(1.02);\n  }\n`;\nconst HelpHint = styled.div`\n  position: absolute;\n  bottom: ${(props) => (props.isMobile ? \"-50px\" : \"-60px\")};\n  left: 50%;\n  transform: translateX(-50%);\n\n  /* Theme-aware background */\n  background: ${(props) =>\n    props.theme?.name === \"light\"\n      ? \"linear-gradient(145deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85))\"\n      : \"linear-gradient(145deg, rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.75))\"};\n  color: ${(props) => props.theme?.text || \"#ffffff\"};\n  border: var(--rim-width) solid\n    ${(props) =>\n      props.theme?.name === \"light\"\n        ? \"rgba(0, 0, 0, 0.2)\"\n        : \"rgba(255, 255, 255, 0.4)\"};\n  font-size: ${(props) => (props.isMobile ? \"10px\" : \"11px\")};\n  text-align: center;\n  line-height: 1.4;\n  max-width: ${(props) => (props.isMobile ? \"85%\" : \"280px\")};\n\n  padding: ${(props) => (props.isMobile ? \"10px 16px\" : \"12px 20px\")};\n  border-radius: var(--radius-md);\n\n  /* Enhanced 3D Properties */\n  transform-style: ${(props) => (props.flatMode ? \"flat\" : \"preserve-3d\")};\n\n  /* Enhanced 3D Shadow */\n  box-shadow: var(--shadow-3d-medium);\n\n  opacity: ${(props) => (props.show ? 1 : 0)};\n  transition: var(--transition-3d);\n\n  font-weight: 500;\n  text-shadow: ${(props) =>\n    props.theme?.name === \"light\"\n      ? \"0 0 6px rgba(255, 255, 255, 0.7), 0 1px 2px rgba(255, 255, 255, 0.4)\"\n      : \"0 0 6px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.3)\"};\n\n  /* Enhanced 3D Transform */\n  transform: translateX(-50%) translateZ(0);\n\n  ${(props) =>\n    props.show &&\n    css`\n      transform: translateX(-50%) translateZ(2px);\n    `}\n`;\n\n// ============= ENHANCED VOICE ASSISTANT COMPONENT =============\n// const VoiceAssistant = ({ onClose }) => {\nconst VoiceAssistant = ({ onClose, theme }) => {\n  const [assistantState, setAssistantState] = useState(\"idle\");\n  const [connectionStatus, setConnectionStatus] = useState(\"disconnected\");\n  const [isAutoMode, setIsAutoMode] = useState(false);\n  const [interimTranscript, setInterimTranscript] = useState(\"\");\n  const [showHelp, setShowHelp] = useState(true);\n  const [isVisible, setIsVisible] = useState(true);\n  const [isClosing, setIsClosing] = useState(false);\n  const [notice, setNotice] = useState(null);\n  const [hasPermission, setHasPermission] = useState(false);\n  const [retryCount, setRetryCount] = useState(0);\n  const [deviceInfo, setDeviceInfo] = useState({});\n  const [isKeyboardOpen, setIsKeyboardOpen] = useState(false);\n  const [voiceIntensity, setVoiceIntensity] = useState(0);\n  const [flatMode, setFlatMode] = useState(false);\n  const [motionReduce, setMotionReduce] = useState(false);\n  const [isFirstInteraction, setIsFirstInteraction] = useState(true);\n  // NEW: Agentic AI state\n  const [chatHistory, setChatHistory] = useState([]);\n  const [currentRoute, setCurrentRoute] = useState(\n    window.location.pathname === \"/\" ? \"/home\" : window.location.pathname\n  );\n  const recognitionRef = useRef(null);\n  const synthRef = useRef(null);\n  const silenceTimeoutRef = useRef(null);\n  const isProcessingRef = useRef(false);\n  const finalTranscriptRef = useRef(\"\");\n  const audioContextRef = useRef(null);\n  const autoModeRef = useRef(false);\n  const noticeTimeoutRef = useRef(null);\n  const wakeLockRef = useRef(null);\n  const initialViewportHeight = useRef(window.innerHeight);\n  const animationFrameRef = useRef(null);\n  const permissionCheckTimeoutRef = useRef(null);\n  const speechTimeoutRef = useRef(null);\n  const currentStreamRef = useRef(null);\n  const voicesLoadedRef = useRef(false);\n  const [showEmailForm, setShowEmailForm] = useState(false);\n  const [emailInquiryType, setEmailInquiryType] = useState(null);\n  // Initialize Enhanced Liquid Glass System\n  useEffect(() => {\n    // Subscribe to route changes\n    import(\"./VoiceAgentHelpers\").then(({ subscribeToRouteChanges }) => {\n      // We can't easily unsubscribe from here as this effect runs once, but subscription is global logic in VoiceAgentHelpers mostly.\n      // However, for best practice, we should try.\n      // Since we are lazy loading, we can't return the unsubscribe function synchronously.\n      // But we can set a ref or just let it live as the chatbot is likely persistent.\n      subscribeToRouteChanges((pathname) => {\n        setCurrentRoute(pathname);\n      });\n    });\n\n    // Initialize performance manager\n    PerformanceManager.init();\n    setFlatMode(document.documentElement.classList.contains(\"flat-mode\"));\n\n    // Initialize hero tint sampler\n    HeroTintSampler.init(\".hero-image\", {\n      sampleSize: 12,\n      saturationBoost: 0.3,\n      opacityRange: [0.05, 0.15],\n    });\n    EmailAgent.init();\n    // IMPORTANT: Initialize Visual Agent after page loads\n    const initTimer = setTimeout(() => {\n      VisualAgent.initialize();\n    }, 2000); // Wait 2s for React components to mount\n\n    // Check for reduced motion preference\n    const mediaQuery = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n    setMotionReduce(mediaQuery.matches);\n\n    const handleMotionChange = (e) => setMotionReduce(e.matches);\n    mediaQuery.addEventListener(\"change\", handleMotionChange);\n\n    return () => {\n      mediaQuery.removeEventListener(\"change\", handleMotionChange);\n    };\n  }, []);\n\n  // NEW: Load chat history on mount\n  useEffect(() => {\n    const loadedHistory = MemoryManager.loadHistory();\n    setChatHistory(loadedHistory);\n    console.log(\" Loaded chat history:\", loadedHistory.length, \"turns\");\n  }, []);\n\n  // NEW: Track route changes\n  useEffect(() => {\n    const cleanup = setupRouteTracking((newRoute) => {\n      setCurrentRoute(newRoute);\n    });\n    return cleanup;\n  }, []);\n  // Enhanced device detection with mobile optimizations\n  useEffect(() => {\n    const userAgent = navigator.userAgent.toLowerCase();\n    const platform = navigator.platform.toLowerCase();\n\n    const deviceInfo = {\n      isMobile: /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(\n        userAgent\n      ),\n      isIOS:\n        /ipad|iphone|ipod/.test(userAgent) ||\n        (platform === \"macintel\" && navigator.maxTouchPoints > 1),\n      isAndroid: /android/i.test(userAgent),\n      isChrome: /chrome/i.test(userAgent) && !/edge/i.test(userAgent),\n      isFirefox: /firefox/i.test(userAgent),\n      isSafari: /safari/i.test(userAgent) && !/chrome/i.test(userAgent),\n      isEdge: /edge/i.test(userAgent),\n      hasTouch: \"ontouchstart\" in window || navigator.maxTouchPoints > 0,\n      isStandalone:\n        window.navigator.standalone === true ||\n        window.matchMedia(\"(display-mode: standalone)\").matches,\n      supports3D: CSS.supports(\"transform-style\", \"preserve-3d\"),\n      supportsBackdropFilter: CSS.supports(\"backdrop-filter\", \"blur(10px)\"),\n      hasHardwareAcceleration: !!window.DeviceOrientationEvent,\n      screenSize: {\n        width: window.screen.width,\n        height: window.screen.height,\n        ratio: window.devicePixelRatio || 1,\n      },\n    };\n\n    setDeviceInfo(deviceInfo);\n\n    if (deviceInfo.isMobile) {\n      // Enhanced mobile viewport handling\n      if (deviceInfo.isIOS) {\n        const viewport = document.querySelector('meta[name=\"viewport\"]');\n        if (viewport) {\n          viewport.setAttribute(\n            \"content\",\n            \"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover\"\n          );\n        }\n\n        // iOS specific keyboard detection\n        const handleIOSResize = () => {\n          const currentHeight = window.visualViewport\n            ? window.visualViewport.height\n            : window.innerHeight;\n          const heightDifference =\n            initialViewportHeight.current - currentHeight;\n          setIsKeyboardOpen(heightDifference > 150);\n        };\n\n        if (window.visualViewport) {\n          window.visualViewport.addEventListener(\"resize\", handleIOSResize);\n          return () =>\n            window.visualViewport.removeEventListener(\n              \"resize\",\n              handleIOSResize\n            );\n        }\n      }\n\n      // General mobile keyboard detection\n      const handleResize = () => {\n        const currentHeight = window.innerHeight;\n        const heightDifference = initialViewportHeight.current - currentHeight;\n        setIsKeyboardOpen(heightDifference > 150);\n      };\n\n      const handleOrientationChange = () => {\n        setTimeout(() => {\n          initialViewportHeight.current = window.innerHeight;\n          setIsKeyboardOpen(false);\n        }, 500);\n      };\n\n      window.addEventListener(\"resize\", handleResize);\n      window.addEventListener(\"orientationchange\", handleOrientationChange);\n\n      return () => {\n        window.removeEventListener(\"resize\", handleResize);\n        window.removeEventListener(\n          \"orientationchange\",\n          handleOrientationChange\n        );\n      };\n    }\n  }, []);\n\n  // Show notice function with enhanced mobile handling\n  const showNotice = useCallback(\n    (type, title, content, duration = 3500) => {\n      if (noticeTimeoutRef.current) {\n        clearTimeout(noticeTimeoutRef.current);\n      }\n\n      setNotice({ type, title, content, show: true });\n\n      // Shorter duration for mobile\n      const actualDuration = deviceInfo.isMobile\n        ? Math.min(duration, 3000)\n        : duration;\n\n      noticeTimeoutRef.current = setTimeout(() => {\n        setNotice((prev) => (prev ? { ...prev, show: false } : null));\n        setTimeout(() => setNotice(null), 300);\n      }, actualDuration);\n    },\n    [deviceInfo.isMobile]\n  );\n\n  // Enhanced microphone device detection\n  const detectMicrophoneDevices = useCallback(async () => {\n    try {\n      // First check if we can enumerate devices at all\n      if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n        throw new Error(\"Device enumeration not supported\");\n      }\n\n      // Check for audio input devices\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const audioInputs = devices.filter(\n        (device) => device.kind === \"audioinput\"\n      );\n\n      console.log(\" Available audio input devices:\", audioInputs.length);\n\n      if (audioInputs.length === 0) {\n        throw new Error(\"No microphone devices found\");\n      }\n\n      return audioInputs;\n    } catch (error) {\n      console.error(\" Device detection failed:\", error);\n      throw error;\n    }\n  }, []);\n  const [suggestionIndex, setSuggestionIndex] = useState(0);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setSuggestionIndex((prev) => (prev + 1) % 4); // Cycles through 4 messages\n    }, 3500);\n    return () => clearInterval(interval);\n  }, []);\n  // Check browser compatibility with enhanced checks\n  const checkBrowserCompatibility = useCallback(() => {\n    if (!window.isSecureContext) {\n      showNotice(\n        \"error\",\n        \" HTTPS Required\",\n        \"Voice features require a secure connection\"\n      );\n      return false;\n    }\n\n    if (\n      !(\"webkitSpeechRecognition\" in window || \"SpeechRecognition\" in window)\n    ) {\n      showNotice(\n        \"error\",\n        \" Not Supported\",\n        \"Speech recognition is not supported in this browser\"\n      );\n      return false;\n    }\n\n    if (!(\"speechSynthesis\" in window)) {\n      showNotice(\n        \"error\",\n        \" Not Supported\",\n        \"Speech synthesis is not supported in this browser\"\n      );\n      return false;\n    }\n\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      showNotice(\n        \"error\",\n        \" Not Supported\",\n        \"Media devices not supported in this browser\"\n      );\n      return false;\n    }\n\n    return true;\n  }, [showNotice]);\n\n  // Enhanced microphone permission with comprehensive error handling\n  const requestMicrophonePermission = useCallback(async () => {\n    try {\n      setConnectionStatus(\"connecting\");\n      showNotice(\n        \"info\",\n        \" Checking Audio\",\n        \"Detecting microphone devices...\"\n      );\n\n      // First detect devices\n      await detectMicrophoneDevices();\n\n      showNotice(\n        \"info\",\n        \" Microphone Access\",\n        \"Please allow microphone access to enable voice chat!\"\n      );\n\n      // Request enhanced audio permissions\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          autoGainControl: true,\n          ...(deviceInfo.isMobile && {\n            sampleRate: 16000,\n            channelCount: 1,\n          }),\n        },\n      });\n\n      // Store current stream for proper cleanup\n      currentStreamRef.current = stream;\n\n      // Test the stream briefly to ensure it's working\n      const audioContext = new (window.AudioContext ||\n        window.webkitAudioContext)();\n      const source = audioContext.createMediaStreamSource(stream);\n      const analyzer = audioContext.createAnalyser();\n      source.connect(analyzer);\n\n      // Brief test\n      setTimeout(() => {\n        // Cleanup test\n        source.disconnect();\n        audioContext.close();\n\n        // Stop all tracks\n        stream.getTracks().forEach((track) => track.stop());\n        currentStreamRef.current = null;\n\n        setHasPermission(true);\n        setConnectionStatus(\"connected\");\n        showNotice(\n          \"success\",\n          \" Ready!\",\n          deviceInfo.isMobile\n            ? \"Voice interface ready!\"\n            : \"Enhanced voice interface ready!\"\n        );\n      }, 1000);\n\n      return true;\n    } catch (error) {\n      console.error(\" Microphone permission error:\", error);\n\n      let errorMessage = \"Please allow microphone access\";\n      let errorTitle = \" Permission Denied\";\n\n      switch (error.name) {\n        case \"NotFoundError\":\n          errorMessage =\n            \"No microphone found. Please connect a microphone and try again.\";\n          errorTitle = \" No Microphone\";\n          break;\n        case \"NotAllowedError\":\n          errorMessage =\n            \"Microphone access denied. Please enable microphone permissions in your browser settings.\";\n          errorTitle = \" Access Denied\";\n          break;\n        case \"NotReadableError\":\n          errorMessage =\n            \"Microphone is being used by another app. Please close other apps and try again.\";\n          errorTitle = \" Device Busy\";\n          break;\n        case \"OverconstrainedError\":\n          errorMessage =\n            \"Microphone doesn't support required settings. Please try with a different microphone.\";\n          errorTitle = \" Unsupported Device\";\n          break;\n        case \"SecurityError\":\n          errorMessage =\n            \"Security error. Please refresh the page and try again.\";\n          errorTitle = \" Security Error\";\n          break;\n        case \"AbortError\":\n          errorMessage = \"Request was cancelled. Please try again.\";\n          errorTitle = \" Request Cancelled\";\n          break;\n        default:\n          if (error.message.includes(\"No microphone devices found\")) {\n            errorMessage =\n              \"No microphone detected. Please connect a microphone.\";\n            errorTitle = \" No Device Found\";\n          }\n      }\n\n      setHasPermission(false);\n      setConnectionStatus(\"disconnected\");\n      showNotice(\"error\", errorTitle, errorMessage, 5000);\n      return false;\n    }\n  }, [showNotice, deviceInfo, detectMicrophoneDevices]);\n\n  // Enhanced audio cues with error handling\n  const playAudioCue = useCallback(\n    (type) => {\n      try {\n        //  FIX: Check if context exists and is not closed\n        if (\n          !audioContextRef.current ||\n          audioContextRef.current.state === \"closed\"\n        ) {\n          audioContextRef.current = new (window.AudioContext ||\n            window.webkitAudioContext)();\n          console.log(\" Created new AudioContext\");\n        }\n\n        const audioContext = audioContextRef.current;\n\n        //  FIX: Resume context if suspended\n        if (audioContext.state === \"suspended\") {\n          audioContext.resume();\n        }\n\n        const oscillator = audioContext.createOscillator();\n        const gainNode = audioContext.createGain();\n\n        oscillator.connect(gainNode);\n        gainNode.connect(audioContext.destination);\n\n        const volume = deviceInfo.isMobile ? 0.03 : 0.05;\n        const duration = deviceInfo.isMobile ? 0.15 : 0.2;\n\n        switch (type) {\n          case \"start\":\n            oscillator.frequency.setValueAtTime(600, audioContext.currentTime);\n            oscillator.frequency.exponentialRampToValueAtTime(\n              1200,\n              audioContext.currentTime + 0.1\n            );\n            break;\n          case \"end\":\n            oscillator.frequency.setValueAtTime(1200, audioContext.currentTime);\n            oscillator.frequency.exponentialRampToValueAtTime(\n              600,\n              audioContext.currentTime + 0.15\n            );\n            break;\n          case \"error\":\n            oscillator.frequency.setValueAtTime(300, audioContext.currentTime);\n            oscillator.frequency.exponentialRampToValueAtTime(\n              150,\n              audioContext.currentTime + 0.3\n            );\n            break;\n          default:\n            return;\n        }\n\n        gainNode.gain.setValueAtTime(volume, audioContext.currentTime);\n        gainNode.gain.exponentialRampToValueAtTime(\n          0.01,\n          audioContext.currentTime + duration\n        );\n\n        oscillator.start(audioContext.currentTime);\n        oscillator.stop(audioContext.currentTime + duration);\n\n        //  FIX: Clean up after playing\n        oscillator.onended = () => {\n          try {\n            oscillator.disconnect();\n            gainNode.disconnect();\n          } catch (e) {\n            // Already disconnected, ignore\n          }\n        };\n      } catch (error) {\n        console.warn(\" Audio cue failed:\", error);\n        // Don't throw - just skip the audio cue\n      }\n    },\n    [deviceInfo]\n  );\n  // Content extraction (unchanged)\n  const extractContent = useCallback((obj, depth = 0) => {\n    if (depth > 5) return null;\n    if (typeof obj === \"string\" && obj.trim()) {\n      return obj.trim();\n    }\n    if (!obj) return null;\n\n    if (obj.result && obj.result.message && obj.result.message.content) {\n      return obj.result.message.content.trim();\n    }\n\n    const patterns = [\n      \"content\",\n      \"message.content\",\n      \"result.message.content\",\n      \"choices[0].message.content\",\n      \"text\",\n      \"response\",\n      \"answer\",\n      \"reply\",\n    ];\n\n    for (const pattern of patterns) {\n      try {\n        const value = pattern.split(\".\").reduce((acc, key) => {\n          if (key.includes(\"[\")) {\n            const [arrayKey, index] = key.split(\"[\");\n            const idx = parseInt(index.replace(\"]\", \"\"));\n            return acc?.[arrayKey]?.[idx];\n          }\n          return acc?.[key];\n        }, obj);\n\n        if (value && typeof value === \"string\" && value.trim()) {\n          return value.trim();\n        }\n      } catch (e) {\n        // Continue to next pattern\n      }\n    }\n\n    return null;\n  }, []);\n\n  // Voice fallback with mobile-optimized responses\n  const getVoiceFallback = useCallback(\n    (input) => {\n      const voiceResponses = {\n        greeting: deviceInfo.isMobile\n          ? \"Hey! I'm Laxman's AI assistant. What would you like to explore?\"\n          : \"Hey there! I'm Laxman's AI assistant. What would you like to explore?\",\n        identity:\n          \"Laxman is a brilliant software engineer at CAMS in Chennai. He's an IIT Delhi graduate with exceptional AI and full-stack development skills.\",\n        projects:\n          \"He's created amazing AI projects! His flagship CamsLens platform processes over 80,000 documents monthly with incredible 95% accuracy.\",\n        skills:\n          \"He's a master of Java, Python, JavaScript, and cutting-edge AI technologies like Vertex AI, GCP. Truly impressive technical expertise!\",\n        contact:\n          \"You can reach him at laxmankethavath5@gmail.com, or connect on LinkedIn. He's very approachable!\",\n        location:\n          \"He's currently based in Chennai, India, building innovative tech solutions that make a real difference.\",\n        education:\n          \"He completed his dual degree in Computer Science from prestigious IIT Delhi, graduating in 2024. Excellent academic background!\",\n        experience:\n          \"He's been excelling as a software engineer at CAMS since June 2024, previously mentoring over 300 students as a teaching assistant.\",\n        help: deviceInfo.isMobile\n          ? \"Ask about Laxman's projects, skills, experience, or contact info. I'm here to help!\"\n          : \"Feel free to ask about Laxman's projects, technical skills, work experience, education, or how to get in touch. I'm here to help!\",\n        default:\n          \"That's interesting! Could you rephrase it? I'm equipped with comprehensive knowledge about Laxman's impressive background!\",\n      };\n\n      const input_lower = input.toLowerCase();\n\n      if (\n        input_lower.includes(\"hello\") ||\n        input_lower.includes(\"hi\") ||\n        input_lower.includes(\"hey\") ||\n        input_lower.includes(\"greet\")\n      ) {\n        return voiceResponses.greeting;\n      }\n      if (\n        input_lower.includes(\"who\") ||\n        input_lower.includes(\"about\") ||\n        input_lower.includes(\"tell me\") ||\n        input_lower.includes(\"describe\")\n      ) {\n        return voiceResponses.identity;\n      }\n      if (\n        input_lower.includes(\"project\") ||\n        input_lower.includes(\"work\") ||\n        input_lower.includes(\"built\") ||\n        input_lower.includes(\"develop\")\n      ) {\n        return voiceResponses.projects;\n      }\n      if (\n        input_lower.includes(\"skill\") ||\n        input_lower.includes(\"technology\") ||\n        input_lower.includes(\"programming\") ||\n        input_lower.includes(\"technical\")\n      ) {\n        return voiceResponses.skills;\n      }\n      if (\n        input_lower.includes(\"contact\") ||\n        input_lower.includes(\"reach\") ||\n        input_lower.includes(\"email\") ||\n        input_lower.includes(\"phone\")\n      ) {\n        return voiceResponses.contact;\n      }\n      if (\n        input_lower.includes(\"where\") ||\n        input_lower.includes(\"location\") ||\n        input_lower.includes(\"live\") ||\n        input_lower.includes(\"based\")\n      ) {\n        return voiceResponses.location;\n      }\n      if (\n        input_lower.includes(\"education\") ||\n        input_lower.includes(\"study\") ||\n        input_lower.includes(\"college\") ||\n        input_lower.includes(\"university\")\n      ) {\n        return voiceResponses.education;\n      }\n      if (\n        input_lower.includes(\"experience\") ||\n        input_lower.includes(\"job\") ||\n        input_lower.includes(\"career\") ||\n        input_lower.includes(\"professional\")\n      ) {\n        return voiceResponses.experience;\n      }\n      if (\n        input_lower.includes(\"help\") ||\n        input_lower.includes(\"what can\") ||\n        input_lower.includes(\"how to\") ||\n        input_lower.includes(\"assist\")\n      ) {\n        return voiceResponses.help;\n      }\n\n      return voiceResponses.default;\n    },\n    [deviceInfo]\n  );\n\n  // Get AI response with mobile optimization\n\n  // UPDATED: Get AI response with Agentic capabilities\n  const getAIResponse = useCallback(\n    async (userInput) => {\n      try {\n        const aiResponse = await getAgenticAIResponse(userInput, deviceInfo);\n        return aiResponse;\n      } catch (error) {\n        console.error(\" Agentic AI Error, using fallback:\", error.message);\n        const fallbackResponse = getFallbackResponse(userInput, deviceInfo);\n        return fallbackResponse;\n      }\n    },\n    [deviceInfo]\n  );\n  // Enhanced stop all functions with comprehensive cleanup\n  const stopAll = useCallback(() => {\n    console.log(\" Stopping all voice activities...\");\n\n    // Stop speech recognition\n    if (recognitionRef.current) {\n      try {\n        recognitionRef.current.stop();\n        recognitionRef.current = null;\n        console.log(\" Speech recognition stopped\");\n      } catch (error) {\n        console.warn(\"Failed to stop recognition:\", error);\n      }\n    }\n\n    // Stop speech synthesis\n    try {\n      window.speechSynthesis.cancel();\n      synthRef.current = null;\n      console.log(\" Speech synthesis stopped\");\n    } catch (error) {\n      console.warn(\"Failed to stop synthesis:\", error);\n    }\n\n    // Clear all timeouts\n    if (silenceTimeoutRef.current) {\n      clearTimeout(silenceTimeoutRef.current);\n      silenceTimeoutRef.current = null;\n    }\n\n    if (speechTimeoutRef.current) {\n      clearTimeout(speechTimeoutRef.current);\n      speechTimeoutRef.current = null;\n    }\n\n    if (permissionCheckTimeoutRef.current) {\n      clearTimeout(permissionCheckTimeoutRef.current);\n      permissionCheckTimeoutRef.current = null;\n    }\n\n    if (animationFrameRef.current) {\n      cancelAnimationFrame(animationFrameRef.current);\n      animationFrameRef.current = null;\n    }\n\n    // Stop any active media streams\n    if (currentStreamRef.current) {\n      currentStreamRef.current.getTracks().forEach((track) => track.stop());\n      currentStreamRef.current = null;\n    }\n\n    // Reset state\n    setAssistantState(\"idle\");\n    setInterimTranscript(\"\");\n    setVoiceIntensity(0);\n    isProcessingRef.current = false;\n    finalTranscriptRef.current = \"\";\n\n    console.log(\" All voice activities stopped\");\n  }, []);\n\n  // Enhanced voice loading with timeout\n  const loadVoices = useCallback(() => {\n    return new Promise((resolve) => {\n      if (\n        voicesLoadedRef.current ||\n        window.speechSynthesis.getVoices().length > 0\n      ) {\n        voicesLoadedRef.current = true;\n        resolve(true);\n        return;\n      }\n\n      const timeout = setTimeout(() => {\n        console.warn(\" Voice loading timeout, proceeding with default\");\n        voicesLoadedRef.current = true;\n        resolve(false);\n      }, 3000);\n\n      const handleVoicesChanged = () => {\n        if (window.speechSynthesis.getVoices().length > 0) {\n          clearTimeout(timeout);\n          voicesLoadedRef.current = true;\n          window.speechSynthesis.removeEventListener(\n            \"voiceschanged\",\n            handleVoicesChanged\n          );\n          resolve(true);\n        }\n      };\n\n      window.speechSynthesis.addEventListener(\n        \"voiceschanged\",\n        handleVoicesChanged\n      );\n\n      // Trigger voice loading\n      window.speechSynthesis.getVoices();\n    });\n  }, []);\n\n  // Start listening with enhanced error handling and longer timeout\n  const startListening = useCallback(async () => {\n    if (\n      connectionStatus !== \"connected\" ||\n      assistantState === \"listening\" ||\n      isProcessingRef.current\n    ) {\n      console.warn(\" Cannot start listening - invalid state\");\n      return;\n    }\n\n    if (!hasPermission) {\n      const granted = await requestMicrophonePermission();\n      if (!granted) return;\n    }\n\n    const SpeechRecognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n\n    if (!SpeechRecognition) {\n      showNotice(\n        \"error\",\n        \" Not Supported\",\n        \"Speech recognition is not available\"\n      );\n      return;\n    }\n\n    const recognition = new SpeechRecognition();\n    recognitionRef.current = recognition;\n\n    // Enhanced recognition settings\n    recognition.continuous = false; // Start with false for better control\n    recognition.interimResults = true;\n    recognition.lang = \"en-US\";\n    recognition.maxAlternatives = 1;\n\n    setAssistantState(\"listening\");\n    setInterimTranscript(\"\");\n    finalTranscriptRef.current = \"\";\n    setShowHelp(false);\n\n    playAudioCue(\"start\");\n\n    recognition.onstart = () => {\n      console.log(\" Speech recognition started\");\n      // On mobile, keep continuous false for better battery life\n      if (!deviceInfo.isMobile) {\n        recognition.continuous = true;\n      }\n    };\n\n    recognition.onresult = (event) => {\n      let interimText = \"\";\n      let hasFinalResult = false;\n\n      for (let i = event.resultIndex; i < event.results.length; i++) {\n        const transcript = event.results[i][0].transcript.trim();\n\n        if (event.results[i].isFinal) {\n          finalTranscriptRef.current += transcript + \" \";\n          hasFinalResult = true;\n          console.log(\" Final result:\", transcript);\n        } else {\n          interimText += transcript;\n        }\n      }\n\n      if (interimText) {\n        setInterimTranscript(interimText);\n      }\n\n      // Clear previous timeout\n      if (silenceTimeoutRef.current) {\n        clearTimeout(silenceTimeoutRef.current);\n      }\n\n      // Extended timeout for better user experience - especially longer for complete sentences\n      const timeoutDuration = deviceInfo.isMobile ? 6000 : 6500; // Increased from 5.5s to 7-8s\n\n      silenceTimeoutRef.current = setTimeout(() => {\n        const finalResult = finalTranscriptRef.current.trim();\n        console.log(\" Silence timeout reached. Final result:\", finalResult);\n\n        if (\n          finalResult &&\n          finalResult.length >= 2 &&\n          !isProcessingRef.current\n        ) {\n          if (recognitionRef.current) {\n            recognitionRef.current.stop();\n          }\n          processFinalSpeech(finalResult);\n        } else if (interimText && interimText.length >= 5) {\n          // If we have substantial interim text, use it\n          console.log(\" Using interim text:\", interimText);\n          if (recognitionRef.current) {\n            recognitionRef.current.stop();\n          }\n          processFinalSpeech(interimText);\n        } else {\n          console.log(\" Insufficient speech detected\");\n          setAssistantState(\"idle\");\n          setInterimTranscript(\"\");\n\n          if (autoModeRef.current) {\n            setTimeout(() => {\n              if (autoModeRef.current && assistantState !== \"speaking\") {\n                startListening();\n              }\n            }, 2000);\n          }\n        }\n      }, timeoutDuration);\n    };\n\n    recognition.onerror = (event) => {\n      console.error(\" Speech recognition error:\", event.error);\n\n      // Clear timeouts on error\n      if (silenceTimeoutRef.current) {\n        clearTimeout(silenceTimeoutRef.current);\n        silenceTimeoutRef.current = null;\n      }\n\n      switch (event.error) {\n        case \"no-speech\":\n          console.log(\" No speech detected\");\n          if (autoModeRef.current) {\n            setTimeout(() => {\n              if (autoModeRef.current && assistantState !== \"speaking\") {\n                startListening();\n              }\n            }, 2000);\n          } else {\n            setAssistantState(\"idle\");\n            setInterimTranscript(\"\");\n          }\n          return;\n\n        case \"audio-capture\":\n          showNotice(\n            \"error\",\n            \" Audio Error\",\n            \"Microphone access lost. Please check your microphone.\"\n          );\n          setHasPermission(false);\n          setConnectionStatus(\"disconnected\");\n          break;\n\n        case \"not-allowed\":\n          showNotice(\n            \"error\",\n            \" Access Denied\",\n            \"Microphone permission was denied.\"\n          );\n          setHasPermission(false);\n          setConnectionStatus(\"disconnected\");\n          break;\n\n        case \"network\":\n          showNotice(\"warning\", \" Network Issue\", \"Retrying in 2 seconds...\");\n          setTimeout(() => {\n            if (assistantState === \"listening\") {\n              startListening();\n            }\n          }, 2000);\n          return;\n\n        case \"service-not-allowed\":\n          showNotice(\n            \"error\",\n            \" Service Blocked\",\n            \"Speech recognition service is not allowed.\"\n          );\n          break;\n\n        default:\n          console.error(\" Unhandled recognition error:\", event.error);\n          showNotice(\n            \"warning\",\n            \" Recognition Error\",\n            \"Speech recognition encountered an error. Retrying...\"\n          );\n          setTimeout(() => {\n            if (assistantState === \"listening\") {\n              startListening();\n            }\n          }, 2000);\n          return;\n      }\n\n      playAudioCue(\"error\");\n      setAssistantState(\"idle\");\n      setInterimTranscript(\"\");\n      isProcessingRef.current = false;\n    };\n\n    recognition.onend = () => {\n      console.log(\" Speech recognition ended\");\n\n      const remainingText = finalTranscriptRef.current.trim();\n      if (\n        remainingText &&\n        remainingText.length >= 2 &&\n        !isProcessingRef.current &&\n        assistantState === \"listening\"\n      ) {\n        console.log(\" Processing remaining text from onend:\", remainingText);\n        processFinalSpeech(remainingText);\n      } else if (!isProcessingRef.current) {\n        console.log(\" Recognition ended without sufficient text\");\n        setAssistantState(\"idle\");\n        setInterimTranscript(\"\");\n      }\n    };\n\n    try {\n      recognition.start();\n    } catch (error) {\n      console.error(\" Failed to start recognition:\", error);\n      setAssistantState(\"idle\");\n      playAudioCue(\"error\");\n      showNotice(\n        \"error\",\n        \" Start Failed\",\n        \"Could not start speech recognition\"\n      );\n    }\n  }, [\n    connectionStatus,\n    assistantState,\n    hasPermission,\n    requestMicrophonePermission,\n    playAudioCue,\n    showNotice,\n    deviceInfo,\n  ]);\n\n  // Speak introduction with enhanced error handling\n  const speakIntroduction = useCallback(async () => {\n    const introText = deviceInfo.isMobile\n      ? \"Hi! I'm Laxman's AI assistant. How can I help you learn about Laxman?\"\n      : \"Hey! I'm Laxman's AI assistant. Just tell give me Quick overview of Laxman Portfolio i will show u around\";\n\n    setAssistantState(\"speaking\");\n    setIsFirstInteraction(false);\n\n    try {\n      // Ensure voices are loaded\n      await loadVoices();\n\n      const utterance = new SpeechSynthesisUtterance(introText);\n      synthRef.current = utterance;\n\n      utterance.rate = deviceInfo.isMobile ? 0.9 : 0.95;\n      utterance.pitch = deviceInfo.isMobile ? 1.0 : 1.05;\n      utterance.volume = deviceInfo.isMobile ? 0.8 : 0.85;\n      utterance.lang = \"en-US\";\n\n      // Set preferred voice\n      const voices = window.speechSynthesis.getVoices();\n      if (voices.length > 0) {\n        let preferredVoice =\n          voices.find(\n            (voice) =>\n              voice.lang.includes(\"en-US\") && voice.name.includes(\"Google\")\n          ) ||\n          voices.find((voice) => voice.lang.includes(\"en-US\")) ||\n          voices[0];\n\n        if (preferredVoice) {\n          utterance.voice = preferredVoice;\n        }\n      }\n\n      utterance.onstart = () => {\n        console.log(\" Introduction started\");\n      };\n\n      utterance.onend = () => {\n        console.log(\" Introduction complete, starting listening...\");\n        synthRef.current = null;\n        // Start listening after introduction with a small delay\n        setTimeout(() => {\n          if (assistantState !== \"idle\") {\n            // Only start if we're still in speaking mode\n            startListening();\n          }\n        }, 500);\n      };\n\n      utterance.onerror = (event) => {\n        console.error(\" Introduction speech error:\", event.error);\n        synthRef.current = null;\n        setAssistantState(\"idle\");\n        showNotice(\n          \"warning\",\n          \" Speech Error\",\n          \"Could not play introduction. Starting listening mode...\"\n        );\n\n        // Fallback: just start listening\n        setTimeout(() => {\n          startListening();\n        }, 1000);\n      };\n\n      // Start speech with timeout fallback\n      window.speechSynthesis.speak(utterance);\n\n      // Fallback timeout in case speech doesn't work\n      speechTimeoutRef.current = setTimeout(() => {\n        if (synthRef.current) {\n          window.speechSynthesis.cancel();\n          synthRef.current = null;\n          setAssistantState(\"idle\");\n          setTimeout(() => {\n            startListening();\n          }, 500);\n        }\n      }, 8000); // 8 second timeout for introduction\n    } catch (error) {\n      console.error(\" Introduction setup failed:\", error);\n      setAssistantState(\"idle\");\n      showNotice(\"warning\", \" Speech Error\", \"Starting listening mode...\");\n      setTimeout(() => {\n        startListening();\n      }, 1000);\n    }\n  }, [deviceInfo, startListening, loadVoices, assistantState, showNotice]);\n\n  // Enhanced speak response with comprehensive error handling\n  const speakResponse = useCallback(\n    async (text) => {\n      if (!text || !text.trim()) {\n        console.warn(\" No text to speak\");\n        setAssistantState(\"idle\");\n        return;\n      }\n\n      if (!(\"speechSynthesis\" in window)) {\n        setAssistantState(\"idle\");\n        showNotice(\n          \"error\",\n          \" Not Supported\",\n          \"Speech synthesis is not available\"\n        );\n        return;\n      }\n\n      const cleanText = text.trim();\n      console.log(\" Speaking response:\", cleanText);\n\n      // Cancel any existing speech\n      window.speechSynthesis.cancel();\n\n      // Clear any existing speech timeout\n      if (speechTimeoutRef.current) {\n        clearTimeout(speechTimeoutRef.current);\n        speechTimeoutRef.current = null;\n      }\n\n      try {\n        // Ensure voices are loaded\n        await loadVoices();\n\n        setTimeout(() => {\n          const utterance = new SpeechSynthesisUtterance(cleanText);\n          synthRef.current = utterance;\n\n          // Enhanced speech settings\n          utterance.rate = deviceInfo.isMobile ? 0.9 : 0.95;\n          utterance.pitch = deviceInfo.isMobile ? 1.0 : 1.05;\n          utterance.volume = deviceInfo.isMobile ? 0.8 : 0.85;\n          utterance.lang = \"en-US\";\n\n          // Set preferred voice\n          const voices = window.speechSynthesis.getVoices();\n          if (voices.length > 0) {\n            let preferredVoice =\n              voices.find(\n                (voice) =>\n                  voice.lang.includes(\"en-US\") &&\n                  (voice.name.includes(\"Google\") ||\n                    voice.name.includes(\"Natural\"))\n              ) ||\n              voices.find((voice) => voice.lang.includes(\"en-US\")) ||\n              voices[0];\n\n            if (preferredVoice) {\n              utterance.voice = preferredVoice;\n              console.log(\" Using voice:\", preferredVoice.name);\n            }\n          }\n\n          utterance.onstart = () => {\n            console.log(\" Speech synthesis started\");\n          };\n\n          utterance.onend = () => {\n            console.log(\" Speech synthesis ended\");\n            synthRef.current = null;\n\n            const shouldAutoListen =\n              autoModeRef.current ||\n              EmailAgent.conversationState.isCollecting ||\n              window.pendingEmailSend;\n\n            if (shouldAutoListen) {\n              const delay = deviceInfo.isMobile ? 1000 : 1500;\n              setTimeout(() => {\n                if (assistantState != \"listening\") {\n                  startListening();\n                }\n              }, delay);\n            }\n          };\n\n          utterance.onerror = (event) => {\n            console.error(\" Speech synthesis error:\", event.error);\n            synthRef.current = null;\n\n            if (speechTimeoutRef.current) {\n              clearTimeout(speechTimeoutRef.current);\n              speechTimeoutRef.current = null;\n            }\n\n            setAssistantState(\"idle\");\n\n            let errorMessage = \"Could not play voice response\";\n\n            switch (event.error) {\n              case \"network\":\n                errorMessage = \"Network error during speech. Please try again.\";\n                break;\n              case \"synthesis-failed\":\n                errorMessage = \"Speech synthesis failed. Please try again.\";\n                break;\n              case \"audio-hardware\":\n                errorMessage =\n                  \"Audio hardware error. Please check your speakers.\";\n                break;\n              case \"canceled\":\n                console.log(\" Speech was cancelled\");\n                return; // Don't show error for cancellation\n              case \"interrupted\":\n                console.log(\" Speech was interrupted\");\n                return; // Don't show error for interruption\n            }\n\n            showNotice(\"error\", \" Speech Error\", errorMessage);\n          };\n\n          // Start speech\n          window.speechSynthesis.speak(utterance);\n\n          // Safety timeout to prevent hanging\n          const timeoutDuration = Math.max(cleanText.length * 100, 8000); // At least 5 seconds\n          speechTimeoutRef.current = setTimeout(() => {\n            if (synthRef.current) {\n              console.warn(\" Speech timeout, cancelling\");\n              window.speechSynthesis.cancel();\n              synthRef.current = null;\n              setAssistantState(\"idle\");\n              showNotice(\n                \"warning\",\n                \" Speech Timeout\",\n                \"Speech took too long, please try again\"\n              );\n            }\n          }, timeoutDuration);\n        }, 200); // Small delay to ensure cleanup\n      } catch (error) {\n        console.error(\" Speak response setup failed:\", error);\n        setAssistantState(\"idle\");\n        showNotice(\n          \"error\",\n          \" Speech Error\",\n          \"Could not set up voice response\"\n        );\n      }\n    },\n    [startListening, assistantState, showNotice, deviceInfo, loadVoices]\n  );\n\n  // Process final speech with enhanced validation\n  // UPDATED: Process final speech with action execution\n  const processFinalSpeech = useCallback(\n    async (finalText) => {\n      const cleanedText = finalText.trim();\n\n      console.log(\" Processing agentic input:\", cleanedText);\n\n      if (cleanedText.length < 2 || isProcessingRef.current) {\n        return;\n      }\n\n      isProcessingRef.current = true;\n      setInterimTranscript(\"\");\n      setShowHelp(false);\n\n      if (silenceTimeoutRef.current) {\n        clearTimeout(silenceTimeoutRef.current);\n        silenceTimeoutRef.current = null;\n      }\n\n      playAudioCue(\"end\");\n      // ===  EMAIL AGENT CHECK (ADD THIS) ===\n\n      if (window.pendingEmailSend) {\n        console.log(\"Checking pending email confirmation...\");\n        const lower = cleanedText.toLowerCase();\n\n        if (\n          lower.includes(\"yes\") ||\n          lower.includes(\"confirm\") ||\n          lower.includes(\"sure\") ||\n          lower.includes(\"ok\") ||\n          lower.includes(\"send\")\n        ) {\n          setAssistantState(\"thinking\");\n\n          const sendResult = await window.pendingEmailSend(); // Execute the stored function\n          window.pendingEmailSend = null; // Clear flag\n\n          setAssistantState(\"speaking\");\n          speakResponse(sendResult.response);\n\n          if (sendResult.success) {\n            showNotice(\n              \"success\",\n              \" Email Sent\",\n              \"Laxman will respond soon!\",\n              3000\n            );\n          } else {\n            showNotice(\n              \"error\",\n              \" Send Failed\",\n              \"Please try direct email\",\n              3000\n            );\n          }\n\n          isProcessingRef.current = false;\n          return;\n        } else if (\n          lower.includes(\"cancel\") ||\n          lower.includes(\"no\") ||\n          lower.includes(\"stop\") ||\n          lower.includes(\"abort\")\n        ) {\n          window.pendingEmailSend = null;\n          EmailAgent.cancel(); // Reset agent\n          setAssistantState(\"speaking\");\n          speakResponse(\"Okay, email cancelled. What else can I help with?\");\n          isProcessingRef.current = false;\n          return;\n        } else {\n          // If user says something unclear during confirmation\n          setAssistantState(\"speaking\");\n          speakResponse(\"Please say 'yes' to send or 'cancel' to stop.\");\n          isProcessingRef.current = false;\n          return;\n        }\n      }\n\n      // 2. SECOND: Check if collecting data (Filling the form via voice)\n      if (EmailAgent.conversationState.isCollecting) {\n        setAssistantState(\"thinking\");\n\n        // Check for cancel\n        if (\n          cleanedText.toLowerCase().includes(\"cancel\") ||\n          cleanedText.toLowerCase().includes(\"stop\")\n        ) {\n          const result = EmailAgent.cancel();\n          setAssistantState(\"speaking\");\n          speakResponse(result.response);\n          isProcessingRef.current = false;\n          return;\n        }\n\n        // Process the answer\n        const result = EmailAgent.processAnswer(cleanedText);\n\n        if (result.action === \"CONFIRM_EMAIL\") {\n          setAssistantState(\"speaking\");\n          speakResponse(result.response);\n\n          // Store the send function for the NEXT turn (caught by block #1 above)\n          window.pendingEmailSend = result.onConfirm;\n\n          isProcessingRef.current = false;\n          return;\n        }\n\n        setAssistantState(\"speaking\");\n        speakResponse(result.response);\n        isProcessingRef.current = false;\n        return;\n      }\n      // 3. Detect email intent\n      // 3. Detect email intent\n      const emailIntent = EmailAgent.detectIntent(cleanedText);\n      if (emailIntent) {\n        const startResult = EmailAgent.startCollection(emailIntent);\n\n        // Open form instead of voice collection\n        setEmailInquiryType(emailIntent);\n        setShowEmailForm(true);\n\n        setAssistantState(\"speaking\");\n        speakResponse(startResult.response);\n        isProcessingRef.current = false;\n        return;\n      }\n      // Check for voice shortcuts\n      if (VoiceShortcuts.isShortcut(cleanedText)) {\n        const shortcutResult = VoiceShortcuts.execute(cleanedText);\n\n        if (shortcutResult) {\n          setAssistantState(\"speaking\");\n\n          if (shortcutResult.action && shortcutResult.action !== \"NONE\") {\n            AgentExecutor.execute(shortcutResult.action, showNotice);\n            setTimeout(() => {\n              speakResponse(shortcutResult.response);\n            }, 500);\n          } else {\n            speakResponse(shortcutResult.response);\n          }\n\n          isProcessingRef.current = false;\n          return;\n        }\n      }\n\n      // === NEW: AGENTIC CAPABILITIES ===\n\n      // 1. Predict Intent\n      const predictedIntent = IntentPredictor.predictIntent(cleanedText);\n      console.log(\" Predicted Intent:\", predictedIntent);\n\n      // 2. If high-confidence workflow intent, execute it\n      if (predictedIntent && predictedIntent.confidence > 0.7) {\n        setAssistantState(\"speaking\");\n\n        // Speak introduction\n        speakResponse(\n          `I understand you want to ${predictedIntent.intent\n            .toLowerCase()\n            .replace(/_/g, \" \")}. Let me guide you through that!`\n        );\n\n        // Execute workflow after 3 seconds\n        setTimeout(async () => {\n          await AgentExecutor.executeWorkflow(\n            predictedIntent.workflow,\n            { speak: speakResponse },\n            showNotice\n          );\n        }, 3000);\n\n        // Learn from this interaction\n        PreferenceLearner.learn({\n          question: cleanedText,\n          intent: predictedIntent.intent,\n          timestamp: Date.now(),\n        });\n\n        isProcessingRef.current = false;\n        return;\n      }\n\n      // 3. Decompose complex questions\n      const decomposed = QuestionDecomposer.decompose(cleanedText);\n      if (decomposed.isComplex) {\n        console.log(\" Complex question detected, decomposing...\");\n        setAssistantState(\"speaking\");\n\n        speakResponse(\n          `That's a comprehensive question! Let me break it down and answer each part.`\n        );\n\n        // Answer sub-questions sequentially\n        for (let i = 0; i < decomposed.subQuestions.length; i++) {\n          await new Promise((resolve) => setTimeout(resolve, 5000 * i));\n\n          try {\n            const subAnswer = await getAIResponse(decomposed.subQuestions[i]);\n            speakResponse(subAnswer.response);\n\n            if (subAnswer.action && subAnswer.action !== \"NONE\") {\n              AgentExecutor.execute(subAnswer.action, showNotice);\n            }\n          } catch (error) {\n            console.error(\"Sub-question error:\", error);\n          }\n        }\n\n        isProcessingRef.current = false;\n        return;\n      }\n\n      setAssistantState(\"thinking\");\n\n      try {\n        // Track API usage\n        APIUsageTracker.logCall();\n\n        const aiResponse = await getAIResponse(cleanedText);\n        console.log(\" Response:\", aiResponse);\n\n        if (\n          !aiResponse ||\n          !aiResponse.response ||\n          !aiResponse.response.trim()\n        ) {\n          throw new Error(\"Invalid AI response format\");\n        }\n\n        // Save to memory\n        const action = aiResponse.action || \"NONE\";\n        const updatedHistory = MemoryManager.addTurn(\n          cleanedText,\n          aiResponse.response,\n          action\n        );\n        setChatHistory(updatedHistory);\n\n        // === NEW: GENERATE FOLLOW-UPS ===\n        const followUps = FollowUpGenerator.generateFollowUps(\n          cleanedText,\n          aiResponse.response,\n          { currentRoute }\n        );\n        console.log(\" Generated follow-ups:\", followUps);\n\n        // Store follow-ups for later use (could show as buttons)\n        // setFollowUpSuggestions(followUps);\n\n        // Execute action if present\n        if (action && action !== \"NONE\") {\n          console.log(\" Executing action:\", action);\n          const executed = AgentExecutor.execute(action, showNotice);\n\n          if (executed) {\n            setTimeout(\n              () => {\n                setAssistantState(\"speaking\");\n                speakResponse(aiResponse.response);\n\n                // === NEW: PROACTIVE SUGGESTION ===\n                setTimeout(() => {\n                  const suggestion = ProactiveSuggestionsEngine.getSuggestion({\n                    currentPage: currentRoute,\n                    questionsAsked: [\n                      ...chatHistory.map((h) => h.user),\n                      cleanedText,\n                    ],\n                    pagesVisited: [currentRoute],\n                    timeOnCurrentPage: Date.now(),\n                  });\n\n                  if (suggestion) {\n                    console.log(\" Proactive suggestion:\", suggestion.text);\n                    showNotice(\"info\", \" Suggestion\", suggestion.text, 5000);\n                  }\n                }, 3000);\n              },\n              action.startsWith(\"NAVIGATE\")\n                ? 800\n                : action.startsWith(\"HIGHLIGHT\")\n                ? 1200\n                : 200\n            );\n          } else {\n            setAssistantState(\"speaking\");\n            speakResponse(aiResponse.response);\n          }\n        } else {\n          setAssistantState(\"speaking\");\n          speakResponse(aiResponse.response);\n        }\n\n        // === NEW: LEARN FROM INTERACTION ===\n        PreferenceLearner.learn({\n          question: cleanedText,\n          answer: aiResponse.response,\n          action: action,\n          timestamp: Date.now(),\n        });\n      } catch (error) {\n        console.error(\" Error, using fallback:\", error);\n        setAssistantState(\"idle\");\n        showNotice(\"error\", \" Error\", \"Using fallback response...\");\n\n        try {\n          const fallback = getFallbackResponse(cleanedText, deviceInfo);\n\n          if (fallback.action && fallback.action !== \"NONE\") {\n            AgentExecutor.execute(fallback.action, showNotice);\n            setTimeout(() => {\n              setAssistantState(\"speaking\");\n              speakResponse(fallback.response);\n            }, 500);\n          } else {\n            setAssistantState(\"speaking\");\n            speakResponse(fallback.response);\n          }\n        } catch (fallbackError) {\n          console.error(\"Fallback failed:\", fallbackError);\n          setAssistantState(\"idle\");\n        }\n      }\n\n      isProcessingRef.current = false;\n    },\n    [\n      getAIResponse,\n      playAudioCue,\n      speakResponse,\n      showNotice,\n      deviceInfo,\n      currentRoute,\n      chatHistory,\n    ]\n  );\n\n  // Toggle auto mode with enhanced handling\n  const toggleAutoMode = useCallback(() => {\n    setIsAutoMode((prev) => {\n      const newState = !prev;\n      autoModeRef.current = newState;\n\n      if (newState) {\n        showNotice(\n          \"info\",\n          \" Auto Mode On\",\n          deviceInfo.isMobile\n            ? \"Continuous voice active!\"\n            : \"Continuous voice interaction activated!\"\n        );\n        if (assistantState === \"idle\") {\n          setTimeout(() => {\n            if (isFirstInteraction) {\n              speakIntroduction();\n            } else {\n              startListening();\n            }\n          }, 1000);\n        }\n      } else {\n        showNotice(\n          \"info\",\n          \" Auto Mode Off\",\n          \"Switched to one-time question mode\"\n        );\n        stopAll();\n      }\n      return newState;\n    });\n  }, [\n    assistantState,\n    startListening,\n    stopAll,\n    showNotice,\n    deviceInfo,\n    isFirstInteraction,\n    speakIntroduction,\n  ]);\n\n  // Test TTS with enhanced error handling\n  const testTTS = useCallback(async () => {\n    const testText = deviceInfo.isMobile\n      ? \"Hello! Voice technology is working perfectly!\"\n      : \"Hello! Enhanced voice interface is working excellently!\";\n\n    console.log(\" Testing TTS with text:\", testText);\n    setAssistantState(\"speaking\");\n    speakResponse(testText);\n  }, [speakResponse, deviceInfo]);\n\n  // Toggle flat mode\n  const toggleFlatMode = useCallback(() => {\n    const newFlatMode = PerformanceManager.toggleFlatMode();\n    setFlatMode(newFlatMode);\n    showNotice(\n      \"info\",\n      newFlatMode ? \" Flat Mode On\" : \" 3D Mode On\",\n      newFlatMode\n        ? \"Performance optimized interface\"\n        : \"Full enhanced experience\"\n    );\n  }, [showNotice]);\n\n  // Close chat with enhanced cleanup\n  const closeChat = useCallback(() => {\n    console.log(\" Closing voice assistant\");\n    stopAll();\n    setIsClosing(true);\n    setTimeout(() => {\n      setIsVisible(false);\n      if (onClose) {\n        onClose();\n      }\n    }, 400);\n  }, [stopAll, onClose]);\n  // Email form submit handler\n  const handleEmailFormSubmit = async (formData) => {\n    console.log(\" Form Submitted. Handing over to Voice Agent...\");\n\n    // 1. Close the Form UI\n    setShowEmailForm(false);\n\n    // 2. Show thinking state briefly\n    setAssistantState(\"thinking\");\n\n    // 3. Send data to Agent (It determines the next missing field)\n    const result = EmailAgent.ingestFormData(formData);\n\n    // 4. Speak the response (e.g., \"Thanks Laxman. What is your phone number?\")\n    // NOTE: The updated speakResponse function will detect we are in \"Collection Mode\"\n    // and AUTOMATICALLY start listening when the speech finishes.\n    setAssistantState(\"speaking\");\n    speakResponse(result.response);\n\n    // 5. Only show success notice if the form somehow completed the whole flow immediately\n    if (result.action === \"EMAIL_SENT\") {\n      showNotice(\n        \"success\",\n        \" Email Sent\",\n        \"Laxman will respond soon! can i help you with anything else\",\n        3000\n      );\n    }\n    // Note: We don't handle 'CONTINUE_COLLECTION' here because speakResponse handles the loop\n  };\n  // Get voice status with enhanced descriptions\n  // const getVoiceStatus = () => {\n  //       //  Suggestions Array\n  //       const suggestions = [\n  //         deviceInfo.isMobile ? \"Tap  & say: \\\"I want to hire Laxman\\\"\" : \"Click  & say: \\\"I want to hire Laxman\\\"\",\n  //         \"Try saying: \\\"Give me a quick overview\\\"\",\n  //         \"Try saying: \\\"Send an email to Laxman\\\"\",\n  //         deviceInfo.isMobile ? \"Tap  to start speaking...\" : \"Click  avatar to start speaking...\"\n  //       ];\n  //   switch (assistantState) {\n  //     case 'listening':\n  //       return {\n  //         title: \"Listening...\",\n  //         subtitle: deviceInfo.isMobile ? \"Speak clearly!\" : \"Speak clearly, I'm listening carefully!\"\n  //       };\n  //     case 'thinking':\n  //       return {\n  //         title: \"Processing...\",\n  //         subtitle: deviceInfo.isMobile ? \"AI analyzing...\" : \"AI finding the perfect answer...\"\n  //       };\n  //     case 'speaking':\n  //       return {\n  //         title: \"Speaking...\",\n  //         subtitle: deviceInfo.isMobile ? \"Response playing\" : \"Delivering your response\"\n  //       };\n  //     default:\n  //       return {\n  //         title: deviceInfo.isMobile ? \"Laxman's AI Assistant\" : \"Laxman's Enhanced AI\",\n  //         subtitle: connectionStatus === 'connected'\n  //           // ? (deviceInfo.isMobile ? \"Tap  to start!\" : \"Click  avatar to start!\")\n  //           ? suggestions[suggestionIndex]\n  //           : connectionStatus === 'connecting'\n  //           ? \"Setting up voice features...\"\n  //           : (deviceInfo.isMobile ? \"Click  to enable microphone and start speaking\" : \"Click  to enable microphone and start speaking\")\n  //       };\n  //   }\n  // };\n  // Add this component at the top of your file (or in a separate icons file)\n\n  // ============= ANIMATED ICON COMPONENTS =============\n\n  const MicrophoneIcon = ({\n    className,\n    size = 24,\n    color = \"currentColor\",\n    animated = false,\n  }) => (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      className={className}\n      style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n    >\n      {animated && (\n        <style>\n          {`\n          @keyframes micPulse {\n            0%, 100% { transform: scale(1); opacity: 1; }\n            50% { transform: scale(1.1); opacity: 0.8; }\n          }\n          .mic-animated { animation: micPulse 1.5s ease-in-out infinite; }\n        `}\n        </style>\n      )}\n      <g className={animated ? \"mic-animated\" : \"\"}>\n        <rect\n          x=\"9\"\n          y=\"3\"\n          width=\"6\"\n          height=\"11\"\n          rx=\"3\"\n          stroke={color}\n          strokeWidth=\"2\"\n          fill=\"none\"\n        />\n        <path\n          d=\"M5 10v1a7 7 0 0014 0v-1\"\n          stroke={color}\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n        />\n        <line\n          x1=\"12\"\n          y1=\"18\"\n          x2=\"12\"\n          y2=\"21\"\n          stroke={color}\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n        />\n        <line\n          x1=\"8\"\n          y1=\"21\"\n          x2=\"16\"\n          y2=\"21\"\n          stroke={color}\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n        />\n      </g>\n    </svg>\n  );\n\n  const ThinkingIcon = ({ className, size = 24, color = \"currentColor\" }) => (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      className={className}\n      style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n    >\n      <style>\n        {`\n        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n        @keyframes dotFade {\n          0%, 100% { opacity: 0.2; }\n          50% { opacity: 1; }\n        }\n        .gear-rotate { transform-origin: center; animation: spin 3s linear infinite; }\n        .dot-1 { animation: dotFade 1.4s ease-in-out infinite; animation-delay: 0s; }\n        .dot-2 { animation: dotFade 1.4s ease-in-out infinite; animation-delay: 0.2s; }\n        .dot-3 { animation: dotFade 1.4s ease-in-out infinite; animation-delay: 0.4s; }\n      `}\n      </style>\n      <g className=\"gear-rotate\">\n        <circle\n          cx=\"12\"\n          cy=\"12\"\n          r=\"8\"\n          stroke={color}\n          strokeWidth=\"2\"\n          fill=\"none\"\n        />\n        <path\n          d=\"M12 4v3M12 17v3M4 12h3M17 12h3\"\n          stroke={color}\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n        />\n      </g>\n      <circle className=\"dot-1\" cx=\"8\" cy=\"12\" r=\"1.5\" fill={color} />\n      <circle className=\"dot-2\" cx=\"12\" cy=\"12\" r=\"1.5\" fill={color} />\n      <circle className=\"dot-3\" cx=\"16\" cy=\"12\" r=\"1.5\" fill={color} />\n    </svg>\n  );\n\n  const SpeakingIcon = ({ className, size = 24, color = \"currentColor\" }) => (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      className={className}\n      style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n    >\n      <style>\n        {`\n        @keyframes soundwave {\n          0%, 100% { height: 4px; }\n          50% { height: 16px; }\n        }\n        .wave-1 { animation: soundwave 1s ease-in-out infinite; animation-delay: 0s; }\n        .wave-2 { animation: soundwave 1s ease-in-out infinite; animation-delay: 0.15s; }\n        .wave-3 { animation: soundwave 1s ease-in-out infinite; animation-delay: 0.3s; }\n      `}\n      </style>\n      <path\n        d=\"M3 9v6c0 1.1.9 2 2 2h3l5 4V5L8 9H5c-1.1 0-2 .9-2 2z\"\n        stroke={color}\n        strokeWidth=\"2\"\n        fill={color}\n        fillOpacity=\"0.2\"\n      />\n      <rect\n        className=\"wave-1\"\n        x=\"16\"\n        y=\"10\"\n        width=\"2\"\n        height=\"4\"\n        rx=\"1\"\n        fill={color}\n      />\n      <rect\n        className=\"wave-2\"\n        x=\"19\"\n        y=\"8\"\n        width=\"2\"\n        height=\"8\"\n        rx=\"1\"\n        fill={color}\n      />\n      <rect\n        className=\"wave-3\"\n        x=\"22\"\n        y=\"6\"\n        width=\"2\"\n        height=\"12\"\n        rx=\"1\"\n        fill={color}\n      />\n    </svg>\n  );\n\n  const LockIcon = ({\n    className,\n    size = 24,\n    color = \"currentColor\",\n    locked = true,\n  }) => (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      className={className}\n      style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n    >\n      <style>\n        {`\n        @keyframes shake {\n          0%, 100% { transform: translateX(0); }\n          25% { transform: translateX(-2px); }\n          75% { transform: translateX(2px); }\n        }\n        .lock-shake:hover { animation: shake 0.5s ease-in-out; }\n      `}\n      </style>\n      <g className=\"lock-shake\">\n        <rect\n          x=\"6\"\n          y=\"10\"\n          width=\"12\"\n          height=\"10\"\n          rx=\"2\"\n          stroke={color}\n          strokeWidth=\"2\"\n          fill=\"none\"\n        />\n        <path\n          d={locked ? \"M8 10V7a4 4 0 018 0v3\" : \"M8 10V7a4 4 0 018 0v1\"}\n          stroke={color}\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n        />\n        <circle cx=\"12\" cy=\"15\" r=\"1.5\" fill={color} />\n      </g>\n    </svg>\n  );\n\n  const ChatBubbleIcon = ({\n    className,\n    size = 24,\n    color = \"currentColor\",\n    animated = false,\n  }) => (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      className={className}\n      style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n    >\n      {animated && (\n        <style>\n          {`\n          @keyframes bounce {\n            0%, 100% { transform: translateY(0); }\n            50% { transform: translateY(-3px); }\n          }\n          .chat-bounce { animation: bounce 2s ease-in-out infinite; }\n        `}\n        </style>\n      )}\n      <g className={animated ? \"chat-bounce\" : \"\"}>\n        <path\n          d=\"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"\n          stroke={color}\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          fill=\"none\"\n        />\n        <circle cx=\"9\" cy=\"12\" r=\"1\" fill={color} />\n        <circle cx=\"12\" cy=\"12\" r=\"1\" fill={color} />\n        <circle cx=\"15\" cy=\"12\" r=\"1\" fill={color} />\n      </g>\n    </svg>\n  );\n\n  const EmailIcon = ({ className, size = 24, color = \"currentColor\" }) => (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      className={className}\n      style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n    >\n      <rect\n        x=\"3\"\n        y=\"5\"\n        width=\"18\"\n        height=\"14\"\n        rx=\"2\"\n        stroke={color}\n        strokeWidth=\"2\"\n        fill=\"none\"\n      />\n      <path\n        d=\"M3 7l9 6 9-6\"\n        stroke={color}\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n\n  const SparkleIcon = ({ className, size = 24, color = \"currentColor\" }) => (\n    <svg\n      width={size}\n      height={size}\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      className={className}\n      style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n    >\n      <style>\n        {`\n        @keyframes sparkle {\n          0%, 100% { opacity: 1; transform: scale(1); }\n          50% { opacity: 0.5; transform: scale(0.8); }\n        }\n        .sparkle-anim { animation: sparkle 2s ease-in-out infinite; }\n      `}\n      </style>\n      <g className=\"sparkle-anim\">\n        <path\n          d=\"M12 2l2.5 7.5L22 12l-7.5 2.5L12 22l-2.5-7.5L2 12l7.5-2.5L12 2z\"\n          fill={color}\n          fillOpacity=\"0.8\"\n        />\n        <circle cx=\"18\" cy=\"6\" r=\"2\" fill={color} fillOpacity=\"0.6\" />\n      </g>\n    </svg>\n  );\n\n  // ============= ICON WRAPPER COMPONENT =============\n\n  const IconText = ({ icon, text, className = \"\" }) => (\n    <span\n      className={className}\n      style={{ display: \"inline-flex\", alignItems: \"center\", gap: \"8px\" }}\n    >\n      {icon}\n      <span>{text}</span>\n    </span>\n  );\n\n  // ============= ENHANCED GET VOICE STATUS FUNCTION =============\n\n  const getVoiceStatus = () => {\n    // Icon configuration\n    const iconSize = deviceInfo.isMobile ? 20 : 24;\n    const iconColor = \"currentColor\";\n\n    //  Enhanced Suggestions Array with Icons\n    const suggestions = [\n      {\n        text: deviceInfo.isMobile\n          ? 'Tap & say: \"I want to recruit Laxman\"'\n          : 'Click & say: \"I want to recruit Laxman\"',\n        icon: <ChatBubbleIcon size={iconSize} color={iconColor} animated />,\n      },\n      {\n        text: 'Try saying: \"Give me a quick overview\"',\n        icon: <SparkleIcon size={iconSize} color={iconColor} />,\n      },\n      {\n        text: 'Try saying: \"Send an email to Laxman\"',\n        icon: <EmailIcon size={iconSize} color={iconColor} />,\n      },\n      {\n        text: deviceInfo.isMobile\n          ? \"Tap to start speaking...\"\n          : \"Click avatar to start speaking...\",\n        icon: <MicrophoneIcon size={iconSize} color={iconColor} animated />,\n      },\n    ];\n\n    switch (assistantState) {\n      case \"listening\":\n        return {\n          title: (\n            <IconText\n              icon={<MicrophoneIcon size={iconSize} color=\"#10b981\" animated />}\n              text=\"Listening...\"\n            />\n          ),\n          subtitle: deviceInfo.isMobile\n            ? \"Speak clearly!\"\n            : \"Speak clearly, I'm listening carefully!\",\n        };\n\n      case \"thinking\":\n        return {\n          title: (\n            <IconText\n              icon={<ThinkingIcon size={iconSize} color=\"#3b82f6\" />}\n              text=\"Processing...\"\n            />\n          ),\n          subtitle: deviceInfo.isMobile\n            ? \"AI analyzing...\"\n            : \"AI finding the perfect answer...\",\n        };\n\n      case \"speaking\":\n        return {\n          title: (\n            <IconText\n              icon={<SpeakingIcon size={iconSize} color=\"#8b5cf6\" />}\n              text=\"Speaking...\"\n            />\n          ),\n          subtitle: deviceInfo.isMobile\n            ? \"Response playing\"\n            : \"Delivering your response\",\n        };\n\n      default:\n        return {\n          title: deviceInfo.isMobile\n            ? \"Laxman's AI Assistant\"\n            : \"Laxman's Enhanced AI\",\n          subtitle:\n            connectionStatus === \"connected\" ? (\n              <IconText\n                icon={suggestions[suggestionIndex]?.icon}\n                text={suggestions[suggestionIndex]?.text}\n              />\n            ) : connectionStatus === \"connecting\" ? (\n              <IconText\n                icon={<ThinkingIcon size={iconSize - 4} color={iconColor} />}\n                text=\"Setting up voice features...\"\n              />\n            ) : (\n              <IconText\n                icon={<LockIcon size={iconSize} color=\"#ef4444\" locked />}\n                text={\n                  deviceInfo.isMobile\n                    ? \"Click to enable microphone and start speaking\"\n                    : \"Click to enable microphone and start speaking\"\n                }\n              />\n            ),\n        };\n    }\n  };\n\n  useEffect(() => {\n    const checkServices = async () => {\n      console.log(\" Checking voice services...\");\n\n      if (!checkBrowserCompatibility()) {\n        setConnectionStatus(\"disconnected\");\n        return;\n      }\n\n      // Load voices early\n      loadVoices().then((success) => {\n        console.log(\" Voices loaded:\", success);\n      });\n\n      if (hasPermission) {\n        setConnectionStatus(\"connected\");\n        console.log(\" All services ready\");\n      } else {\n        setConnectionStatus(\"disconnected\");\n        console.log(\" Waiting for microphone permission\");\n      }\n    };\n\n    checkServices();\n  }, [\n    checkBrowserCompatibility,\n    hasPermission,\n    retryCount,\n    showNotice,\n    loadVoices,\n  ]);\n\n  // Auto mode effect\n  useEffect(() => {\n    autoModeRef.current = isAutoMode;\n  }, [isAutoMode]);\n\n  // Help timer with mobile adjustment\n  useEffect(() => {\n    const timer = setTimeout(\n      () => setShowHelp(false),\n      deviceInfo.isMobile ? 8000 : 10000\n    );\n    return () => clearTimeout(timer);\n  }, [deviceInfo.isMobile]);\n\n  // Enhanced cleanup\n  useEffect(() => {\n    return () => {\n      console.log(\" Cleaning up voice assistant...\");\n      stopAll();\n\n      if (noticeTimeoutRef.current) {\n        clearTimeout(noticeTimeoutRef.current);\n      }\n\n      if (permissionCheckTimeoutRef.current) {\n        clearTimeout(permissionCheckTimeoutRef.current);\n      }\n\n      if (speechTimeoutRef.current) {\n        clearTimeout(speechTimeoutRef.current);\n      }\n\n      if (\n        audioContextRef.current &&\n        audioContextRef.current.state !== \"closed\"\n      ) {\n        audioContextRef.current.suspend().catch(console.warn);\n      }\n    };\n  }, [stopAll]);\n\n  const statusText = getVoiceStatus();\n  const isDisabled = connectionStatus !== \"connected\" || !hasPermission;\n\n  if (!isVisible) return null;\n\n  return (\n    <>\n      <GlobalLiquidGlassStyles />\n\n      {/* Enhanced Notice */}\n      {notice && (\n        <NoticeCard\n          type={notice.type}\n          show={notice.show}\n          isMobile={deviceInfo.isMobile}\n          flatMode={flatMode}\n          theme={theme}\n        >\n          <div className=\"notice-title\">{notice.title}</div>\n          <div className=\"notice-content\">{notice.content}</div>\n        </NoticeCard>\n      )}\n      {/*  ADD EMAIL FORM MODAL */}\n      <EmailFormModal\n        show={showEmailForm}\n        onClose={() => setShowEmailForm(false)}\n        inquiryType={emailInquiryType}\n        onSubmit={handleEmailFormSubmit}\n        isMobile={deviceInfo.isMobile}\n        // themeMode={theme.name === 'light' ? 'light' : 'dark'}\n        themeMode={theme?.name === \"light\" ? \"light\" : \"dark\"}\n      />\n\n      {/* Enhanced Voice Assistant Container */}\n      <VoiceContainer\n        state={assistantState}\n        isClosing={isClosing}\n        isMobile={deviceInfo.isMobile}\n        isKeyboardOpen={isKeyboardOpen}\n        flatMode={flatMode}\n        motionReduce={motionReduce}\n      >\n        <ConnectionIndicator\n          status={connectionStatus}\n          isMobile={deviceInfo.isMobile}\n          motionReduce={motionReduce}\n          flatMode={flatMode}\n        />\n\n        <CloseButton\n          onClick={closeChat}\n          isMobile={deviceInfo.isMobile}\n          flatMode={flatMode}\n          theme={theme}\n        >\n          \n        </CloseButton>\n\n        <VoiceAvatar\n          state={assistantState}\n          disabled={isDisabled}\n          isMobile={deviceInfo.isMobile}\n          motionReduce={motionReduce}\n          flatMode={flatMode}\n          voiceIntensity={voiceIntensity}\n          title={\n            isDisabled\n              ? deviceInfo.isMobile\n                ? \"Tap to enable voice chat!\"\n                : \"Click to enable voice chat!\"\n              : \"\"\n          }\n          onClick={async () => {\n            if (isDisabled) {\n              if (!hasPermission) {\n                await requestMicrophonePermission();\n              }\n              return;\n            }\n\n            if (assistantState === \"idle\") {\n              // Initialize speech synthesis context (required for some browsers)\n              if (!window.speechSynthesis.speaking) {\n                const testUtterance = new SpeechSynthesisUtterance(\"\");\n                testUtterance.volume = 0;\n                window.speechSynthesis.speak(testUtterance);\n                window.speechSynthesis.cancel();\n              }\n\n              // First interaction: speak introduction then listen\n              if (isFirstInteraction) {\n                speakIntroduction();\n              } else {\n                // Subsequent interactions: directly start listening\n                startListening();\n              }\n            } else {\n              stopAll();\n            }\n          }}\n        >\n          {isDisabled\n            ? \"\"\n            : assistantState === \"listening\"\n            ? \"\"\n            : assistantState === \"thinking\"\n            ? \"\"\n            : assistantState === \"speaking\"\n            ? \"\"\n            : \"\"}\n        </VoiceAvatar>\n\n        <VoiceStatus\n          isMobile={deviceInfo.isMobile}\n          flatMode={flatMode}\n          theme={theme}\n        >\n          <div className=\"status-title\">{statusText.title}</div>\n          <div className=\"status-subtitle\">{statusText.subtitle}</div>\n        </VoiceStatus>\n\n        <VoiceWaves\n          state={assistantState}\n          isMobile={deviceInfo.isMobile}\n          motionReduce={motionReduce}\n          flatMode={flatMode}\n        >\n          {[...Array(deviceInfo.isMobile ? 5 : 7)].map((_, i) => (\n            <div\n              key={i}\n              className=\"wave-bar\"\n              style={{\n                height: `${4 + voiceIntensity * 24}px`,\n                opacity:\n                  assistantState === \"listening\" ||\n                  assistantState === \"speaking\"\n                    ? 0.6 + voiceIntensity * 0.4\n                    : 0,\n              }}\n            />\n          ))}\n        </VoiceWaves>\n\n        <InterimText\n          show={!!interimTranscript}\n          isMobile={deviceInfo.isMobile}\n          flatMode={flatMode}\n        >\n          \"{interimTranscript}\"\n        </InterimText>\n\n        <VoiceControls isMobile={deviceInfo.isMobile} flatMode={flatMode}>\n          <ButtonRow isMobile={deviceInfo.isMobile} flatMode={flatMode}>\n            <div style={{ textAlign: \"center\" }}>\n              <VoiceButton\n                onClick={assistantState === \"idle\" ? startListening : stopAll}\n                disabled={isDisabled}\n                active={assistantState !== \"idle\"}\n                buttonType=\"mic\"\n                isMobile={deviceInfo.isMobile}\n                motionReduce={motionReduce}\n                flatMode={flatMode}\n                title={\n                  assistantState === \"idle\"\n                    ? \"Ask one question\"\n                    : \"Stop current action\"\n                }\n              >\n                <div className=\"icon-wrapper\">\n                  <ButtonIcon\n                    type={assistantState === \"idle\" ? \"mic\" : \"stop\"}\n                  />\n                </div>\n              </VoiceButton>\n              <ButtonLabel\n                disabled={isDisabled}\n                isMobile={deviceInfo.isMobile}\n                theme={theme}\n              >\n                {deviceInfo.isMobile ? \"One Time\" : \"One Time\\nQuestion\"}\n              </ButtonLabel>\n            </div>\n\n            <div style={{ textAlign: \"center\" }}>\n              <VoiceButton\n                active={isAutoMode}\n                onClick={toggleAutoMode}\n                disabled={isDisabled}\n                buttonType=\"auto\"\n                isMobile={deviceInfo.isMobile}\n                motionReduce={motionReduce}\n                flatMode={flatMode}\n                title=\"Toggle continuous conversation mode\"\n              >\n                <div className=\"icon-wrapper\">\n                  <ButtonIcon type=\"auto\" />\n                </div>\n              </VoiceButton>\n              <ButtonLabel disabled={isDisabled} isMobile={deviceInfo.isMobile}>\n                {deviceInfo.isMobile ? \"Auto Mode\" : \"Auto\\nMode\"}\n              </ButtonLabel>\n            </div>\n\n            <div style={{ textAlign: \"center\" }}>\n              <VoiceButton\n                onClick={testTTS}\n                disabled={!(\"speechSynthesis\" in window)}\n                buttonType=\"test\"\n                isMobile={deviceInfo.isMobile}\n                motionReduce={motionReduce}\n                flatMode={flatMode}\n                title=\"Test voice output\"\n              >\n                <div className=\"icon-wrapper\">\n                  <ButtonIcon type=\"test\" />\n                </div>\n              </VoiceButton>\n              <ButtonLabel\n                disabled={!(\"speechSynthesis\" in window)}\n                isMobile={deviceInfo.isMobile}\n              >\n                {deviceInfo.isMobile ? \"Test Voice\" : \"Test\\nVoice\"}\n              </ButtonLabel>\n            </div>\n          </ButtonRow>\n\n          {!deviceInfo.isMobile && (\n            <ButtonRow isMobile={deviceInfo.isMobile} flatMode={flatMode}>\n              <div style={{ textAlign: \"center\" }}>\n                <VoiceButton\n                  onClick={toggleFlatMode}\n                  buttonType=\"3d\"\n                  active={!flatMode}\n                  isMobile={deviceInfo.isMobile}\n                  motionReduce={motionReduce}\n                  flatMode={flatMode}\n                  title=\"Toggle 3D/Flat mode\"\n                >\n                  <div className=\"icon-wrapper\">\n                    <ButtonIcon type={flatMode ? \"flat\" : \"3d\"} />\n                  </div>\n                </VoiceButton>\n                <ButtonLabel isMobile={deviceInfo.isMobile}>\n                  {flatMode ? \"Flat Mode\" : \"3D Mode\"}\n                </ButtonLabel>\n              </div>\n            </ButtonRow>\n          )}\n        </VoiceControls>\n\n        <HelpHint\n          show={\n            showHelp &&\n            assistantState === \"idle\" &&\n            connectionStatus === \"connected\"\n          }\n          isMobile={deviceInfo.isMobile}\n          flatMode={flatMode}\n          theme={theme}\n        >\n          {\" \"}\n          {deviceInfo.isMobile\n            ? 'Say \"Hello\" or ask about Laxman!'\n            : \"Experience agentic AI - navigate & explore!\"}\n        </HelpHint>\n      </VoiceContainer>\n    </>\n  );\n};\n\n// Main Export with Enhanced Liquid Glass\nconst LiquidGlassSiri = ({ onClose, theme }) => {\n  return <VoiceAssistant onClose={onClose} theme={theme} />;\n};\n\nexport default LiquidGlassSiri;\nexport { HeroTintSampler, PerformanceManager };\n","import React, { useState, useEffect, useRef } from \"react\";\nimport styled, { keyframes } from \"styled-components\";\n\n// Your portfolio data (keeping as is)\nconst LAXMAN_PORTFOLIO_DATA = `\nK LAXMAN - SOFTWARE DEVELOPMENT ENGINEER & AI SPECIALIST\n\n=== PROFESSIONAL SUMMARY ===\nSoftware Development Engineer at Computer Age Management Services (CAMS), Chennai (June 2024 - Present)\nIIT Delhi Alumni (2018-2024) - B.Tech + M.Tech in Computer Science & Engineering\nSpecialized in AI/ML, Financial Technology & Full Stack Development\nTeaching Assistant with 300+ students mentored | Enterprise AI Platform Developer\n\n=== CURRENT ROLE ===\nSoftware Development Engineer at Computer Age Management Services (CAMS)\n- Developed CamsLens Enterprise GenAI platform processing 80,000+ documents monthly with 95% accuracy\n- Implemented real-time RSS feed ingestion reducing manual monitoring by 80%\n- Designed AI-powered query APIs with 60% response time improvement\n- Built Ranking Chunks Algorithm for Vertex AI datastore optimization\n- Technologies: Vertex AI (Gemini-flash 2.0), Agent Builder, Google Cloud Run, BigQuery\n- Location: Chennai, Tamil Nadu\n- Duration: June 2024 - Present\n\n=== EDUCATION ===\nIndian Institute of Technology Delhi (July 2018 - May 2024)\n- Dual Degree: Bachelor's + Master's in Computer Science & Engineering\n- Location: New Delhi, India\n- Specialized in AI/ML, Computer Vision, and NLP\n- Teaching Assistant (Fall 2019 - Spring 2021): Mentored 300+ undergraduate students\n- Courses: Data Structures, Introduction to Programming, Advanced CS concepts\n\n=== TECHNICAL SKILLS ===\nProgramming Languages:\n- Java: Spring Boot, Spring Security, Maven\n- Python: Flask, FastAPI, OpenCV, Scikit-learn, Pandas, NumPy\n- JavaScript: Node.js, React, ES6+\n\nFull Stack Development:\n- Frontend: React.js, HTML5, CSS3, TailwindCSS, JavaScript\n- Backend: Node.js, Express.js, Python (Flask/FastAPI), Java Spring Boot\n- Databases: MySQL, PostgreSQL, MongoDB, H2, Google BigQuery\n- Web Technologies: REST APIs, GraphQL, WebSockets\n\nAI/ML & Data Science:\n- Frameworks: PyTorch, TensorFlow, Vertex AI Gen AI\n- Computer Vision: OpenCV, Layout Parser, MTL-TabNet, Dlib\n- NLP: spaCy, Large Language Models, Few-shot Learning\n- Specialized: Document Processing, Image Recognition, Facial Landmark Detection\n\nCloud & DevOps:\n- Google Cloud: Cloud Run, GCS, Vertex AI, BigQuery\n- AWS: Basic certification and services\n- Azure: Basic services\n- Containerization: Docker, Kubernetes\n- CI/CD: GitHub Actions, Jenkins, Git\n- Tools: Maven, npm, Postman, GCP SDK\n\n=== CONTACT ===\nEmail: Laxmankethavath5@gmail.com\nPhone: +91-9000063740\nLinkedIn: https://www.linkedin.com/in/k-laxman-44913a156\nGitHub: https://github.com/Laxman824\nPortfolio: https://laxman824.github.io\nLocation: Chennai, Tamil Nadu, India\n`;\n\n// ANIMATIONS\nconst loadingFade = keyframes`\n  0% { opacity: 0.4; }\n  50% { opacity: 1; }\n  100% { opacity: 0.4; }\n`;\n\nconst slideInUp = keyframes`\n  from {\n    transform: translateY(20px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n`;\n\nconst pulse = keyframes`\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n`;\n\nconst voicePulse = keyframes`\n  0% {\n    transform: scale(1);\n    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);\n  }\n  70% {\n    transform: scale(1.1);\n    box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);\n  }\n  100% {\n    transform: scale(1);\n    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);\n  }\n`;\n\nconst fadeIn = keyframes`\n  from { opacity: 0; }\n  to { opacity: 1; }\n`;\n\n// STYLED COMPONENTS (keeping all as is)\nconst AIContainer = styled.div`\n  width: 100%;\n  padding: 15px;\n  font-family: inherit;\n  background: linear-gradient(\n    135deg,\n    rgba(79, 70, 229, 0.05),\n    rgba(124, 58, 237, 0.05)\n  );\n  border-radius: 10px;\n  margin: 10px 0;\n  position: relative;\n`;\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n`;\n\nconst ControlButtons = styled.div`\n  display: flex;\n  gap: 8px;\n`;\n\nconst IconButton = styled.button`\n  background: rgba(79, 70, 229, 0.1);\n  border: 1px solid rgba(79, 70, 229, 0.2);\n  color: #4f46e5;\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 16px;\n  transition: all 0.3s ease;\n  position: relative;\n\n  &:hover {\n    background: rgba(79, 70, 229, 0.2);\n    transform: translateY(-2px);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst Badge = styled.span`\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  background: #ef4444;\n  color: white;\n  font-size: 10px;\n  padding: 2px 5px;\n  border-radius: 10px;\n  font-weight: bold;\n`;\n\nconst ChatHistoryContainer = styled.div`\n  max-height: 300px;\n  overflow-y: auto;\n  margin: 15px 0;\n  padding: 10px;\n  background: rgba(255, 255, 255, 0.5);\n  border-radius: 8px;\n  border: 1px solid rgba(79, 70, 229, 0.1);\n  animation: ${slideInUp} 0.5s ease;\n\n  &::-webkit-scrollbar {\n    width: 6px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: rgba(79, 70, 229, 0.05);\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: rgba(79, 70, 229, 0.3);\n    border-radius: 3px;\n  }\n`;\n\nconst ChatMessage = styled.div`\n  margin: 8px 0;\n  padding: 10px;\n  border-radius: 8px;\n  background: ${(props) =>\n    props.type === \"user\"\n      ? \"linear-gradient(135deg, #4F46E5, #7C3AED)\"\n      : \"rgba(255, 255, 255, 0.9)\"};\n  color: ${(props) => (props.type === \"user\" ? \"white\" : \"#374151\")};\n  animation: ${fadeIn} 0.3s ease;\n\n  .timestamp {\n    font-size: 11px;\n    opacity: 0.7;\n    margin-top: 5px;\n  }\n\n  .message-header {\n    font-size: 12px;\n    font-weight: 600;\n    margin-bottom: 5px;\n    opacity: 0.8;\n  }\n`;\n\n// const InputContainer = styled.div`\n//   display: flex;\n//   align-items: center;\n//   gap: 8px;\n//   margin-top: 10px;\n//   position: relative;\n// `;\nconst InputContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 15px;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    gap: 6px;\n  }\n`;\n\nconst AIInput = styled.input`\n  flex: 1; /* Takes up remaining space */\n  min-width: 90; /* Prevents overflow */\n  padding: 12px 16px;\n  border: 2px solid #4a90e2;\n  border-radius: 8px;\n  font-size: 14px;\n  outline: none;\n\n  @media (max-width: 768px) {\n    padding: 10px 12px;\n    font-size: 13px;\n  }\n\n  &:focus {\n    border-color: #357abd;\n    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);\n  }\n\n  &:disabled {\n    background-color: #f5f5f5;\n    cursor: not-allowed;\n  }\n`;\n\n// const AIInput = styled.input`\n//   flex: 1;\n//   padding: 12px;\n//   padding-right: ${props => props.hasShortcut ? '100px' : '12px'};\n//   border: 2px solid #e1e5e9;\n//   border-radius: 8px;\n//   font-size: 16px;\n//   box-sizing: border-box;\n//   transition: all 0.3s ease;\n\n//   &:focus {\n//     outline: none;\n//     border-color: rgb(229, 228, 240);\n//     box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);\n//   }\n// `;\n\nconst ShortcutHint = styled.div`\n  position: absolute;\n  right: 70px;\n  top: 50%;\n  transform: translateY(-50%);\n  font-size: 12px;\n  color: #9ca3af;\n  background: rgba(255, 255, 255, 0.9);\n  padding: 4px 8px;\n  border-radius: 4px;\n  pointer-events: none;\n`;\n\nconst VoiceButton = styled.button`\n  width: 45px;\n  height: 45px;\n  border-radius: 50%;\n  border: none;\n  background: ${(props) => (props.isListening ? \"#ef4444\" : \"#4F46E5\")};\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  transition: all 0.3s ease;\n  animation: ${(props) => (props.isListening ? voicePulse : \"none\")} 1.5s\n    infinite;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`;\n\nconst TypingContainer = styled.div`\n  display: inline-flex;\n  align-items: center;\n  margin: 15px 0;\n  padding: 12px;\n  background: rgba(79, 70, 229, 0.05);\n  border-radius: 8px;\n  animation: ${slideInUp} 0.5s ease;\n`;\n\nconst TypingDot = styled.span`\n  height: 8px;\n  width: 8px;\n  margin: 0 2px;\n  background-color: rgb(250, 249, 251);\n  border-radius: 50%;\n  animation: ${loadingFade} 1s infinite;\n\n  &:nth-child(2) {\n    animation-delay: 0.2s;\n  }\n\n  &:nth-child(3) {\n    animation-delay: 0.4s;\n  }\n\n  &:nth-child(4) {\n    animation-delay: 0.6s;\n  }\n`;\n\nconst AnimatedResponse = styled.div`\n  margin-top: 15px;\n  padding: 15px;\n  background: linear-gradient(\n    135deg,\n    rgba(255, 255, 255, 0.9),\n    rgba(245, 247, 250, 0.8)\n  );\n  border-radius: 12px;\n  border-left: 4px solid #4f46e5;\n  line-height: 1.6;\n  color: #374151;\n  animation: ${slideInUp} 0.6s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n`;\n\nconst RatingContainer = styled.div`\n  display: flex;\n  gap: 10px;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(79, 70, 229, 0.1);\n`;\n\nconst RatingButton = styled.button`\n  background: ${(props) =>\n    props.active ? \"rgba(79, 70, 229, 0.2)\" : \"rgba(79, 70, 229, 0.05)\"};\n  border: 1px solid\n    ${(props) =>\n      props.active ? \"rgba(79, 70, 229, 0.4)\" : \"rgba(79, 70, 229, 0.1)\"};\n  color: #4f46e5;\n  padding: 6px 12px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 13px;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  transition: all 0.3s ease;\n  opacity: ${(props) => (props.active ? 1 : 0.7)};\n\n  &:hover {\n    background: rgba(79, 70, 229, 0.2);\n    transform: translateY(-1px);\n  }\n`;\n\nconst SuggestionsContainer = styled.div`\n  margin-top: 15px;\n  padding: 12px;\n  background: rgba(79, 70, 229, 0.02);\n  border-radius: 10px;\n  border: 1px solid rgba(79, 70, 229, 0.1);\n  animation: ${slideInUp} 0.7s ease;\n`;\n\nconst SuggestionChip = styled.button`\n  background: linear-gradient(135deg, #4f46e5, rgb(163, 97, 249));\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 20px;\n  margin: 4px 6px 4px 0;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 500;\n  transition: all 0.3s ease;\n  animation: ${pulse} 0.3s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);\n  }\n`;\n\nconst ActionButton = styled.button`\n  background: ${(props) =>\n    props.variant === \"primary\"\n      ? \"linear-gradient(135deg, #22C55E, #16A34A)\"\n      : \"rgba(79, 70, 229, 0.1)\"};\n  color: ${(props) => (props.variant === \"primary\" ? \"white\" : \"#4F46E5\")};\n  border: ${(props) =>\n    props.variant === \"primary\" ? \"none\" : \"1px solid rgba(79, 70, 229, 0.2)\"};\n  padding: 10px 16px;\n  border-radius: 8px;\n  margin: 6px 8px 6px 0;\n  cursor: pointer;\n  font-size: 13px;\n  font-weight: 500;\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  transition: all 0.3s ease;\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: ${(props) =>\n      props.variant === \"primary\"\n        ? \"0 4px 12px rgba(34, 197, 94, 0.3)\"\n        : \"0 4px 12px rgba(79, 70, 229, 0.2)\"};\n  }\n`;\n\nconst ErrorMessage = styled.div`\n  margin-top: 15px;\n  padding: 12px;\n  background: rgba(239, 68, 68, 0.1);\n  border-radius: 8px;\n  border-left: 4px solid #ef4444;\n  color: #dc2626;\n  animation: ${slideInUp} 0.5s ease;\n`;\n\nconst KeyboardShortcutsModal = styled.div`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background: white;\n  padding: 25px;\n  border-radius: 12px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);\n  z-index: 1000;\n  max-width: 400px;\n  animation: ${slideInUp} 0.3s ease;\n\n  h3 {\n    margin: 0 0 20px 0;\n    color: #4f46e5;\n  }\n\n  .shortcut-item {\n    display: flex;\n    justify-content: space-between;\n    padding: 8px 0;\n    border-bottom: 1px solid #e5e7eb;\n\n    &:last-child {\n      border-bottom: none;\n    }\n  }\n\n  .key {\n    background: #f3f4f6;\n    padding: 4px 8px;\n    border-radius: 4px;\n    font-family: monospace;\n    font-size: 12px;\n  }\n\n  .close-button {\n    position: absolute;\n    top: 15px;\n    right: 15px;\n    background: none;\n    border: none;\n    font-size: 20px;\n    cursor: pointer;\n    color: #9ca3af;\n\n    &:hover {\n      color: #4b5563;\n    }\n  }\n`;\n\nconst Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 999;\n  animation: ${fadeIn} 0.3s ease;\n`;\n\n// HELPER COMPONENTS\n\n// Typing Component\nconst Typing = () => (\n  <TypingContainer>\n    <span style={{ marginRight: \"10px\", color: \"#FFFFFF\", fontWeight: \"500\" }}>\n      AI is thinking\n    </span>\n    <TypingDot />\n    <TypingDot />\n    <TypingDot />\n  </TypingContainer>\n);\n\n// Typewriter Effect Component\nconst TypewriterText = ({ text, onComplete, speed = 30 }) => {\n  const [displayText, setDisplayText] = useState(\"\");\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  useEffect(() => {\n    if (currentIndex < text.length) {\n      const timeout = setTimeout(() => {\n        setDisplayText((prev) => prev + text[currentIndex]);\n        setCurrentIndex((prev) => prev + 1);\n      }, speed);\n      return () => clearTimeout(timeout);\n    } else if (onComplete) {\n      setTimeout(onComplete, 500);\n    }\n  }, [currentIndex, text, onComplete, speed]);\n\n  return (\n    <div>\n      {displayText}\n      {currentIndex < text.length && (\n        <span\n          style={{\n            opacity: 0.7,\n            animation: \"blink 1s infinite\",\n            marginLeft: \"2px\",\n          }}\n        >\n          \n        </span>\n      )}\n    </div>\n  );\n};\n\n// Response Rating Component\nconst ResponseRating = ({ responseId }) => {\n  const [rating, setRating] = useState(null);\n\n  const handleRating = (value) => {\n    setRating(value);\n    console.log(`Response ${responseId} rated: ${value}`);\n    // You can send this to analytics or backend\n  };\n\n  return (\n    <RatingContainer>\n      <span style={{ fontSize: \"13px\", color: \"#6B7280\" }}>\n        Was this helpful?\n      </span>\n      <RatingButton\n        active={rating === \"helpful\"}\n        onClick={() => handleRating(\"helpful\")}\n      >\n         Yes\n      </RatingButton>\n      <RatingButton\n        active={rating === \"not-helpful\"}\n        onClick={() => handleRating(\"not-helpful\")}\n      >\n         No\n      </RatingButton>\n    </RatingContainer>\n  );\n};\n\n// Chat History Component\nconst ChatHistory = ({ messages }) => {\n  const messagesEndRef = useRef(null);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  if (messages.length === 0) return null;\n\n  return (\n    <ChatHistoryContainer>\n      {messages.map((msg, index) => (\n        <ChatMessage key={index} type={msg.type}>\n          <div className=\"message-header\">\n            {msg.type === \"user\" ? \" You\" : \" AI Assistant\"}\n          </div>\n          <div>{msg.message}</div>\n          <div className=\"timestamp\">\n            {new Date(msg.timestamp).toLocaleTimeString()}\n          </div>\n        </ChatMessage>\n      ))}\n      <div ref={messagesEndRef} />\n    </ChatHistoryContainer>\n  );\n};\n\n// Smart Suggestions Component\nconst SmartSuggestions = ({ lastQuestion, onSuggestionClick }) => {\n  const getSuggestions = (question) => {\n    if (!question)\n      return [\n        \"Who is Laxman?\",\n        \"What's his current role?\",\n        \"Tell me about his education\",\n      ];\n\n    const q = question.toLowerCase();\n    if (\n      q.includes(\"project\") ||\n      q.includes(\"built\") ||\n      q.includes(\"developed\")\n    ) {\n      return [\n        \"Show me CAMSLENS project details\",\n        \"Explain the Stock Exchange Platform\",\n        \"Tell me about AI projects\",\n      ];\n    }\n    if (q.includes(\"skill\") || q.includes(\"technology\") || q.includes(\"tech\")) {\n      return [\n        \"What AI/ML skills does he have?\",\n        \"Show his React expertise\",\n        \"Tell me about cloud experience\",\n      ];\n    }\n    if (q.includes(\"contact\") || q.includes(\"reach\") || q.includes(\"hire\")) {\n      return [\n        \"How can I contact him?\",\n        \"Get his LinkedIn profile\",\n        \"Download his resume\",\n      ];\n    }\n    return [\n      \"Show me more projects\",\n      \"How can I contact him?\",\n      \"What makes him unique?\",\n    ];\n  };\n\n  const suggestions = getSuggestions(lastQuestion);\n\n  return (\n    <SuggestionsContainer>\n      <p\n        style={{\n          fontSize: \"13px\",\n          color: \"#FFFFFF\",\n          margin: \"0 0 10px 0\",\n          fontWeight: \"500\",\n        }}\n      >\n        You might also want to know:\n      </p>\n      {suggestions.map((suggestion, index) => (\n        <SuggestionChip\n          key={index}\n          onClick={() => onSuggestionClick(suggestion.replace(\"?\", \"\"))}\n        >\n          {suggestion}\n        </SuggestionChip>\n      ))}\n    </SuggestionsContainer>\n  );\n};\n\n// Quick Action Buttons Component\nconst QuickActions = ({ lastQuestion }) => {\n  const getActions = () => {\n    const q = lastQuestion?.toLowerCase() || \"\";\n    if (q.includes(\"project\") || q.includes(\"portfolio\")) {\n      return [\n        {\n          icon: \"\",\n          label: \"View Live Projects\",\n          variant: \"primary\",\n          action: () => window.open(\"https://github.com/Laxman824\", \"_blank\"),\n        },\n        {\n          icon: \"\",\n          label: \"See GitHub\",\n          variant: \"primary\",\n          action: () => window.open(\"https://github.com/Laxman824\", \"_blank\"),\n        },\n      ];\n    }\n    if (q.includes(\"contact\") || q.includes(\"hire\") || q.includes(\"reach\")) {\n      return [\n        {\n          icon: \"\",\n          label: \"Send Email\",\n          variant: \"primary\",\n          action: () =>\n            window.open(\"mailto:laxmankethavath5@gmail.com\", \"_blank\"),\n        },\n        {\n          icon: \"\",\n          label: \"LinkedIn\",\n          variant: \"primary\",\n          action: () =>\n            window.open(\n              \"https://www.linkedin.com/in/k-laxman-44913a156\",\n              \"_blank\"\n            ),\n        },\n        {\n          icon: \"\",\n          label: \"Download Resume\",\n          variant: \"primary\",\n          action: () =>\n            window.open(\n              \"https://drive.google.com/file/d/1aKH71pAlFOGhlEqr3gnJ6A8BFhdkcUrP/view\",\n              \"_blank\"\n            ),\n        },\n      ];\n    }\n    return [\n      {\n        icon: \"\",\n        label: \"View Resume\",\n        variant: \"primary\",\n        action: () =>\n          window.open(\n            \"https://drive.google.com/file/d/1aKH71pAlFOGhlEqr3gnJ6A8BFhdkcUrP/view\",\n            \"_blank\"\n          ),\n      },\n      {\n        icon: \"\",\n        label: \"GitHub\",\n        variant: \"primary\",\n        action: () => window.open(\"https://github.com/Laxman824\", \"_blank\"),\n      },\n    ];\n  };\n\n  const actions = getActions();\n\n  return actions.length > 0 ? (\n    <div style={{ marginTop: \"15px\" }}>\n      <p\n        style={{\n          fontSize: \"13px\",\n          color: \"#FFFFFF\",\n          margin: \"0 0 10px 0\",\n          fontWeight: \"500\",\n        }}\n      >\n        Quick Actions:\n      </p>\n      {actions.map((action, index) => (\n        <ActionButton\n          key={index}\n          variant={action.variant}\n          onClick={action.action}\n        >\n          {action.icon} {action.label}\n        </ActionButton>\n      ))}\n    </div>\n  ) : null;\n};\n\n// Voice Input Component\nconst VoiceInput = ({ onResult, disabled }) => {\n  const [isListening, setIsListening] = useState(false);\n  const [isSupported, setIsSupported] = useState(true);\n\n  useEffect(() => {\n    setIsSupported(\n      \"webkitSpeechRecognition\" in window || \"SpeechRecognition\" in window\n    );\n  }, []);\n\n  const startListening = () => {\n    if (!isSupported || disabled) return;\n\n    const SpeechRecognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n    const recognition = new SpeechRecognition();\n\n    recognition.continuous = false;\n    recognition.interimResults = false;\n    recognition.lang = \"en-US\";\n\n    recognition.onstart = () => setIsListening(true);\n    recognition.onend = () => setIsListening(false);\n\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      onResult(transcript);\n      setIsListening(false);\n    };\n\n    recognition.onerror = () => setIsListening(false);\n\n    recognition.start();\n  };\n\n  if (!isSupported) return null;\n\n  return (\n    <VoiceButton\n      isListening={isListening}\n      onClick={startListening}\n      disabled={disabled}\n      title={isListening ? \"Listening...\" : \"Click to speak\"}\n    >\n      \n    </VoiceButton>\n  );\n};\n\n// Keyboard Shortcuts Modal\nconst KeyboardShortcuts = ({ isOpen, onClose }) => {\n  if (!isOpen) return null;\n\n  return (\n    <>\n      <Overlay onClick={onClose} />\n      <KeyboardShortcutsModal>\n        <button className=\"close-button\" onClick={onClose}>\n          \n        </button>\n        <h3> Keyboard Shortcuts</h3>\n        <div className=\"shortcut-item\">\n          <span>Focus search</span>\n          <span className=\"key\">Ctrl/Cmd + K</span>\n        </div>\n        <div className=\"shortcut-item\">\n          <span>Clear input</span>\n          <span className=\"key\">Esc</span>\n        </div>\n        <div className=\"shortcut-item\">\n          <span>Clear chat history</span>\n          <span className=\"key\">Ctrl/Cmd + L</span>\n        </div>\n        <div className=\"shortcut-item\">\n          <span>Export chat</span>\n          <span className=\"key\">Ctrl/Cmd + E</span>\n        </div>\n        <div className=\"shortcut-item\">\n          <span>Toggle history</span>\n          <span className=\"key\">Ctrl/Cmd + H</span>\n        </div>\n      </KeyboardShortcutsModal>\n    </>\n  );\n};\n\n// MAIN COMPONENT\nconst AIAssistant = ({ triggerNextStep, initialQuestion }) => {\n  const [loading, setLoading] = useState(false);\n  const [response, setResponse] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [lastQuestion, setLastQuestion] = useState(\"\");\n  const [inputValue, setInputValue] = useState(\"\");\n  const [showTypewriter, setShowTypewriter] = useState(false);\n  const [rawResponse, setRawResponse] = useState(\"\");\n  const [chatHistory, setChatHistory] = useState([]);\n  const [showHistory, setShowHistory] = useState(false);\n  const [showShortcuts, setShowShortcuts] = useState(false);\n  const [currentResponseId, setCurrentResponseId] = useState(null);\n  const [\n    hasProcessedInitialQuestion,\n    setHasProcessedInitialQuestion,\n  ] = useState(false);\n  const inputRef = useRef(null);\n\n  // **IMPORTANT: Replace with your actual API key**\n  const GEMINI_API_KEY = \"AIzaSyCBDJsqgohGLi6R2c7X3IXE6tozlYcO5-4\";\n\n  // Fallback responses\n  const getFallbackResponse = (question) => {\n    const q = question.toLowerCase();\n    if (q.includes(\"who\") || q.includes(\"laxman\") || q.includes(\"you\")) {\n      return \"Laxman is a Software Development Engineer at CAMS with expertise in AI/ML and full-stack development. He's an IIT Delhi alumnus (2018-2024) with dual degrees in Computer Science, specializing in enterprise AI platforms and financial technology solutions.\";\n    }\n    if (q.includes(\"contact\") || q.includes(\"reach\") || q.includes(\"email\")) {\n      return \"You can reach Laxman at laxmankethavath5@gmail.com or call +91-9000063740. He's also available on LinkedIn and actively maintains his GitHub portfolio.\";\n    }\n    if (q.includes(\"project\")) {\n      return \"Laxman has built impressive projects including CAMSLENS Enterprise AI platform processing 80,000+ documents monthly, an AI-powered email automation system with 95% accuracy, and a real-time stock exchange platform supporting 100+ concurrent users.\";\n    }\n    if (q.includes(\"skill\") || q.includes(\"technology\")) {\n      return \"Laxman is proficient in Java (Spring Boot), Python (Flask, FastAPI, ML libraries), JavaScript (React, Node.js), and cloud platforms (Google Cloud, AWS). He specializes in AI/ML with experience in Vertex AI, PyTorch, and computer vision technologies.\";\n    }\n    if (q.includes(\"education\") || q.includes(\"study\")) {\n      return \"Laxman completed his dual degree (B.Tech + M.Tech) in Computer Science from IIT Delhi (2018-2024). He also served as a Teaching Assistant, mentoring over 300 undergraduate students in core CS concepts.\";\n    }\n    if (q.includes(\"current\") || q.includes(\"now\") || q.includes(\"role\")) {\n      return \"Currently, Laxman works as a Software Development Engineer at CAMS in Chennai, where he develops the CAMSLENS Enterprise GenAI platform and implements cutting-edge AI solutions for financial document processing.\";\n    }\n    return \"Laxman is a talented Software Development Engineer at CAMS with strong expertise in AI/ML and full-stack development. He has built multiple enterprise-level projects and brings valuable experience from IIT Delhi. Would you like to know more about his specific projects or technical skills?\";\n  };\n\n  // Handle user message with Gemini API\n  const handleUserMessage = React.useCallback(\n    async (value) => {\n      if (!value.trim()) return;\n\n      console.log(\"Processing question:\", value);\n      setLoading(true);\n      setResponse(\"\");\n      setError(\"\");\n      setShowTypewriter(false);\n      setLastQuestion(value);\n\n      // Add user message to history\n      const userMessage = {\n        type: \"user\",\n        message: value,\n        timestamp: Date.now(),\n      };\n      setChatHistory((prev) => [...prev, userMessage]);\n\n      try {\n        const contextPrompt = `You are Laxman's portfolio assistant. Answer this question about Laxman based on his background:\n\n${LAXMAN_PORTFOLIO_DATA}\n\nGuidelines:\n- Always respond in a professional, friendly, and confident tone.\n- Keep answers concise (2-3 sentences / 50-120 words depending on question).\n- If asked about projects, highlight impact, tech stack, and achievements.\n- If asked about skills, give a practical, use-case oriented explanation.\n\nQuestion: ${value}`;\n\n        console.log(\"Sending AI request to Gemini...\");\n\n        // **Call Gemini API**\n        const response = await fetch(\n          \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyCBDJsqgohGLi6R2c7X3IXE6tozlYcO5-4\",\n          {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              contents: [\n                {\n                  parts: [\n                    {\n                      text: contextPrompt,\n                    },\n                  ],\n                },\n              ],\n              generationConfig: {\n                temperature: 0.7,\n                maxOutputTokens: 800,\n              },\n            }),\n          }\n        );\n\n        if (!response.ok) {\n          throw new Error(`API Error: ${response.status}`);\n        }\n\n        const data = await response.json();\n        console.log(\"Gemini API Response:\", data);\n\n        // Extract text from Gemini response\n        const aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text;\n\n        if (aiResponse && aiResponse.trim()) {\n          console.log(\"Successfully extracted content:\", aiResponse);\n          setRawResponse(aiResponse);\n          setShowTypewriter(true);\n          setCurrentResponseId(Date.now());\n\n          // Add AI response to history\n          const aiMessage = {\n            type: \"ai\",\n            message: aiResponse,\n            timestamp: Date.now(),\n          };\n          setChatHistory((prev) => [...prev, aiMessage]);\n        } else {\n          // Fallback if no response\n          console.error(\"Could not extract content from Gemini response\");\n          const fallbackResponse = getFallbackResponse(value);\n          setRawResponse(fallbackResponse);\n          setShowTypewriter(true);\n          setCurrentResponseId(Date.now());\n\n          const aiMessage = {\n            type: \"ai\",\n            message: fallbackResponse,\n            timestamp: Date.now(),\n          };\n          setChatHistory((prev) => [...prev, aiMessage]);\n        }\n      } catch (err) {\n        console.error(\"AI Error:\", err);\n        const fallbackResponse = getFallbackResponse(value);\n        setRawResponse(fallbackResponse);\n        setShowTypewriter(true);\n        setCurrentResponseId(Date.now());\n\n        const aiMessage = {\n          type: \"ai\",\n          message: fallbackResponse,\n          timestamp: Date.now(),\n        };\n        setChatHistory((prev) => [...prev, aiMessage]);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [GEMINI_API_KEY]\n  );\n\n  // Handle initial question\n  useEffect(() => {\n    if (\n      initialQuestion &&\n      initialQuestion.trim() &&\n      !hasProcessedInitialQuestion\n    ) {\n      console.log(\"Auto-processing initial question:\", initialQuestion);\n      setInputValue(initialQuestion);\n      setHasProcessedInitialQuestion(true);\n\n      const timeoutId = setTimeout(() => {\n        handleUserMessage(initialQuestion.trim());\n      }, 500);\n\n      return () => clearTimeout(timeoutId);\n    }\n  }, [initialQuestion, hasProcessedInitialQuestion, handleUserMessage]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyPress = (e) => {\n      // Ctrl/Cmd + K to focus input\n      if ((e.ctrlKey || e.metaKey) && e.key === \"k\") {\n        e.preventDefault();\n        inputRef.current?.focus();\n      }\n      // Escape to clear input\n      if (e.key === \"Escape\" && document.activeElement === inputRef.current) {\n        setInputValue(\"\");\n      }\n      // Ctrl/Cmd + L to clear history\n      if ((e.ctrlKey || e.metaKey) && e.key === \"l\") {\n        e.preventDefault();\n        setChatHistory([]);\n      }\n      // Ctrl/Cmd + E to export chat\n      if ((e.ctrlKey || e.metaKey) && e.key === \"e\") {\n        e.preventDefault();\n        exportChat();\n      }\n      // Ctrl/Cmd + H to toggle history\n      if ((e.ctrlKey || e.metaKey) && e.key === \"h\") {\n        e.preventDefault();\n        setShowHistory((prev) => !prev);\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyPress);\n    return () => window.removeEventListener(\"keydown\", handleKeyPress);\n  }, [chatHistory]);\n\n  // Export chat function\n  const exportChat = () => {\n    if (chatHistory.length === 0) {\n      alert(\"No chat history to export\");\n      return;\n    }\n\n    const chatText = `Laxman's Portfolio AI Assistant - Chat Export\nDate: ${new Date().toLocaleString()}\n${\"=\".repeat(50)}\n\n${chatHistory\n  .map(\n    (item) => `\n${item.type === \"user\" ? \" You\" : \" AI\"}:\n${item.message}\nTime: ${new Date(item.timestamp).toLocaleTimeString()}\n${\"-\".repeat(30)}\n`\n  )\n  .join(\"\\n\")}`;\n\n    const blob = new Blob([chatText], { type: \"text/plain\" });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `laxman-portfolio-chat-${Date.now()}.txt`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  };\n\n  // Clear chat history\n  const clearHistory = () => {\n    if (\n      chatHistory.length === 0 ||\n      window.confirm(\"Are you sure you want to clear chat history?\")\n    ) {\n      setChatHistory([]);\n      setResponse(\"\");\n      setError(\"\");\n      setHasProcessedInitialQuestion(false);\n    }\n  };\n\n  const handleKeyDown = async (e) => {\n    if (e.key === \"Enter\" && inputValue.trim()) {\n      await handleUserMessage(inputValue.trim());\n      setInputValue(\"\");\n    }\n  };\n\n  const handleVoiceResult = (transcript) => {\n    setInputValue(transcript);\n    handleUserMessage(transcript);\n  };\n\n  const handleSuggestionClick = (suggestion) => {\n    setInputValue(suggestion);\n    handleUserMessage(suggestion);\n  };\n\n  const onTypewriterComplete = () => {\n    setResponse(rawResponse);\n    setShowTypewriter(false);\n  };\n\n  return (\n    <AIContainer>\n      <HeaderContainer>\n        <div>\n          <h4 style={{ margin: \"0 0 5px 0\", color: \"#FFFFFF\" }}>\n             Ask me anything about Laxman!\n          </h4>\n          <p style={{ margin: 0, fontSize: \"14px\", color: \"#FFFFFF\" }}>\n            I know all about him.\n          </p>\n        </div>\n        <ControlButtons>\n          <IconButton\n            onClick={() => setShowHistory(!showHistory)}\n            title=\"Toggle chat history (Ctrl+H)\"\n          >\n            \n            {chatHistory.length > 0 && <Badge>{chatHistory.length}</Badge>}\n          </IconButton>\n          <IconButton\n            onClick={exportChat}\n            disabled={chatHistory.length === 0}\n            title=\"Export chat (Ctrl+E)\"\n          >\n            \n          </IconButton>\n          <IconButton\n            onClick={clearHistory}\n            disabled={chatHistory.length === 0}\n            title=\"Clear history (Ctrl+L)\"\n          >\n            \n          </IconButton>\n        </ControlButtons>\n      </HeaderContainer>\n\n      {showHistory && <ChatHistory messages={chatHistory} />}\n\n      <InputContainer>\n        <AIInput\n          ref={inputRef}\n          type=\"text\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          placeholder={\n            initialQuestion && !hasProcessedInitialQuestion\n              ? `Processing: \"${initialQuestion}\"...`\n              : \"Try: 'Who is Laxman?' or use voice input \"\n          }\n          disabled={loading}\n          onKeyDown={handleKeyDown}\n          hasShortcut={true}\n        />\n        <IconButton\n          onClick={() => {\n            if (inputValue.trim()) {\n              handleUserMessage(inputValue.trim());\n              setInputValue(\"\");\n            }\n          }}\n          disabled={loading || !inputValue.trim()}\n          title=\"Send message\"\n          style={{ marginLeft: \"8px\" }}\n        >\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"white\">\n            <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\" />\n          </svg>\n        </IconButton>\n\n        <VoiceInput onResult={handleVoiceResult} disabled={loading} />\n      </InputContainer>\n\n      {loading && <Typing />}\n\n      {showTypewriter && rawResponse && (\n        <AnimatedResponse>\n          <TypewriterText\n            text={rawResponse}\n            onComplete={onTypewriterComplete}\n            speed={25}\n          />\n        </AnimatedResponse>\n      )}\n\n      {response && !loading && !showTypewriter && (\n        <AnimatedResponse>\n          {response}\n          <ResponseRating responseId={currentResponseId} />\n        </AnimatedResponse>\n      )}\n\n      {error && !loading && <ErrorMessage> {error}</ErrorMessage>}\n\n      {!loading && (response || error) && (\n        <QuickActions lastQuestion={lastQuestion} />\n      )}\n\n      <SmartSuggestions\n        lastQuestion={lastQuestion}\n        onSuggestionClick={handleSuggestionClick}\n      />\n\n      <KeyboardShortcuts\n        isOpen={showShortcuts}\n        onClose={() => setShowShortcuts(false)}\n      />\n\n      <style jsx>{`\n        @keyframes blink {\n          0%,\n          50% {\n            opacity: 1;\n          }\n          51%,\n          100% {\n            opacity: 0;\n          }\n        }\n      `}</style>\n    </AIContainer>\n  );\n};\n\nexport default AIAssistant;\n","import React, { useState, useEffect } from \"react\";\nimport Lottie from \"lottie-react\";\nimport chatbotLottie from \"./chatbot_lottie.json\";\nimport ChatBot from \"react-simple-chatbot\";\nimport { ThemeProvider } from \"styled-components\";\nimport Siri from \"./Siri\"; // Import the Siri component\nimport styled, { keyframes, css } from \"styled-components\";\nimport AIAssistant from \"./AIAssistant\"; // Import the AI component\n// --- THE MAIN COMPONENT ---\nimport { useHistory } from \"react-router-dom\";\nimport { setGlobalHistory } from \"./VoiceAgentHelpers\";\n\nconst isMobile = window.innerWidth <= 480;\n// --- Animations for a \"Wow Experience\" ---\nconst slideInUp = keyframes`\n  from {\n    transform: translateY(20px);\n    opacity: 0;\n  }\n  to {\n    transform: translateY(0);\n    opacity: 1;\n  }\n`;\n\n// --- MODIFIED ---: A more subtle, breathing shadow effect for the idle state\nconst pulse = keyframes`\n  0% { box-shadow: 0 6px 16px rgba(79, 70, 229, 0.3); }\n  50% { box-shadow: 0 8px 24px rgba(79, 70, 229, 0.5); }\n  100% { box-shadow: 0 6px 16px rgba(79, 70, 229, 0.3); }\n`;\n\n// --- MODIFIED ---: A slower, more graceful floating animation for the idle state\nconst float = keyframes`\n  0% { transform: translateY(0); }\n  50% { transform: translateY(-8px); }\n  100% { transform: translateY(0); }\n`;\n\n// --- NEW ---: A more energetic bounce animation for the hover state\nconst bounce = keyframes`\n  0%, 100% {  \n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-15px);\n  }\n`;\n\n// Add popUp animation keyframe before OnlineStatus\nconst popUp = keyframes`\n  0% {\n    transform: scale(0);\n    opacity: 0;\n  }\n  40% {\n    transform: scale(1.1);\n  }\n  60% {\n    transform: scale(0.9);\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n`;\n\n// Online Status Component (moved to top, before it's used)\nconst OnlineStatus = styled.div`\n  position: fixed;\n  bottom: 30px;\n  right: 95px;\n  background: rgba(255, 255, 255, 0.95);\n  padding: 6px 15px;\n  border-radius: 20px;\n  font-size: 14px;\n  color: #4f46e5;\n  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.15);\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  z-index: 998;\n\n  /* Chain the animations with optimized timing */\n  animation: ${popUp} 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards,\n    ${float} 3s ease-in-out infinite 0.4s;\n\n  /* Reverse the order of dot and text to keep dot on right side */\n  flex-direction: row-reverse;\n\n  @media screen and (max-width: 480px) {\n    bottom: 25px;\n    right: 85px;\n    padding: 4px 12px;\n    font-size: 13px;\n  }\n\n  &::before {\n    content: \"\";\n    width: 6px;\n    height: 6px;\n    background: #22c55e;\n    border-radius: 50%;\n    display: inline-block;\n    animation: pulse 2s infinite;\n  }\n\n  @keyframes pulse {\n    0% {\n      opacity: 0.5;\n      transform: scale(0.95);\n    }\n    50% {\n      opacity: 1;\n      transform: scale(1);\n    }\n    100% {\n      opacity: 0.5;\n      transform: scale(0.95);\n    }\n  }\n`;\n\n// Adding new animations\nconst ripple = keyframes`\n  0% { transform: scale(0.8); opacity: 0.6; }\n  50% { transform: scale(1.5); opacity: 0.2; }\n  100% { transform: scale(0.8); opacity: 0.6; }\n`;\n\n// Adding Welcome Screen Components\nconst WelcomeScreen = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(to bottom right, #fdfbfb, #ebedee);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000;\n  animation: ${slideInUp} 0.6s ease;\n`;\n\nconst WelcomeText = styled.h2`\n  font-size: 24px;\n  margin-top: 20px;\n  color: #333;\n  text-align: center;\n`;\n\nconst StartButton = styled.button`\n  margin-top: 30px;\n  padding: 12px 24px;\n  font-size: 16px;\n  background: linear-gradient(135deg, #4f46e5, #7c3aed);\n  color: white;\n  border: none;\n  border-radius: 30px;\n  cursor: pointer;\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s ease;\n\n  &:hover {\n    transform: scale(1.05);\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\n  }\n`;\n\n// NEW: Sound Toggle Button Component\nconst SoundToggleButton = styled.button`\n  margin-top: 15px;\n  margin-left: 15px;\n  padding: 10px 20px;\n  font-size: 14px;\n  background: ${(props) =>\n    props.soundEnabled\n      ? \"linear-gradient(135deg, #22C55E, #16A34A)\"\n      : \"linear-gradient(135deg, #EF4444, #DC2626)\"};\n  color: white;\n  border: none;\n  border-radius: 25px;\n  cursor: pointer;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n\n  &:hover {\n    transform: scale(1.05);\n    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);\n  }\n`;\n\n// NEW: Welcome Buttons Container\nconst WelcomeButtonsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n\n  @media screen and (max-width: 480px) {\n    flex-direction: column;\n    gap: 15px;\n  }\n`;\n\n// NEW: In-Chat Sound Toggle\nconst InChatSoundToggle = styled.button`\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  background: ${(props) => (props.soundEnabled ? \"#22C55E\" : \"#EF4444\")};\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 15px;\n  font-size: 12px;\n  cursor: pointer;\n  z-index: 1001;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n\n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  }\n`;\n\nconst RippleEffect = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  background: ${(props) => props.theme.accentBright || \"#4F46E5\"};\n  opacity: 0.1;\n`;\n\nconst ButtonContent = styled.div`\n  position: relative;\n  z-index: 2;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  font-size: 28px;\n\n  ${(props) =>\n    props.isOpen &&\n    `\n    animation: none;\n    transform: rotate(0);\n  `}\n`;\n\n// --- MODIFIED ---: Updated FloatingButton for the best experience\nconst FloatingButton = styled.button`\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  width: 65px;\n  height: 65px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #4f46e5, #7c3aed);\n  color: white;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  overflow: visible;\n\n  /* Default idle animation */\n  animation: ${float} 4s ease-in-out infinite;\n\n  /* The shadow is now the primary pulsing element */\n  box-shadow: 0 6px 16px rgba(79, 70, 229, 0.3);\n  animation: ${pulse} 2.5s ease-in-out infinite,\n    ${float} 4s ease-in-out infinite;\n\n  /* On hover, override the idle animation with the bounce */\n  &:hover {\n    animation: ${bounce} 0.8s ease;\n    box-shadow: 0 12px 28px rgba(79, 70, 229, 0.6);\n  }\n\n  &:active {\n    transform: scale(0.95);\n    transition: transform 0.1s ease;\n  }\n`;\n\n// --- MODIFIED ---: Improved button for Siri component\n// ============= ENHANCED JARVIS AI BUTTON COMPONENTS =============\n\n// Jarvis Button with Advanced Styling\nconst JarvisButton = styled.button`\n  position: fixed;\n  bottom: ${(p) => (p.isMobile ? \"14px\" : \"20px\")};\n  left: ${(p) => (p.isMobile ? \"12px\" : \"20px\")};\n  \n  /*  MOBILE: Smaller */\n  min-width: ${(p) => (p.isMobile ? \"110px\" : \"170px\")};\n  padding: ${(p) => (p.isMobile ? \"10px 14px\" : \"14px 24px\")};\n  height: ${(p) => (p.isMobile ? \"44px\" : \"60px\")};\n  border-radius: ${(p) => (p.isMobile ? \"22px\" : \"32px\")};\n  font-size: ${(p) => (p.isMobile ? \"12px\" : \"16px\")};\n  gap: ${(p) => (p.isMobile ? \"5px\" : \"10px\")};\n\n\n\n  /*  GLASSMORPHISM + SKEUOMORPHISM */\n  background: linear-gradient(\n    135deg,\n    rgba(102, 126, 234, 0.6) 0%,\n    rgba(118, 75, 162, 0.5) 50%,\n    rgba(102, 126, 234, 0.6) 100%\n  );\n  background-size: 200% 200%;\n  backdrop-filter: blur(20px) saturate(180%);\n  -webkit-backdrop-filter: blur(20px) saturate(180%);\n  \n  /* Glass border  top light, bottom dark = 3D depth */\n  border: 1.5px solid rgba(255, 255, 255, 0.25);\n  border-top-color: rgba(255, 255, 255, 0.4);\n  border-bottom-color: rgba(0, 0, 0, 0.15);\n\n  /* Skeuomorphic inner shadow for depth */\n  box-shadow:\n    0 8px 24px rgba(102, 126, 234, 0.35),\n    0 2px 8px rgba(0, 0, 0, 0.15),\n    inset 0 2px 4px rgba(255, 255, 255, 0.3),\n    inset 0 -2px 4px rgba(0, 0, 0, 0.15);\n\n  color: white;\n  font-weight: 700;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n  white-space: nowrap;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n  z-index: 999;\n  \n  animation: ${float} 4s ease-in-out infinite;\n  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  will-change: transform;\n\n  .jarvis-icon {\n    font-size: ${(p) => (p.isMobile ? \"16px\" : \"22px\")};\n    display: inline-block;\n    animation: ${pulse} 2s ease-in-out infinite;\n  }\n\n  &:hover {\n    transform: translateY(-4px) scale(1.05);\n    background: linear-gradient(\n      135deg,\n      rgba(118, 75, 162, 0.7) 0%,\n      rgba(102, 126, 234, 0.65) 100%\n    );\n    box-shadow:\n      0 14px 35px rgba(102, 126, 234, 0.5),\n      0 4px 12px rgba(0, 0, 0, 0.2),\n      inset 0 2px 6px rgba(255, 255, 255, 0.35),\n      inset 0 -2px 4px rgba(0, 0, 0, 0.2),\n      0 0 30px rgba(102, 126, 234, 0.2);\n  }\n\n\n  \n  &:active {\n    transform: translateY(-1px) scale(0.97);\n    box-shadow:\n      0 4px 12px rgba(102, 126, 234, 0.3),\n      inset 0 2px 6px rgba(0, 0, 0, 0.2),\n      inset 0 -1px 2px rgba(255, 255, 255, 0.15);\n  }\n\n  /* Pulsing ring */\n  &::before {\n    content: \"\";\n    position: absolute;\n    inset: -4px;\n    border-radius: inherit;\n    background: linear-gradient(135deg, rgba(102,126,234,0.4), rgba(118,75,162,0.4));\n    opacity: 0;\n    z-index: -1;\n    animation: pulseRing 3s ease-in-out infinite;\n  }\n\n  @keyframes pulseRing {\n    0%, 100% { transform: scale(1); opacity: 0; }\n    50% { transform: scale(1.08); opacity: 0.4; }\n  }\n`;\n// Greeting Popup Animation\nconst slideInFromLeft = keyframes`\n  from {\n    transform: translateX(-100%) scale(0.8);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0) scale(1);\n    opacity: 1;\n  }\n`;\n\nconst fadeOut = keyframes`\n  from {\n    transform: translateX(0) scale(1);\n    opacity: 1;\n  }\n  to {\n    transform: translateX(-100%) scale(0.8);\n    opacity: 0;\n  }\n`;\n\n// Greeting Popup Component\nconst JarvisGreeting = styled.div`\n  position: fixed;\n  /*  FIX: Just above the button */\n  bottom: ${(p) => (p.isMobile ? \"68px\" : \"90px\")};\n  left: ${(p) => (p.isMobile ? \"12px\" : \"20px\")};\n\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n\n  padding: ${(p) => (p.isMobile ? \"10px 14px\" : \"15px 20px\")};\n  border-radius: ${(p) => (p.isMobile ? \"14px\" : \"20px\")};\n  max-width: ${(p) => (p.isMobile ? \"calc(100vw - 24px)\" : \"320px\")};\n  min-width: ${(p) => (p.isMobile ? \"220px\" : \"280px\")};\n\n  box-shadow: \n    0 8px 25px rgba(102, 126, 234, 0.2),\n    0 4px 12px rgba(0, 0, 0, 0.08);\n  border: 1.5px solid rgba(102, 126, 234, 0.15);\n  z-index: 998;\n\n  animation: ${(p) => (p.isClosing ? fadeOut : slideInFromLeft)} 0.4s\n    cubic-bezier(0.175, 0.885, 0.32, 1.275);\n\n  /*  FIX: Arrow pointing DOWN to button */\n  &::before {\n    content: \"\";\n    position: absolute;\n    bottom: -8px;\n    left: ${(p) => (p.isMobile ? \"20px\" : \"30px\")};\n    width: 14px;\n    height: 14px;\n    background: rgba(255, 255, 255, 0.95);\n    border-right: 1.5px solid rgba(102, 126, 234, 0.15);\n    border-bottom: 1.5px solid rgba(102, 126, 234, 0.15);\n    transform: rotate(45deg);\n  }\n\n  /*  Mobile: compact text */\n  @media (max-width: 480px) {\n    font-size: 12px;\n  }\n`;\nconst GreetingText = styled.p`\n  margin: 0;\n  color: #4a5568;\n  font-size: ${(props) => (props.isMobile ? \"13px\" : \"14px\")};\n  line-height: 1.5;\n  font-weight: 500;\n\n  /* Gradient Text for \"JARVIS\" */\n  .jarvis-name {\n    background: linear-gradient(135deg, #667eea, #764ba2);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n    font-weight: 700;\n    font-size: ${(props) => (props.isMobile ? \"14px\" : \"16px\")};\n  }\n\n  /* Icon styling */\n  .emoji {\n    display: inline-block;\n    margin: 0 2px;\n    animation: ${bounce} 1s ease infinite;\n  }\n`;\n\nconst GreetingHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 8px;\n`;\n\nconst GreetingTitle = styled.h4`\n  margin: 0;\n  font-size: ${(props) => (props.isMobile ? \"15px\" : \"16px\")};\n  font-weight: 700;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n`;\n\nconst CloseGreetingButton = styled.button`\n  background: none;\n  border: none;\n  font-size: 18px;\n  cursor: pointer;\n  color: #a0aec0;\n  transition: all 0.3s ease;\n  padding: 0;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n\n  &:hover {\n    color: #667eea;\n    background: rgba(102, 126, 234, 0.1);\n    transform: rotate(90deg);\n  }\n`;\n\n// Quick Action Buttons in Greeting\nconst QuickActionButtons = styled.div`\n  display: flex;\n  gap: 8px;\n  margin-top: 10px;\n`;\n\nconst QuickActionButton = styled.button`\n  flex: 1;\n  padding: ${(props) => (props.isMobile ? \"6px 10px\" : \"8px 12px\")};\n  font-size: ${(props) => (props.isMobile ? \"11px\" : \"12px\")};\n  font-weight: 600;\n  border: none;\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  background: ${(props) =>\n    props.primary\n      ? \"linear-gradient(135deg, #667eea, #764ba2)\"\n      : \"rgba(102, 126, 234, 0.1)\"};\n\n  color: ${(props) => (props.primary ? \"white\" : \"#667eea\")};\n\n  box-shadow: ${(props) =>\n    props.primary\n      ? \"0 4px 12px rgba(102, 126, 234, 0.3)\"\n      : \"0 2px 6px rgba(0, 0, 0, 0.05)\"};\n\n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: ${(props) =>\n      props.primary\n        ? \"0 6px 16px rgba(102, 126, 234, 0.5)\"\n        : \"0 4px 10px rgba(102, 126, 234, 0.2)\"};\n  }\n\n  &:active {\n    transform: translateY(0);\n  }\n`;\n\n// Badge Notification (e.g., \"New!\" or \"Try me!\")\nconst NotificationBadge = styled.div`\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  background: linear-gradient(135deg, #f093fb, #f5576c);\n  color: white;\n  font-size: ${(props) => (props.isMobile ? \"9px\" : \"10px\")};\n  font-weight: 700;\n  padding: ${(props) => (props.isMobile ? \"3px 6px\" : \"4px 8px\")};\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(245, 87, 108, 0.4);\n  animation: ${pulse} 2s ease-in-out infinite;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n`;\n\n// ============= JARVIS GREETING MESSAGES =============\n\nconst jarvisGreetings = [\n  {\n    title: \" Voice Assistant\",\n    message:\n      \"Say QUICK OVERVIEW about Laxman' <span class='jarvis-name'>voice commands</span>! I will Navigate, highlight sections, and more!\",\n    actions: [\"Start Now\", \"See Demo\"],\n  },\n  {\n    title: \" New Feature!\",\n    message:\n      \"Experience <span class='jarvis-name'>Agentic AI</span> with smart navigation say 'give me Quick overview of Laxman' and contextual memory! <span class='emoji'></span>\",\n    actions: [\"Try It\", \"More Info\"],\n  },\n  {\n    title: \" Pro Tip\",\n    message:\n      \"Say <span class='jarvis-name'>'show me projects'</span> or <span class='jarvis-name'>'Tell me everything about him'</span> - I'll navigate and highlight for you!\",\n    actions: [\"Voice Demo\", \"Skip\"],\n  },\n  {\n    title: \" Meet JARVIS \",\n    message:\n      \"I'm not just a chatbot - I'm an <span class='jarvis-name'>intelligent agent</span> that understands context and remembers our conversation! <span class='emoji'></span>\",\n    actions: [\"Amazing!\", \"Tell Me More\"],\n  },\n\n  {\n    title: \" Context Aware\",\n    message:\n      \"Ask follow-ups. I actually remember them. <span class='jarvis-name'>context</span>. <span class='emoji'></span>\",\n    actions: [\"Test It\", \"Cool!\"],\n  },\n\n  {\n    title: \" Autonomous Email Agent\",\n    message:\n      \"Want to <span class='jarvis-name'>recruit Laxman</span>? Just tell me! I'll collect your details and send him an email - all by voice! <span class='emoji'></span>\",\n    actions: [\"Try It\", \"Cool!\"],\n  },\n];\n\n// Optional: Get greeting by category\nconst getGreetingByCategory = (category) => {\n  const categories = {\n    welcome: [0, 1, 4, 9, 15], // Welcome messages\n    features: [2, 3, 6, 8, 13, 14], // Feature highlights\n    tips: [3, 11, 20, 23, 33], // Pro tips\n    technical: [22, 34, 35], // Technical details\n    fun: [20, 33, 37], // Fun/Easter eggs\n    quick: [5, 10, 15, 39], // Quick start messages\n  };\n\n  const indices = categories[category] || [0];\n  const randomIndex = indices[Math.floor(Math.random() * indices.length)];\n  return jarvisGreetings[randomIndex];\n};\n// Function to get random greeting\nconst getRandomGreeting = () => {\n  return jarvisGreetings[Math.floor(Math.random() * jarvisGreetings.length)];\n};\n// --- MODIFIED FOR GLASSMORPHISM ---\nconst ChatbotContainer = styled.div`\n  position: fixed;\n  bottom: 100px;\n  right: 20px;\n  z-index: 1000;\n  width: 450px; /* Increased from 400px */\n  min-height: 500px;\n  animation: ${slideInUp} 0.5s ease-in-out;\n\n  /* Key properties for the glass effect */\n  background: rgba(255, 255, 255, 0.6);\n  backdrop-filter: blur(15px);\n  -webkit-backdrop-filter: blur(15px);\n\n  border-radius: 15px;\n  border: 1px solid rgba(255, 255, 255, 0.18);\n  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);\n  overflow: visible; /* Changed from hidden to ensure mic is visible */\n\n  /* Add mobile responsiveness */\n  @media screen and (max-width: 480px) {\n    width: 95%; /* Increased from 90% */\n    right: 2.5%; /* Adjusted for new width */\n    left: 2.5%; /* Adjusted for new width */\n    bottom: 80px;\n    min-height: 450px;\n  }\n\n  /* Add styles to ensure chat bubbles don't get cut off */\n  .rsc-ts-bubble {\n    max-width: 95% !important;\n    white-space: pre-wrap !important;\n  }\n\n  .rsc-cs-message {\n    max-width: 100% !important;\n  }\n`;\n\n// iOS Speech Enable Button\nconst IOSSpeechButton = styled.button`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  background: #4f46e5;\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 15px;\n  font-size: 12px;\n  cursor: pointer;\n  z-index: 1001;\n  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: #3730a3;\n    transform: translateY(-1px);\n  }\n`;\n\n// Add WelcomeContainer for the full-screen welcome message\nconst WelcomeContainer = styled.div`\n  width: 100%;\n  height: 500px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(\n    135deg,\n    rgba(255, 255, 255, 0.1),\n    rgba(255, 255, 255, 0.05)\n  );\n  padding: 20px;\n\n  @media screen and (max-width: 480px) {\n    height: 450px;\n    padding: 15px;\n  }\n`;\n\n// Theme with Gradient Header\nconst botTheme = {\n  background: \"transparent\",\n  fontFamily: \"inherit\",\n  headerBgColor: \"linear-gradient(90deg, #00529B, #00284D)\",\n  headerFontColor: \"#fff\",\n  headerFontSize: \"16px\",\n  botBubbleColor: \"#00529B\",\n  botFontColor: \"#fff\",\n  userBubbleColor: \"#fff\",\n  userFontColor: \"#4a4a4a\",\n};\n\n// Animated SVG Avatars\nconst botEmojiSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 40 40\">\n  <defs>\n    <linearGradient id=\"botGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n      <stop offset=\"0%\" style=\"stop-color:#4F46E5;stop-opacity:1\" />\n      <stop offset=\"100%\" style=\"stop-color:#7C3AED;stop-opacity:1\" />\n    </linearGradient>\n    <filter id=\"glow\">\n      <feGaussianBlur stdDeviation=\"1\" result=\"coloredBlur\"/>\n      <feMerge>\n        <feMergeNode in=\"coloredBlur\"/>\n        <feMergeNode in=\"SourceGraphic\"/>\n      </feMerge>\n    </filter>\n  </defs>\n  <style>\n    .bot-head { animation: float 3s ease-in-out infinite; }\n    .bot-eye { animation: blink 4s infinite; }\n    .bot-antenna { animation: antenna 2s ease-in-out infinite; }\n    @keyframes float {\n      0%, 100% { transform: translateY(0); }\n      50% { transform: translateY(-2px); }\n    }\n    @keyframes blink {\n      0%, 45%, 55%, 100% { transform: scaleY(1); }\n      50% { transform: scaleY(0.1); }\n    }\n    @keyframes antenna {\n      0%, 100% { transform: rotate(-5deg); }\n      50% { transform: rotate(5deg); }\n    }\n  </style>\n  <g class=\"bot-head\" fill=\"url(#botGradient)\" filter=\"url(#glow)\">\n    <rect x=\"8\" y=\"15\" width=\"24\" height=\"20\" rx=\"8\"/>\n    <circle cx=\"20\" cy=\"13\" r=\"8\"/>\n    <line class=\"bot-antenna\" x1=\"20\" y1=\"5\" x2=\"20\" y2=\"2\" stroke=\"url(#botGradient)\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n  </g>\n  <g class=\"bot-eye\" fill=\"#FFFFFF\">\n    <circle cx=\"15\" cy=\"18\" r=\"2\"/>\n    <circle cx=\"25\" cy=\"18\" r=\"2\"/>\n  </g>\n  <path class=\"bot-mouth\" d=\"M14 26 Q20 30 26 26\" stroke=\"#FFFFFF\" stroke-width=\"1.5\" fill=\"none\"/>\n</svg>`;\nconst botAvatarUrl = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(\n  botEmojiSVG\n)}`;\nconst userEmojiSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 40 40\"><text x=\"5\" y=\"30\" font-family=\"sans-serif\" font-size=\"28\"></text></svg>`;\nconst userAvatarUrl = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(\n  userEmojiSVG\n)}`;\n\n// --- Custom Interactive Components ---\nconst Typing = () => (\n  <div style={{ display: \"flex\", alignItems: \"center\", marginLeft: \"6px\" }}>\n    <div className=\"typing-indicator\">\n      <span></span>\n      <span></span>\n      <span></span>\n    </div>\n  </div>\n);\n\nconst ProjectCard = ({ name, description, imageUrl, link }) => (\n  <div style={{ width: \"100%\", padding: \"10px\", fontFamily: \"inherit\" }}>\n    {imageUrl && (\n      <img\n        src={imageUrl}\n        alt={name}\n        style={{ width: \"100%\", borderRadius: \"8px\" }}\n      />\n    )}\n    <h4 style={{ margin: \"10px 0 5px 0\", color: \"#00284D\" }}>{name}</h4>\n    <p style={{ margin: \"0 0 10px 0\", fontSize: \"14px\" }}>{description}</p>\n    <a\n      href={link}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        display: \"block\",\n        textAlign: \"center\",\n        padding: \"8px\",\n        backgroundColor: \"#00529B\",\n        color: \"white\",\n        borderRadius: \"5px\",\n        textDecoration: \"none\",\n        fontWeight: \"bold\",\n      }}\n    >\n      View Project\n    </a>\n  </div>\n);\n\n// --- NEW: Resume Component ---\nconst ResumeCard = () => (\n  <div\n    style={{\n      width: \"100%\",\n      padding: \"15px\",\n      fontFamily: \"inherit\",\n      textAlign: \"center\",\n      background:\n        \"linear-gradient(135deg, rgba(79, 70, 229, 0.1), rgba(124, 58, 237, 0.1))\",\n      borderRadius: \"10px\",\n      margin: \"10px 0\",\n    }}\n  >\n    <div style={{ fontSize: \"40px\", marginBottom: \"10px\" }}></div>\n    <h4 style={{ margin: \"10px 0 5px 0\", color: \"#00284D\" }}>\n      Laxman's Resume\n    </h4>\n    <p style={{ margin: \"0 0 15px 0\", fontSize: \"14px\", color: \"#666\" }}></p>\n    <a\n      href=\"https://drive.google.com/file/d/1aKH71pAlFOGhlEqr3gnJ6A8BFhdkcUrP/view?usp=sharing\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        display: \"inline-block\",\n        padding: \"10px 20px\",\n        backgroundColor: \"#00529B\",\n        color: \"white\",\n        borderRadius: \"25px\",\n        textDecoration: \"none\",\n        fontWeight: \"bold\",\n        transition: \"all 0.3s ease\",\n        boxShadow: \"0 4px 12px rgba(0, 82, 155, 0.3)\",\n      }}\n      onMouseOver={(e) => {\n        e.target.style.backgroundColor = \"#003d73\";\n        e.target.style.transform = \"translateY(-2px)\";\n      }}\n      onMouseOut={(e) => {\n        e.target.style.backgroundColor = \"#00529B\";\n        e.target.style.transform = \"translateY(0)\";\n      }}\n    >\n       View Resume\n    </a>\n  </div>\n);\n\nfunction PortfolioChatBot(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isHovered, setIsHovered] = useState(false);\n  const theme = props.theme;\n  const history = useHistory();\n\n  // Inject history into VoiceAgentHelpers\n  useEffect(() => {\n    setGlobalHistory(history);\n  }, [history]);\n\n  const [selectedVoice, setSelectedVoice] = useState(null);\n  const [showWelcome, setShowWelcome] = useState(true);\n  const [isIOSInitialized, setIsIOSInitialized] = useState(false);\n  const [speechEnabled, setSpeechEnabled] = useState(false);\n  const [soundEnabled, setSoundEnabled] = useState(false); // UPDATED: Changed to false by default\n  const [showSiri, setShowSiri] = useState(false); // State for Siri UI\n  const [userQuestion, setUserQuestion] = useState(\"\"); // NEW: Store user's typed question\n  // NEW: JARVIS Greeting States\n  const [showJarvisGreeting, setShowJarvisGreeting] = useState(false);\n  const [currentGreeting, setCurrentGreeting] = useState(getRandomGreeting());\n  const [isGreetingClosing, setIsGreetingClosing] = useState(false);\n  const [hasShownGreeting, setHasShownGreeting] = useState(false);\n  const [showBadge, setShowBadge] = useState(true);\n  // iOS Detection\n  const isIOS =\n    /iPad|iPhone|iPod/.test(navigator.userAgent) ||\n    (navigator.platform === \"MacIntel\" && navigator.maxTouchPoints > 1);\n\n  // UPDATED: Enhanced checkUserInput function that stores the question\n  const checkUserInput = ({ value, steps }) => {\n    const lowerCaseValue = value.toLowerCase();\n\n    // Store the user's question for AI fallback\n    setUserQuestion(value);\n\n    // Check for keywords first\n    if (lowerCaseValue.includes(\"project\")) return \"project_options\";\n    if (lowerCaseValue.includes(\"skill\") || lowerCaseValue.includes(\"tech\"))\n      return \"skills\";\n    if (lowerCaseValue.includes(\"contact\") || lowerCaseValue.includes(\"email\"))\n      return \"contact\";\n    if (\n      lowerCaseValue.includes(\"education\") ||\n      lowerCaseValue.includes(\"degree\") ||\n      lowerCaseValue.includes(\"iit\")\n    )\n      return \"education\";\n    if (\n      lowerCaseValue.includes(\"work\") ||\n      lowerCaseValue.includes(\"experience\") ||\n      lowerCaseValue.includes(\"job\") ||\n      lowerCaseValue.includes(\"intern\")\n    )\n      return \"experience_intro\";\n    if (\n      lowerCaseValue.includes(\"certification\") ||\n      lowerCaseValue.includes(\"certificate\")\n    )\n      return \"certifications_info\";\n    if (\n      lowerCaseValue.includes(\"creator\") ||\n      lowerCaseValue.includes(\"who made you\")\n    )\n      return \"creator_info\";\n    if (lowerCaseValue.includes(\"resume\") || lowerCaseValue.includes(\"cv\"))\n      return \"resume_info\";\n\n    // If no keyword match, go to AI with the stored question\n    return \"ai_fallback\";\n  };\n\n  // NEW: Create AIAssistant with pre-filled question\n  const AIAssistantWithQuestion = ({ question }) => (\n    <AIAssistant initialQuestion={question} />\n  );\n\n  // UPDATED: Conversation steps with improved AI integration\n  const steps = [\n    {\n      id: \"welcome\",\n      message: \"Hi there! I'm Laxman's portfolio assistant.\",\n      trigger: \"intro\",\n    },\n    {\n      id: \"intro\",\n      message:\n        \"I can tell you about his skills, projects, and professional experience. What's on your mind?\",\n      trigger: \"options\",\n      delay: 1500,\n    },\n    {\n      id: \"options\",\n      options: [\n        {\n          value: \"background\",\n          label: \"Tell me about Laxman\",\n          trigger: \"typing_background\",\n        },\n        {\n          value: \"resume\",\n          label: \"Show his Resume\",\n          trigger: \"typing_resume\",\n        },\n        { value: \"ai_chat\", label: \" Ask AI anything!\", trigger: \"ai_chat\" },\n        {\n          value: \"experience\",\n          label: \"Experience & Certifications\",\n          trigger: \"experience_intro\",\n        },\n        {\n          value: \"skills\",\n          label: \"What are his skills?\",\n          trigger: \"typing_skills\",\n        },\n        {\n          value: \"projects\",\n          label: \"Show me his projects\",\n          trigger: \"project_options\",\n        },\n        {\n          value: \"contact\",\n          label: \"How can I contact him?\",\n          trigger: \"typing_contact\",\n        },\n        { value: \"creator\", label: \"Who made you?\", trigger: \"creator_info\" },\n      ],\n    },\n\n    // Typing indicators\n    {\n      id: \"typing_background\",\n      component: <Typing />,\n      asMessage: true,\n      trigger: \"background\",\n    },\n    {\n      id: \"typing_resume\",\n      component: <Typing />,\n      asMessage: true,\n      trigger: \"resume_info\",\n    },\n    {\n      id: \"typing_skills\",\n      component: <Typing />,\n      asMessage: true,\n      trigger: \"skills\",\n    },\n    {\n      id: \"typing_contact\",\n      component: <Typing />,\n      asMessage: true,\n      trigger: \"contact\",\n    },\n\n    // AI Chat Integration\n    {\n      id: \"ai_chat\",\n      component: <AIAssistant />,\n      asMessage: true,\n      trigger: \"ask-more\",\n    },\n\n    // UPDATED: AI Fallback with pre-filled question\n    {\n      id: \"ai_fallback\",\n      message: `Got it! Let me have AI help answer: \"${userQuestion}\"`,\n      trigger: \"ai_fallback_component\",\n      delay: 1000,\n    },\n    {\n      id: \"ai_fallback_component\",\n      component: <AIAssistantWithQuestion question={userQuestion} />,\n      asMessage: true,\n      trigger: \"ask-more\",\n    },\n\n    // Resume Path\n    {\n      id: \"resume_info\",\n      component: <ResumeCard />,\n      asMessage: true,\n      trigger: \"ask-more\",\n    },\n\n    // Background & Education Path\n    {\n      id: \"background\",\n      message:\n        \"Laxman is a skilled Software Developer and AI Enthusiast, currently working at CAMS Mutual Funds. He's a proud alumnus of IIT Delhi, holding both a Bachelor's and a Master's degree in Computer Science and Engineering.\",\n      trigger: \"education\",\n      delay: 3000,\n    },\n    {\n      id: \"education\",\n      message:\n        \"His education at IIT Delhi (2018-2023) provided a strong foundation in Data Structures, AI/ML, and Security. He complemented this with hands-on NLP projects and numerous certifications.\",\n      trigger: \"ask-more\",\n    },\n\n    // Skills Path\n    {\n      id: \"skills\",\n      message:\n        \"Laxman has expertise across three main domains: Full Stack Development (using the MERN stack), Data Science & AI (with a focus on Gen AI, LLMs, and Computer Vision & NLP), and Cloud Infrastructure (Google Cloud Platform, Docker, and CI/CD).\",\n      trigger: \"skill_details\",\n      delay: 3200,\n    },\n    {\n      id: \"skill_details\",\n      options: [\n        {\n          value: \"ai_experience\",\n          label: \"More on his AI/ML work\",\n          trigger: \"ai_experience\",\n        },\n        {\n          value: \"fullstack_details\",\n          label: \"Details on Full Stack\",\n          trigger: \"fullstack_details\",\n        },\n        { value: \"main_menu\", label: \"Back to main menu\", trigger: \"options\" },\n      ],\n    },\n    {\n      id: \"ai_experience\",\n      message:\n        \"Absolutely. He has developed over 17 AI projects. Key examples include a camsLens Enterprise GenAI platform, AI powered Email Automation, Driver Drowsiness Detector using OpenCV and the RAVI project at IIT Delhi, which used MS Azure for image analysis. He's proficient with TensorFlow and Keras.\",\n      trigger: \"ask-more\",\n    },\n    {\n      id: \"fullstack_details\",\n      message:\n        \"He excels at building end-to-end applications. For example, he built 'NexGenGaming,' a full-stack e-commerce site with React, Node.js, and MongoDB. He's also developed mobile apps with React Native.\",\n      trigger: \"ask-more\",\n    },\n\n    // Experience & Certifications Path\n    {\n      id: \"experience_intro\",\n      message:\n        \"Laxman has a solid mix of professional experience. What would you like to know about?\",\n      trigger: \"experience_options\",\n    },\n    {\n      id: \"experience_options\",\n      options: [\n        {\n          value: \"current_role\",\n          label: \"Current Role (CAMS)\",\n          trigger: \"current_role_info\",\n        },\n        {\n          value: \"past_work\",\n          label: \"Past Work (RAVI)\",\n          trigger: \"past_work_info\",\n        },\n        {\n          value: \"internships\",\n          label: \"Internships\",\n          trigger: \"internships_info\",\n        },\n        {\n          value: \"certifications\",\n          label: \"Certifications\",\n          trigger: \"certifications_info\",\n        },\n        { value: \"main_menu\", label: \"Back to main menu\", trigger: \"options\" },\n      ],\n    },\n    {\n      id: \"current_role_info\",\n      message:\n        \"He is currently a Full-time Software Developer at CAMS Mutual Funds in Chennai, a role he started in June 2024.\",\n      trigger: \"ask-more\",\n    },\n    {\n      id: \"past_work_info\",\n      message:\n        \"He worked for a year as a Software Engineer on the RAVI project at IIT Delhi, creating a 'Reading Assistant for the Visually Impaired.'\",\n      trigger: \"ask-more\",\n    },\n    {\n      id: \"internships_info\",\n      message:\n        \"He has completed several prestigious virtual internships with companies like Walmart, Goldman Sachs, and JP Morgan Chase, focusing on advanced software engineering and front-end development.\",\n      trigger: \"ask-more\",\n    },\n    {\n      id: \"certifications_info\",\n      message:\n        \"He holds key certifications including 'AWS Certificate' from Amazon, 'Complete Data Science & Machine Learning Bootcamp' from TheAppBrewery, and an LMS development certificate from Startup India.\",\n      trigger: \"ask-more\",\n    },\n\n    // Projects Path\n    {\n      id: \"project_options\",\n      message:\n        \"He has over 34 projects! Here are a few highlights. Which one interests you?\",\n      trigger: \"project_list\",\n    },\n    {\n      id: \"project_list\",\n      options: [\n        {\n          value: \"p1_details\",\n          label: \"NexGenGaming E-Commerce\",\n          trigger: \"typing_p1\",\n        },\n        {\n          value: \"p2_details\",\n          label: \"IPO Monitoring System\",\n          trigger: \"typing_p2\",\n        },\n        {\n          value: \"p3_details\",\n          label: \"MSG-to-PDF Converter\",\n          trigger: \"typing_p3\",\n        },\n        { value: \"main_menu\", label: \"Back to main menu\", trigger: \"options\" },\n      ],\n    },\n    {\n      id: \"typing_p1\",\n      component: <Typing />,\n      asMessage: true,\n      trigger: \"p1_card\",\n    },\n    {\n      id: \"p1_card\",\n      component: (\n        <ProjectCard\n          name=\"NexGenGaming - E-Commerce Platform\"\n          description=\"A full-stack gaming store built with React, Node.js, and MongoDB. It features user auth, order management, and delivery tracking.\"\n          imageUrl=\"https://i.imgur.com/f7j1f9o.png\"\n          link=\"https://gaming-ecommerce-fronted.vercel.app/\"\n        />\n      ),\n      asMessage: true,\n      trigger: \"ask-more\",\n    },\n    {\n      id: \"typing_p2\",\n      component: <Typing />,\n      asMessage: true,\n      trigger: \"p2_card\",\n    },\n    {\n      id: \"p2_card\",\n      component: (\n        <ProjectCard\n          name=\"IPO Monitoring & Notifier\"\n          description=\"A real-time system that monitors IPO Grey Market Premiums using Python, OCR, and automated data processing to send notifications.\"\n          imageUrl=\"https://i.imgur.com/y3A9Z8o.png\"\n          link=\"https://ipo-monitor-gmp.streamlit.app/Dashboard\"\n        />\n      ),\n      asMessage: true,\n      trigger: \"ask-more\",\n    },\n    {\n      id: \"typing_p3\",\n      component: <Typing />,\n      asMessage: true,\n      trigger: \"p3_card\",\n    },\n    {\n      id: \"p3_card\",\n      component: (\n        <ProjectCard\n          name=\"MSG-to-PDF Converter\"\n          description=\"An automated workflow tool built with Python to convert over 20,000 financial emails from .MSG to structured PDF files for a major client.\"\n          imageUrl=\"https://i.imgur.com/qFb2z3e.png\"\n          link=\"https://msg-to-pdf-converter-cams.streamlit.app/\"\n        />\n      ),\n      asMessage: true,\n      trigger: \"ask-more\",\n    },\n\n    // Contact & Other Paths\n    {\n      id: \"contact\",\n      component: (\n        <div>\n          {\" \"}\n          You can reach Laxman through any of these channels:{\" \"}\n          <ul>\n            {\" \"}\n            <li style={{ marginBottom: \"8px\" }}>\n               Email:{\" \"}\n              <a href=\"mailto:laxmankethavath5@gmail.com\">\n                laxmankethavath5@gmail.com\n              </a>\n            </li>{\" \"}\n            <li style={{ marginBottom: \"8px\" }}>\n               LinkedIn:{\" \"}\n              <a\n                href=\"https://www.linkedin.com/in/laxman-k-44913a156/\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                k-laxman-44913a156\n              </a>\n            </li>{\" \"}\n            <li>\n               GitHub:{\" \"}\n              <a\n                href=\"https://github.com/Laxman824\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Laxman824\n              </a>\n            </li>{\" \"}\n          </ul>{\" \"}\n        </div>\n      ),\n      asMessage: true,\n      trigger: \"ask-more\",\n    },\n    {\n      id: \"creator_info\",\n      message: \"I was designed and brought to Life by Laxman!\",\n      trigger: \"ask-more\",\n    },\n\n    // Standard Closing/Looping Paths\n    {\n      id: \"ask-more\",\n      message: \"Can I help with anything else?\",\n      trigger: \"ask-more-options\",\n      delay: 1500,\n    },\n    {\n      id: \"ask-more-options\",\n      options: [\n        { value: \"yes\", label: \"Yes, please!\", trigger: \"options\" },\n        {\n          value: \"ask_anything\",\n          label: \"Let me type my question\",\n          trigger: \"ask_anything_prompt\",\n        },\n        { value: \"ai_help\", label: \" Ask AI directly\", trigger: \"ai_chat\" },\n        {\n          value: \"no\",\n          label: \"No, that's all for now.\",\n          trigger: \"end-conversation\",\n        },\n      ],\n    },\n\n    // UPDATED: Better prompt for user input\n    {\n      id: \"ask_anything_prompt\",\n      message:\n        \"Perfect! Type your question and I'll either answer directly or get AI to help you:\",\n      trigger: \"user_free_text\",\n    },\n    { id: \"user_free_text\", user: true, trigger: checkUserInput },\n\n    // Fallback for unrecognized (though this shouldn't be reached with AI fallback)\n    {\n      id: \"unrecognized\",\n      message: \"I'm not sure how to answer that, but let me get AI to help!\",\n      trigger: \"ai_fallback_component\",\n    },\n\n    {\n      id: \"end-conversation\",\n      message:\n        \"Great! Thanks for stopping by. Feel free to reach out to Laxman directly. Have a wonderful day!\",\n      end: true,\n    },\n  ];\n\n  // Enhanced useEffect for voice loading and iOS initialization\n  useEffect(() => {\n    const synth = window.speechSynthesis;\n\n    // Function to load voices\n    const loadVoices = () => {\n      const voices = synth.getVoices();\n      const preferredVoices = [\n        \"Google US English\",\n        \"Samantha\",\n        \"Microsoft Zira Desktop - English (United States)\",\n        \"Daniel\",\n      ];\n      const voice =\n        voices.find((v) => preferredVoices.includes(v.name)) ||\n        voices.find((v) => v.lang.startsWith(\"en-US\"));\n      setSelectedVoice(voice || voices[0]);\n    };\n\n    // iOS-specific initialization function\n    const initializeIOSSpeech = () => {\n      if (isIOSInitialized) return;\n\n      const silentUtterance = new SpeechSynthesisUtterance(\"\");\n      silentUtterance.volume = 0;\n      silentUtterance.rate = 1;\n      silentUtterance.pitch = 1;\n\n      synth.cancel();\n      synth.speak(silentUtterance);\n      setIsIOSInitialized(true);\n      setSpeechEnabled(true);\n    };\n\n    if (synth.getVoices().length > 0) {\n      loadVoices();\n    } else {\n      synth.onvoiceschanged = loadVoices;\n    }\n\n    if (isIOS) {\n      const handleUserInteraction = () => {\n        initializeIOSSpeech();\n        document.removeEventListener(\"touchstart\", handleUserInteraction);\n        document.removeEventListener(\"click\", handleUserInteraction);\n      };\n\n      document.addEventListener(\"touchstart\", handleUserInteraction, {\n        passive: true,\n      });\n      document.addEventListener(\"click\", handleUserInteraction);\n\n      return () => {\n        document.removeEventListener(\"touchstart\", handleUserInteraction);\n        document.removeEventListener(\"click\", handleUserInteraction);\n      };\n    } else {\n      setIsIOSInitialized(true);\n      setSpeechEnabled(true);\n    }\n  }, [isIOSInitialized, isIOS]);\n\n  // ============= JARVIS AUTO-GREETING EFFECT =============\n  useEffect(() => {\n    // Show greeting after 3 seconds if user hasn't interacted\n    if (!hasShownGreeting && !showSiri) {\n      const greetingTimer = setTimeout(() => {\n        setShowJarvisGreeting(true);\n        setCurrentGreeting(getRandomGreeting());\n      }, 3000);\n\n      return () => clearTimeout(greetingTimer);\n    }\n  }, [hasShownGreeting, showSiri]);\n\n  // Auto-hide greeting after 10 seconds\n  useEffect(() => {\n    if (showJarvisGreeting) {\n      const hideTimer = setTimeout(() => {\n        handleCloseGreeting();\n      }, 10000);\n\n      return () => clearTimeout(hideTimer);\n    }\n  }, [showJarvisGreeting]);\n  // Enhanced speech configuration with user sound preference\n  const speechConfig = {\n    enable: speechEnabled && selectedVoice && soundEnabled,\n    lang: \"en-US\",\n    rate: 0.9,\n    pitch: 1.1,\n    voice: selectedVoice,\n    autoStart: !isIOS && soundEnabled,\n  };\n\n  // Manual iOS speech enabler\n  const enableIOSSpeech = () => {\n    const synth = window.speechSynthesis;\n    const utterance = new SpeechSynthesisUtterance(\"Speech enabled for iOS\");\n    utterance.volume = 0.1;\n    utterance.rate = 0.9;\n    utterance.pitch = 1.1;\n\n    synth.cancel();\n    synth.speak(utterance);\n\n    setIsIOSInitialized(true);\n    setSpeechEnabled(true);\n  };\n\n  // Toggle sound function\n  const toggleSound = () => {\n    setSoundEnabled((prev) => !prev);\n    if (!soundEnabled && window.speechSynthesis) {\n      // If enabling sound, cancel any current speech\n      window.speechSynthesis.cancel();\n    }\n  };\n\n  const handleToggleChat = () => {\n    if (isOpen && window.speechSynthesis) {\n      window.speechSynthesis.cancel();\n    }\n    setIsOpen((prevIsOpen) => !prevIsOpen);\n    if (!isOpen) {\n      setShowWelcome(true);\n    }\n  };\n  // ============= JARVIS HANDLERS =============\n  const handleJarvisClick = () => {\n    setShowSiri(true);\n    setShowJarvisGreeting(false);\n    setHasShownGreeting(true);\n    setShowBadge(false);\n  };\n\n  const handleCloseGreeting = () => {\n    setIsGreetingClosing(true);\n    setTimeout(() => {\n      setShowJarvisGreeting(false);\n      setIsGreetingClosing(false);\n    }, 500);\n  };\n\n  const handleGreetingAction = (action) => {\n    if (\n      action === \"Try Voice\" ||\n      action === \"Start Now\" ||\n      action === \"Test Memory\" ||\n      action === \"Try It\" ||\n      action === \"Voice Demo\" ||\n      action === \"Activate Voice\" ||\n      action === \"Try Now\" ||\n      action === \" Test It\" ||\n      action === \"Auto Mode\" ||\n      action === \"Start Chat\" ||\n      action === \"See Demo\" ||\n      action === \"More Info\"\n    ) {\n      handleJarvisClick();\n    } else if (\n      action === \"Learn More\" ||\n      action === \"More Info\" ||\n      action === \"How It Works\" ||\n      action === \"Show Me\" ||\n      action === \"Tell Me More\" ||\n      action === \"cool\"\n    ) {\n      setShowJarvisGreeting(false);\n      // Could trigger a help modal or tutorial here\n      setTimeout(() => {\n        setShowJarvisGreeting(true);\n        setCurrentGreeting(jarvisGreetings[1]); // Show voice assistant info\n      }, 1000);\n    } else {\n      handleCloseGreeting();\n    }\n  };\n\n  const handleJarvisHover = () => {\n    if (!showJarvisGreeting && !hasShownGreeting) {\n      setShowJarvisGreeting(true);\n      setCurrentGreeting(getRandomGreeting());\n    }\n  };\n  return (\n    <>\n      <style>\n        {`.typing-indicator { display: inline-block; } .typing-indicator span { height: 8px; width: 8px; float: left; margin: 0 1px; background-color: #9E9EA1; display: block; border-radius: 50%; opacity: 0.4; animation: loadingFade 1s infinite; } .typing-indicator span:nth-of-type(2) { animation-delay: 0.2s; } .typing-indicator span:nth-of-type(3) { animation-delay: 0.4s; } @keyframes loadingFade { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }`}\n      </style>\n\n      {!isOpen && <OnlineStatus>Chat with me!</OnlineStatus>}\n      {/* {!showSiri && <JarvisButton onClick={() => setShowSiri(true)}>JARVIS AI </JarvisButton>}\n       */}\n      {/* ============= ENHANCED JARVIS AI BUTTON ============= */}\n      {!showSiri && (\n        <>\n          <JarvisButton\n            onClick={handleJarvisClick}\n            onMouseEnter={handleJarvisHover}\n            isMobile={isMobile}\n            aria-label=\"Open JARVIS Voice Assistant\"\n          >\n            {showBadge && (\n              <NotificationBadge isMobile={isMobile}>New!</NotificationBadge>\n            )}\n            <span className=\"jarvis-icon\"></span>\n            <span>JARVIS AI</span>\n          </JarvisButton>\n\n          {/* Greeting Popup */}\n          {showJarvisGreeting && (\n            <JarvisGreeting isMobile={isMobile} isClosing={isGreetingClosing}>\n              <GreetingHeader>\n                <GreetingTitle isMobile={isMobile}>\n                  {currentGreeting.title}\n                </GreetingTitle>\n                <CloseGreetingButton\n                  onClick={handleCloseGreeting}\n                  aria-label=\"Close greeting\"\n                >\n                  \n                </CloseGreetingButton>\n              </GreetingHeader>\n\n              <GreetingText\n                isMobile={isMobile}\n                dangerouslySetInnerHTML={{ __html: currentGreeting.message }}\n              />\n\n              <QuickActionButtons>\n                {currentGreeting.actions.map((action, index) => (\n                  <QuickActionButton\n                    key={index}\n                    primary={index === 0}\n                    isMobile={isMobile}\n                    onClick={() => handleGreetingAction(action)}\n                  >\n                    {action}\n                  </QuickActionButton>\n                ))}\n              </QuickActionButtons>\n            </JarvisGreeting>\n          )}\n        </>\n      )}\n\n      <FloatingButton\n        onClick={handleToggleChat}\n        theme={theme}\n        aria-label={\n          isOpen ? \"Close chat\" : \"Open chat with portfolio assistant\"\n        }\n      >\n        <RippleEffect theme={theme} />\n        <ButtonContent>\n          {isOpen ? (\n            <span style={{ fontSize: \"24px\" }}></span>\n          ) : (\n            <Lottie\n              animationData={chatbotLottie}\n              loop={true}\n              style={{ width: 45, height: 45 }}\n            />\n          )}\n        </ButtonContent>\n      </FloatingButton>\n\n      {isOpen && (\n        <ChatbotContainer>\n          <ThemeProvider theme={botTheme}>\n            {/* In-Chat Sound Toggle - Always visible when chat is open */}\n            <InChatSoundToggle\n              onClick={toggleSound}\n              soundEnabled={soundEnabled}\n              title={soundEnabled ? \"Turn sound off\" : \"Turn sound on\"}\n            >\n              {soundEnabled ? \"\" : \"\"}\n              {soundEnabled ? \"ON\" : \"OFF\"}\n            </InChatSoundToggle>\n\n            {/* iOS Speech Enable Button - only show if needed */}\n            {isIOS && !speechEnabled && (\n              <IOSSpeechButton onClick={enableIOSSpeech}>\n                 Enable Voice\n              </IOSSpeechButton>\n            )}\n\n            {selectedVoice && (\n              <>\n                {showWelcome ? (\n                  <WelcomeContainer>\n                    <Lottie\n                      animationData={chatbotLottie}\n                      loop={true}\n                      style={{\n                        width: window.innerWidth <= 480 ? 140 : 180,\n                        height: window.innerWidth <= 480 ? 140 : 180,\n                      }}\n                    />\n                    <WelcomeText>\n                      Hi there! I'm Laxman's portfolio assistant.\n                    </WelcomeText>\n\n                    {/* Welcome Buttons Container with Sound Toggle */}\n                    <WelcomeButtonsContainer>\n                      <StartButton onClick={() => setShowWelcome(false)}>\n                        Start Chat\n                      </StartButton>\n                      <SoundToggleButton\n                        onClick={toggleSound}\n                        soundEnabled={soundEnabled}\n                        title={\n                          soundEnabled ? \"Turn sound off\" : \"Turn sound on\"\n                        }\n                      >\n                        {soundEnabled ? \"\" : \"\"}\n                        {soundEnabled ? \"Sound On\" : \"Sound Off\"}\n                      </SoundToggleButton>\n                    </WelcomeButtonsContainer>\n                  </WelcomeContainer>\n                ) : (\n                  <ChatBot\n                    steps={steps}\n                    headerTitle=\"Portfolio Assistant\"\n                    botAvatar={botAvatarUrl}\n                    userAvatar={userAvatarUrl}\n                    width=\"100%\"\n                    height=\"500px\"\n                    style={{\n                      background: \"transparent\",\n                      boxShadow: \"none\",\n                    }}\n                    speechSynthesis={speechConfig}\n                  />\n                )}\n              </>\n            )}\n          </ThemeProvider>\n        </ChatbotContainer>\n      )}\n\n      {showSiri && (\n        <Siri onClose={() => setShowSiri(false)} isMobile={isMobile} />\n      )}\n    </>\n  );\n}\n\nexport default PortfolioChatBot;\n","// AgenticHelpers.js - Advanced Agentic Capabilities\n\n// ============= PROACTIVE SUGGESTIONS ENGINE =============\nexport const ProactiveSuggestionsEngine = {\n  // Track user behavior\n  userContext: {\n    pagesVisited: [],\n    questionsAsked: [],\n    timeSpent: {},\n    currentFocus: null,\n    inferredIntent: null,\n  },\n\n  // Suggestion rules based on context\n  suggestionRules: {\n    // If viewing projects for >10 seconds\n    projects_viewed: {\n      trigger: (context) => {\n        return (\n          context.currentPage === \"#/projects\" &&\n          context.timeOnCurrentPage > 10000\n        );\n      },\n      suggestions: [\n        {\n          text: \"Want me to highlight the top 3 projects?\",\n          action: \"HIGHLIGHT_TOP_PROJECTS\",\n          priority: 10,\n        },\n        {\n          text: \"Curious about the tech stack used?\",\n          action: \"EXPLAIN_TECH_STACK\",\n          priority: 8,\n        },\n        {\n          text: \"Should I show his GitHub for live code?\",\n          action: \"NAVIGATE_GITHUB\",\n          priority: 7,\n        },\n      ],\n    },\n\n    // If asked about skills\n    skills_query: {\n      trigger: (context) => {\n        return context.questionsAsked.some(\n          (q) =>\n            q.toLowerCase().includes(\"skill\") ||\n            q.toLowerCase().includes(\"tech\")\n        );\n      },\n      suggestions: [\n        {\n          text: \"Want to see projects that demonstrate these skills?\",\n          action: \"SHOW_SKILL_PROJECTS\",\n          priority: 9,\n        },\n        {\n          text: \"Should I show his certifications?\",\n          action: \"NAVIGATE_EDUCATION\",\n          priority: 6,\n        },\n      ],\n    },\n\n    // If viewing education\n    education_viewed: {\n      trigger: (context) => {\n        return context.currentPage === \"#/education\";\n      },\n      suggestions: [\n        {\n          text: \"Want to see his IIT Delhi projects?\",\n          action: \"SHOW_IIT_PROJECTS\",\n          priority: 8,\n        },\n        {\n          text: \"Curious about his teaching experience?\",\n          action: \"SHOW_TEACHING\",\n          priority: 7,\n        },\n      ],\n    },\n\n    // If spending lot of time (recruiter pattern)\n    recruiter_pattern: {\n      trigger: (context) => {\n        const visitedMultiple = context.pagesVisited.length >= 3;\n        const viewedProjects = context.pagesVisited.includes(\"#/projects\");\n        const viewedExperience = context.pagesVisited.includes(\"#/experience\");\n        return visitedMultiple && viewedProjects && viewedExperience;\n      },\n      suggestions: [\n        {\n          text: \"Looking to hire? Let me show you his complete profile!\",\n          action: \"RUN_HIRING_WORKFLOW\",\n          priority: 10,\n        },\n        {\n          text: \"Want his resume and contact info?\",\n          action: \"SHOW_RESUME_CONTACT\",\n          priority: 9,\n        },\n      ],\n    },\n\n    // If quick bouncer (< 30 seconds total)\n    quick_visitor: {\n      trigger: (context) => {\n        //  FIX: Add safety check for timeSpent\n        const totalTime = context.timeSpent\n          ? Object.values(context.timeSpent).reduce((a, b) => a + b, 0)\n          : 0;\n        return totalTime < 30000 && context.pagesVisited.length <= 2;\n        //   const totalTime = Object.values(context.timeSpent).reduce((a, b) => a + b, 0);\n        //   return totalTime < 30000 && context.pagesVisited.length <= 2;\n      },\n      suggestions: [\n        {\n          text: \"Want a quick 30-second overview of Laxman?\",\n          action: \"QUICK_OVERVIEW\",\n          priority: 10,\n        },\n        {\n          text: \"Should I show you the highlights?\",\n          action: \"SHOW_HIGHLIGHTS\",\n          priority: 8,\n        },\n      ],\n    },\n  },\n\n  // Analyze context and get best suggestion\n  getSuggestion(context) {\n    let allSuggestions = [];\n\n    // Check all rules\n    for (const [ruleName, rule] of Object.entries(this.suggestionRules)) {\n      if (rule.trigger(context)) {\n        allSuggestions.push(\n          ...rule.suggestions.map((s) => ({\n            ...s,\n            rule: ruleName,\n          }))\n        );\n      }\n    }\n\n    // Sort by priority\n    allSuggestions.sort((a, b) => b.priority - a.priority);\n\n    // Return top suggestion\n    return allSuggestions[0] || null;\n  },\n\n  // Update context\n  updateContext(update) {\n    this.userContext = { ...this.userContext, ...update };\n  },\n};\n\n// ============= MULTI-STEP TASK ORCHESTRATOR =============\nexport const TaskOrchestrator = {\n  // Predefined workflows\n  workflows: {\n    HIRING_WORKFLOW: {\n      name: \"Complete Hiring Profile\",\n      steps: [\n        {\n          action: \"NAVIGATE_PROJECTS\",\n          speak: \"Let me show you his best projects first.\",\n          delay: 0,\n        },\n        {\n          action: \"HIGHLIGHT_PROJECT_1\",\n          speak: \"Here's CamsLens - his flagship enterprise AI platform.\",\n          delay: 3000,\n        },\n        {\n          action: \"NAVIGATE_EXPERIENCE\",\n          speak: \"Now, let's look at his professional experience.\",\n          delay: 6000,\n        },\n        {\n          action: \"HIGHLIGHT_EXPERIENCE_CAMS\",\n          speak: \"Currently working as SDE at CAMS Chennai.\",\n          delay: 9000,\n        },\n        {\n          action: \"NAVIGATE_EDUCATION\",\n          speak: \"He's an IIT Delhi graduate with dual degree.\",\n          delay: 12000,\n        },\n        {\n          action: \"NAVIGATE_CONTACT\",\n          speak: \"Here's how you can reach him for opportunities.\",\n          delay: 15000,\n        },\n      ],\n    },\n\n    QUICK_OVERVIEW: {\n      name: \"30-Second Overview\",\n      steps: [\n        {\n          action: \"NAVIGATE_HOME\",\n          speak:\n            \"Laxman is a Software Engineer at CAMS, specializing in AI and Full Stack.\",\n          delay: 0,\n        },\n        {\n          action: \"HIGHLIGHT_SKILLS\",\n          speak: \"Expert in Java, Python, JavaScript, and AI technologies.\",\n          delay: 4000,\n        },\n        {\n          action: \"NAVIGATE_PROJECTS\",\n          speak: \"Built 35+ projects including enterprise GenAI platforms.\",\n          delay: 8000,\n        },\n        {\n          action: \"NAVIGATE_CONTACT\",\n          speak: \"Want to connect? Here's his contact information.\",\n          delay: 12000,\n        },\n      ],\n    },\n\n    SKILL_DEEP_DIVE: {\n      name: \"Technical Skills Deep Dive\",\n      steps: [\n        {\n          action: \"NAVIGATE_HOME\",\n          speak: \"Let me show you his technical expertise.\",\n          delay: 0,\n        },\n        {\n          action: \"HIGHLIGHT_SKILLS\",\n          speak:\n            \"He's proficient in multiple domains - Full Stack, AI/ML, and Cloud.\",\n          delay: 3000,\n        },\n        {\n          action: \"NAVIGATE_PROJECTS\",\n          speak: \"Here are real-world applications of these skills.\",\n          delay: 6000,\n        },\n        {\n          action: \"HIGHLIGHT_PROJECT_1\",\n          speak:\n            \"CamsLens uses Vertex AI, GCP, and Python - enterprise-grade tech.\",\n          delay: 9000,\n        },\n      ],\n    },\n\n    PROJECT_SHOWCASE: {\n      name: \"Project Portfolio Showcase\",\n      steps: [\n        {\n          action: \"NAVIGATE_PROJECTS\",\n          speak: \"Let me walk you through his impressive project portfolio.\",\n          delay: 0,\n        },\n        {\n          action: \"HIGHLIGHT_PROJECT_1\",\n          speak:\n            \"First, CamsLens - processing 80,000 documents monthly with 95% accuracy.\",\n          delay: 4000,\n        },\n        {\n          action: \"HIGHLIGHT_PROJECT_2\",\n          speak: \"NexGen Gaming - a full-stack e-commerce platform.\",\n          delay: 8000,\n        },\n        {\n          action: \"HIGHLIGHT_PROJECT_3\",\n          speak: \"RoomFlow - AI-assisted workspace booking system.\",\n          delay: 12000,\n        },\n      ],\n    },\n\n    AI_EXPERTISE_TOUR: {\n      name: \"AI/ML Expertise Tour\",\n      steps: [\n        {\n          action: \"NAVIGATE_PROJECTS\",\n          speak: \"Let me show you his AI and Machine Learning expertise.\",\n          delay: 0,\n        },\n        {\n          action: \"HIGHLIGHT_PROJECT_1\",\n          speak: \"CamsLens - Enterprise GenAI with Vertex AI and LLMs.\",\n          delay: 3000,\n        },\n        {\n          action: \"SCROLL_DOWN\",\n          speak: \"Financial Email Automation using LLMs with 95% accuracy.\",\n          delay: 6000,\n        },\n        {\n          action: \"NAVIGATE_EDUCATION\",\n          speak:\n            \"His AI foundation from IIT Delhi - specialized in Computer Vision and NLP.\",\n          delay: 9000,\n        },\n      ],\n    },\n  },\n\n  // Execute a workflow\n  async executeWorkflow(workflowName, callbacks) {\n    const workflow = this.workflows[workflowName];\n    if (!workflow) {\n      console.error(\"Workflow not found:\", workflowName);\n      return;\n    }\n\n    console.log(\" Starting workflow:\", workflow.name);\n\n    for (const step of workflow.steps) {\n      await new Promise((resolve) => setTimeout(resolve, step.delay));\n\n      // Execute action\n      if (callbacks.executeAction) {\n        callbacks.executeAction(step.action);\n      }\n\n      // Speak\n      if (callbacks.speak && step.speak) {\n        setTimeout(() => {\n          callbacks.speak(step.speak);\n        }, 500);\n      }\n    }\n\n    console.log(\" Workflow completed:\", workflow.name);\n  },\n};\n\n// ============= INTENT PREDICTION ENGINE =============\nexport const IntentPredictor = {\n  // Common intent patterns\n  intentPatterns: {\n    WANT_TO_HIRE: {\n      keywords: [\n        \"hire\",\n        \"recruit\",\n        \"position\",\n        \"job\",\n        \"available\",\n        \"contact\",\n        \"opportunity\",\n      ],\n      confidence: 0.8,\n      predictedWorkflow: \"HIRING_WORKFLOW\",\n    },\n\n    LEARN_SKILLS: {\n      keywords: [\n        \"skill\",\n        \"technology\",\n        \"tech stack\",\n        \"programming\",\n        \"languages\",\n        \"framework\",\n      ],\n      confidence: 0.7,\n      predictedWorkflow: \"SKILL_DEEP_DIVE\",\n    },\n\n    SEE_PROJECTS: {\n      keywords: [\"project\", \"work\", \"portfolio\", \"built\", \"created\", \"github\"],\n      confidence: 0.8,\n      predictedWorkflow: \"PROJECT_SHOWCASE\",\n    },\n\n    QUICK_OVERVIEW: {\n      keywords: [\"quick\", \"summary\", \"overview\", \"brief\", \"tldr\", \"short\"],\n      confidence: 0.9,\n      predictedWorkflow: \"QUICK_OVERVIEW\",\n    },\n\n    AI_FOCUS: {\n      keywords: [\n        \"ai\",\n        \"machine learning\",\n        \"ml\",\n        \"artificial intelligence\",\n        \"genai\",\n        \"llm\",\n      ],\n      confidence: 0.8,\n      predictedWorkflow: \"AI_EXPERTISE_TOUR\",\n    },\n  },\n\n  // Predict user intent\n  predictIntent(userInput, context = {}) {\n    const input = userInput.toLowerCase();\n    let bestMatch = null;\n    let highestScore = 0;\n\n    for (const [intentName, pattern] of Object.entries(this.intentPatterns)) {\n      let score = 0;\n\n      // Count keyword matches\n      for (const keyword of pattern.keywords) {\n        if (input.includes(keyword)) {\n          score += pattern.confidence;\n        }\n      }\n\n      // Context boost\n      if (context.previousIntent === intentName) {\n        score += 0.2; // Continuity bonus\n      }\n\n      if (score > highestScore) {\n        highestScore = score;\n        bestMatch = {\n          intent: intentName,\n          workflow: pattern.predictedWorkflow,\n          confidence: Math.min(score, 1.0),\n        };\n      }\n    }\n\n    return bestMatch;\n  },\n};\n\n// ============= SMART QUESTION DECOMPOSER =============\nexport const QuestionDecomposer = {\n  // Break complex questions into simpler sub-questions\n  decompose(question) {\n    const complexPatterns = {\n      // \"Tell me everything about him\"\n      everything: {\n        pattern: /everything|all about|complete|full/i,\n        subQuestions: [\n          \"Who is Laxman?\",\n          \"What are his skills?\",\n          \"What projects has he built?\",\n          \"Where did he study?\",\n          \"What's his work experience?\",\n        ],\n      },\n\n      // \"Compare his skills and projects\"\n      comparison: {\n        pattern: /compare|difference|versus|vs|between/i,\n        subQuestions: [\n          \"What are his technical skills?\",\n          \"What projects demonstrate these skills?\",\n          \"How do the projects relate to his expertise?\",\n        ],\n      },\n\n      // \"Is he good for AI/ML role?\"\n      evaluation: {\n        pattern: /is he|would he|can he|suitable|good for|fit for/i,\n        subQuestions: [\n          \"What are his AI/ML skills?\",\n          \"What AI projects has he built?\",\n          \"What's his AI education background?\",\n          \"What's his professional AI experience?\",\n        ],\n      },\n\n      // \"How and when did he learn these skills?\"\n      how_when: {\n        pattern: /how (and|&) when|when (and|&) how/i,\n        subQuestions: [\n          \"When did he study at IIT Delhi?\",\n          \"How did he learn these technologies?\",\n          \"What projects did he build while learning?\",\n        ],\n      },\n    };\n\n    for (const [type, config] of Object.entries(complexPatterns)) {\n      if (config.pattern.test(question)) {\n        return {\n          isComplex: true,\n          type: type,\n          subQuestions: config.subQuestions,\n          strategy: \"sequential\", // Answer one by one\n        };\n      }\n    }\n\n    return {\n      isComplex: false,\n      subQuestions: [question],\n    };\n  },\n};\n\n// ============= CONTEXT-AWARE FOLLOW-UP GENERATOR =============\nexport const FollowUpGenerator = {\n  // Generate relevant follow-up questions based on context\n  generateFollowUps(lastQuestion, lastAnswer, context) {\n    const followUps = [];\n\n    // If talked about projects\n    if (lastAnswer.includes(\"project\") || lastAnswer.includes(\"CamsLens\")) {\n      followUps.push({\n        question: \"Want to see the live demo or GitHub code?\",\n        action: \"SHOW_GITHUB\",\n      });\n      followUps.push({\n        question: \"Curious about the tech stack used?\",\n        action: \"EXPLAIN_TECH\",\n      });\n    }\n\n    // If talked about skills\n    if (\n      lastAnswer.includes(\"skill\") ||\n      lastAnswer.includes(\"Java\") ||\n      lastAnswer.includes(\"Python\")\n    ) {\n      followUps.push({\n        question: \"Want to see projects using these skills?\",\n        action: \"NAVIGATE_PROJECTS\",\n      });\n      followUps.push({\n        question: \"Should I show his certifications?\",\n        action: \"SHOW_CERTIFICATIONS\",\n      });\n    }\n\n    // If talked about education\n    if (lastAnswer.includes(\"IIT\") || lastAnswer.includes(\"education\")) {\n      followUps.push({\n        question: \"Want to know about his teaching experience?\",\n        action: \"SHOW_TEACHING\",\n      });\n      followUps.push({\n        question: \"Curious about his academic projects?\",\n        action: \"SHOW_ACADEMIC_PROJECTS\",\n      });\n    }\n\n    // If talked about work\n    if (lastAnswer.includes(\"CAMS\") || lastAnswer.includes(\"experience\")) {\n      followUps.push({\n        question: \"Want to see his professional projects?\",\n        action: \"SHOW_PROFESSIONAL_PROJECTS\",\n      });\n      followUps.push({\n        question: \"Should I show his contact information?\",\n        action: \"NAVIGATE_CONTACT\",\n      });\n    }\n\n    // General follow-ups\n    followUps.push({\n      question: \"What else would you like to know?\",\n      action: \"CONTINUE_CHAT\",\n    });\n\n    return followUps.slice(0, 3); // Return top 3\n  },\n};\n\n// ============= USER PREFERENCE LEARNER =============\nexport const PreferenceLearner = {\n  STORAGE_KEY: \"jarvis_user_preferences\",\n\n  // Track user preferences\n  preferences: {\n    preferredTopics: {},\n    responseStyle: \"balanced\", // 'brief', 'balanced', 'detailed'\n    interactionPattern: \"explorer\", // 'explorer', 'goal-oriented', 'quick'\n    favoriteFeatures: [],\n    timeOfDayPreference: {},\n  },\n\n  // Learn from interaction\n  learn(interaction) {\n    const prefs = this.loadPreferences();\n\n    // Track topics\n    const topic = this.extractTopic(interaction.question);\n    if (topic) {\n      prefs.preferredTopics[topic] = (prefs.preferredTopics[topic] || 0) + 1;\n    }\n\n    // Track response style preference\n    if (interaction.feedback === \"too_long\") {\n      prefs.responseStyle = \"brief\";\n    } else if (interaction.feedback === \"too_short\") {\n      prefs.responseStyle = \"detailed\";\n    }\n\n    // Track time of day\n    const hour = new Date().getHours();\n    const timeSlot =\n      hour < 12 ? \"morning\" : hour < 18 ? \"afternoon\" : \"evening\";\n    prefs.timeOfDayPreference[timeSlot] =\n      (prefs.timeOfDayPreference[timeSlot] || 0) + 1;\n\n    this.savePreferences(prefs);\n  },\n\n  extractTopic(question) {\n    const topics = {\n      projects: [\"project\", \"work\", \"built\", \"github\"],\n      skills: [\"skill\", \"tech\", \"programming\", \"language\"],\n      education: [\"education\", \"iit\", \"study\", \"degree\"],\n      experience: [\"experience\", \"job\", \"cams\", \"work\"],\n      contact: [\"contact\", \"email\", \"reach\", \"hire\"],\n    };\n\n    const lowerQuestion = question.toLowerCase();\n    for (const [topic, keywords] of Object.entries(topics)) {\n      if (keywords.some((kw) => lowerQuestion.includes(kw))) {\n        return topic;\n      }\n    }\n    return null;\n  },\n\n  loadPreferences() {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      return stored ? JSON.parse(stored) : this.preferences;\n    } catch {\n      return this.preferences;\n    }\n  },\n\n  savePreferences(prefs) {\n    try {\n      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(prefs));\n    } catch (error) {\n      console.warn(\"Failed to save preferences:\", error);\n    }\n  },\n\n  getPreferences() {\n    return this.loadPreferences();\n  },\n};\n\n// ============= EXPORTS =============\nexport default {\n  ProactiveSuggestionsEngine,\n  TaskOrchestrator,\n  IntentPredictor,\n  QuestionDecomposer,\n  FollowUpGenerator,\n  PreferenceLearner,\n};\n"],"names":["subscribeToRouteChanges","callback","globalHistory","listen","location","pathname","onPopState","window","addEventListener","removeEventListener","setGlobalHistory","history","navigateTo","path","push","href","getCurrentRoute","LAXMAN_PORTFOLIO_DATA","ResponseCache","cache","Map","maxSize","ttl","getKey","input","route","concat","toLowerCase","trim","get","key","this","cached","Date","now","timestamp","delete","console","log","response","set","size","firstKey","keys","next","value","clear","VoiceShortcuts","commands","routes","current","index","indexOf","length","replace","action","skipAI","previous","prev","back","goBack","home","top","scrollTo","behavior","bottom","document","body","scrollHeight","projects","experience","education","contact","reset","isShortcut","normalized","hasOwnProperty","execute","command","VisualAgent","activeGlowTimeout","initialize","readyState","logAvailableSections","setTimeout","injectGlobalStyles","getElementById","style","createElement","id","textContent","head","appendChild","currentRoute","forEach","sel","querySelector","projectCards","querySelectorAll","showNavigationIndicator","pageName","existing","remove","indicator","className","animation","highlightElement","selector","duration","arguments","undefined","waitForRender","Promise","resolve","element","doEnhancedHighlight","warn","scrollIntoView","block","inline","clearTimeout","el","classList","add","highlightProjectCard","cards","card","highlightMultiple","selectors","delayBetween","ViewportTracker","getCurrentVisibleSection","mainContainers","container","rect","getBoundingClientRect","innerHeight","type","title","getCompactContext","visible","MemoryManager","STORAGE_KEY","MAX_HISTORY","saveHistory","trimmed","slice","localStorage","setItem","JSON","stringify","error","loadHistory","stored","getItem","parse","addTurn","userInput","aiResponse","user","assistant","clearHistory","removeItem","map","turn","join","getLastAction","AgentExecutor","getPageSelector","getPageName","getRouteFromHighlightAction","HIGHLIGHT_HOME","HIGHLIGHT_PROJECTS","HIGHLIGHT_EXPERIENCE","HIGHLIGHT_EDUCATION","HIGHLIGHT_SKILLS","HIGHLIGHT_CONTACT","HIGHLIGHT_GITHUB","HIGHLIGHT_RESUME","isOnCorrectPage","targetRoute","executeWorkflow","workflowName","callbacks","showNotice","TaskOrchestrator","executeAction","speak","startsWith","match","projectIndex","parseInt","highlighted","reload","getRouteContext","github","getAgenticAIResponse","async","deviceInfo","_data$candidates","_candidate$content","_candidate$content$pa","_candidate$content$pa2","result","maxWords","isMobile","routeContext","conversationContext","viewportContext","compactPrompt","functions","getFunctions","callGemini","httpsCallable","prompt","maxTokens","candidate","data","candidates","Error","rawText","content","parts","text","parsedResponse","cleanedText","parseError","jsonMatch","message","fallback","getFallbackResponse","EnhancedFallbackSystem","knowledgeBase","keywords","responses","camslens","topProject","cams","iit","skills","ai","cloud","teaching","achievements","findBestMatch","bestMatch","bestScore","category","Object","entries","score","keyword","includes","split","some","k","getResponse","Math","floor","random","enhancedMatch","g","foundKeyword","find","project","work","skill","setupRouteTracking","onRouteChange","APIUsageTracker","logCall","usage","getUsage","today","toDateString","date","calls","_unused","EmailAgent","config","serviceId","templateId","publicKey","init","emailjs","script","src","onload","conversationState","isCollecting","inquiryType","currentStep","inquiryFlows","HIRE","steps","prompts","name","email","company","phone","confirmMessage","COLLABORATE","QUESTION","detectIntent","pattern","strongIntents","phrases","phrase","word","weakIntents","kw","startCollection","flow","useForm","ingestFormData","formData","extractedName","nameText","charAt","toUpperCase","_objectSpread","nextStepIndex","fieldName","confirmAndSend","nextField","nextPrompt","processAnswer","userAnswer","currentField","validateEmail","test","onConfirm","sendEmail","cancel","templateParams","from_name","reply_to","inquiry_type","toLocaleString","send","success","slideUp","keyframes","_templateObject","_taggedTemplateLiteral","popIn","_templateObject2","pulse","_templateObject3","shimmer","_templateObject4","float","_templateObject5","darkTheme","mode","bg","bgGradient","border","borderTop","borderBottom","highlight","shadow","shadowDrag","inputBg","accent","accentSecondary","accentGlow","hoverOverlay","lightTheme","PanelContainer","styled","div","_templateObject6","props","theme","isDragging","show","css","_templateObject7","minimized","x","y","_templateObject8","_templateObject9","DragHandle","_templateObject0","_templateObject1","MinimizedBar","_templateObject10","StatusPulse","_templateObject11","MinimizedText","span","_templateObject12","MaximizeBtn","button","_templateObject13","Header","_templateObject14","_templateObject15","TitleGroup","_templateObject16","Icon","_templateObject17","TitleText","_templateObject18","WindowControls","_templateObject19","ControlBtn","_templateObject20","danger","FormBody","form","_templateObject21","InputWrapper","_templateObject22","InputLabel","label","_templateObject23","StyledInput","_templateObject24","ActionButton","_templateObject25","EmailFormModal","_ref","onClose","onSubmit","themeMode","propThemeMode","activeTheme","setActiveTheme","useState","useEffect","checkTheme","isLight","contains","getAttribute","observer","MutationObserver","observe","attributes","attributeFilter","disconnect","setMinimized","setEmail","position","setPosition","setIsDragging","dragOffset","useRef","panelRef","velocityRef","lastPositionRef","animationFrameRef","initX","innerWidth","initY","max","handleDragMove","e","preventDefault","newX","clientX","newY","clientY","maxX","maxY","min","handleDragEnd","cursor","applyMomentum","abs","requestAnimationFrame","cancelAnimationFrame","handleResize","currentTheme","_jsx","ThemeProvider","children","_jsxs","ref","onMouseDown","target","tagName","closest","onClick","display","alignItems","stopPropagation","_Fragment","htmlFor","placeholder","onChange","autoFocus","required","disabled","GlobalLiquidGlassStyles","createGlobalStyle","HeroTintSampler","heroSelector","options","sampleSize","saturationBoost","opacityRange","fallbackTint","heroElement","setFallbackTint","imageSrc","getComputedStyle","backgroundImage","sampleImageColors","canvas","ctx","getContext","img","Image","crossOrigin","width","height","drawImage","imageData","getImageData","dominantColor","getDominantColor","tintColors","generateTintVariations","applyTintColors","onerror","colorCounts","i","r","b","bucketedColor","maxCount","color","count","Number","_ref2","h","s","l","rgbToHsl","boostedS","adjustedL","newR","newG","newB","hslToRgb","primary","secondary","d","hue2rgb","p","q","t","round","_ref3","root","documentElement","setProperty","PerformanceManager","shouldUseFlatMode","navigator","deviceMemory","hardwareConcurrency","matchMedia","matches","toggleFlatMode","isFlat","toggle","toString","subtleGlow","liquidWave","enhanced3DFloat","listeningGlow","thinkingGlow","speakingGlow","idleGlow","buttonPulse","buttonGlow","iconRotate","iconBounce","VoiceContainer","isKeyboardOpen","flatMode","motionReduce","isClosing","VoiceAvatar","state","voiceIntensity","_templateObject26","VoiceWaves","_templateObject27","_templateObject28","VoiceButton","_templateObject29","buttonType","active","glowColor","_templateObject30","_templateObject31","ButtonIcon","_ref4","_objectWithoutProperties","_excluded","icons","mic","viewBox","stop","rx","auto","flat","InterimText","_templateObject32","NoticeCard","_templateObject33","baseOpacity","_props$theme","_props$theme2","_props$theme3","_props$theme4","_props$theme5","VoiceStatus","_templateObject34","_props$theme6","_props$theme7","_props$theme8","_props$theme9","_props$theme0","VoiceControls","_templateObject35","ButtonRow","_templateObject36","ButtonLabel","_templateObject37","_props$theme1","_props$theme10","_props$theme11","_props$theme12","_props$theme13","_props$theme14","_props$theme15","_props$theme16","_templateObject38","_props$theme17","ConnectionIndicator","_templateObject39","status","_templateObject40","CloseButton","_templateObject41","_props$theme18","_props$theme19","HelpHint","_templateObject42","_props$theme20","_props$theme21","_props$theme22","_props$theme23","_templateObject43","VoiceAssistant","_ref5","assistantState","setAssistantState","connectionStatus","setConnectionStatus","isAutoMode","setIsAutoMode","interimTranscript","setInterimTranscript","showHelp","setShowHelp","isVisible","setIsVisible","setIsClosing","notice","setNotice","hasPermission","setHasPermission","retryCount","setRetryCount","setDeviceInfo","setIsKeyboardOpen","setVoiceIntensity","setFlatMode","setMotionReduce","isFirstInteraction","setIsFirstInteraction","chatHistory","setChatHistory","setCurrentRoute","recognitionRef","synthRef","silenceTimeoutRef","isProcessingRef","finalTranscriptRef","audioContextRef","autoModeRef","noticeTimeoutRef","initialViewportHeight","permissionCheckTimeoutRef","speechTimeoutRef","currentStreamRef","voicesLoadedRef","showEmailForm","setShowEmailForm","emailInquiryType","setEmailInquiryType","then","_ref6","mediaQuery","handleMotionChange","loadedHistory","newRoute","userAgent","platform","isIOS","maxTouchPoints","isAndroid","isChrome","isFirefox","isSafari","isEdge","hasTouch","isStandalone","standalone","supports3D","CSS","supports","supportsBackdropFilter","hasHardwareAcceleration","DeviceOrientationEvent","screenSize","screen","ratio","devicePixelRatio","viewport","setAttribute","handleIOSResize","currentHeight","visualViewport","heightDifference","handleOrientationChange","useCallback","actualDuration","detectMicrophoneDevices","mediaDevices","enumerateDevices","audioInputs","filter","device","kind","suggestionIndex","setSuggestionIndex","interval","setInterval","clearInterval","checkBrowserCompatibility","isSecureContext","getUserMedia","requestMicrophonePermission","stream","audio","echoCancellation","noiseSuppression","autoGainControl","sampleRate","channelCount","audioContext","AudioContext","webkitAudioContext","source","createMediaStreamSource","analyzer","createAnalyser","connect","close","getTracks","track","errorMessage","errorTitle","playAudioCue","resume","oscillator","createOscillator","gainNode","createGain","destination","volume","frequency","setValueAtTime","currentTime","exponentialRampToValueAtTime","gain","start","onended","getAIResponse","obj","patterns","reduce","acc","_acc$arrayKey","arrayKey","idx","voiceResponses","greeting","identity","help","default","input_lower","stopAll","speechSynthesis","loadVoices","getVoices","timeout","handleVoicesChanged","startListening","SpeechRecognition","webkitSpeechRecognition","recognition","continuous","interimResults","lang","maxAlternatives","onstart","onresult","event","interimText","hasFinalResult","resultIndex","results","transcript","isFinal","timeoutDuration","finalResult","processFinalSpeech","onend","remainingText","speakIntroduction","introText","utterance","SpeechSynthesisUtterance","rate","pitch","voices","preferredVoice","voice","speakResponse","cleanText","pendingEmailSend","delay","finalText","lower","sendResult","emailIntent","startResult","shortcutResult","predictedIntent","IntentPredictor","predictIntent","confidence","intent","workflow","PreferenceLearner","learn","question","decomposed","QuestionDecomposer","decompose","isComplex","subQuestions","subAnswer","updatedHistory","followUps","FollowUpGenerator","generateFollowUps","suggestion","ProactiveSuggestionsEngine","getSuggestion","currentPage","questionsAsked","pagesVisited","timeOnCurrentPage","answer","fallbackError","toggleAutoMode","newState","testTTS","testText","newFlatMode","closeChat","MicrophoneIcon","_ref7","animated","fill","verticalAlign","stroke","strokeWidth","strokeLinecap","x1","y1","x2","y2","ThinkingIcon","_ref8","cx","cy","SpeakingIcon","_ref9","fillOpacity","LockIcon","_ref0","locked","ChatBubbleIcon","_ref1","strokeLinejoin","EmailIcon","_ref10","SparkleIcon","_ref11","IconText","_ref12","icon","gap","checkServices","timer","suspend","catch","statusText","getVoiceStatus","_suggestions$suggesti","_suggestions$suggesti2","iconSize","iconColor","suggestions","subtitle","isDisabled","speaking","testUtterance","Array","_","opacity","textAlign","_ref13","loadingFade","slideInUp","voicePulse","fadeIn","AIContainer","HeaderContainer","ControlButtons","IconButton","Badge","ChatHistoryContainer","ChatMessage","InputContainer","AIInput","isListening","TypingContainer","TypingDot","AnimatedResponse","RatingContainer","RatingButton","SuggestionsContainer","SuggestionChip","variant","ErrorMessage","KeyboardShortcutsModal","Overlay","Typing","marginRight","fontWeight","TypewriterText","onComplete","speed","displayText","setDisplayText","currentIndex","setCurrentIndex","marginLeft","ResponseRating","responseId","rating","setRating","handleRating","fontSize","ChatHistory","messages","messagesEndRef","_messagesEndRef$curre","msg","toLocaleTimeString","SmartSuggestions","lastQuestion","onSuggestionClick","getSuggestions","margin","QuickActions","actions","getActions","open","marginTop","VoiceInput","onResult","setIsListening","isSupported","setIsSupported","KeyboardShortcuts","isOpen","triggerNextStep","initialQuestion","loading","setLoading","setResponse","setError","setLastQuestion","inputValue","setInputValue","showTypewriter","setShowTypewriter","rawResponse","setRawResponse","showHistory","setShowHistory","showShortcuts","setShowShortcuts","currentResponseId","setCurrentResponseId","hasProcessedInitialQuestion","setHasProcessedInitialQuestion","inputRef","handleUserMessage","React","userMessage","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","contextPrompt","fetch","method","headers","contents","generationConfig","temperature","maxOutputTokens","ok","json","aiMessage","fallbackResponse","err","timeoutId","handleKeyPress","_inputRef$current","ctrlKey","metaKey","focus","activeElement","exportChat","alert","chatText","repeat","item","blob","Blob","url","URL","createObjectURL","a","download","click","revokeObjectURL","confirm","onKeyDown","hasShortcut","onTypewriterComplete","jsx","bounce","popUp","OnlineStatus","WelcomeText","h2","StartButton","SoundToggleButton","soundEnabled","WelcomeButtonsContainer","InChatSoundToggle","RippleEffect","accentBright","ButtonContent","FloatingButton","JarvisButton","slideInFromLeft","fadeOut","JarvisGreeting","GreetingText","GreetingHeader","GreetingTitle","h4","CloseGreetingButton","QuickActionButtons","QuickActionButton","NotificationBadge","jarvisGreetings","getRandomGreeting","ChatbotContainer","IOSSpeechButton","WelcomeContainer","botTheme","background","fontFamily","headerBgColor","headerFontColor","headerFontSize","botBubbleColor","botFontColor","userBubbleColor","userFontColor","botAvatarUrl","encodeURIComponent","userAvatarUrl","ProjectCard","description","imageUrl","link","padding","alt","borderRadius","rel","backgroundColor","textDecoration","ResumeCard","marginBottom","transition","boxShadow","onMouseOver","transform","onMouseOut","setIsOpen","isHovered","setIsHovered","useHistory","selectedVoice","setSelectedVoice","showWelcome","setShowWelcome","isIOSInitialized","setIsIOSInitialized","speechEnabled","setSpeechEnabled","setSoundEnabled","showSiri","setShowSiri","userQuestion","setUserQuestion","showJarvisGreeting","setShowJarvisGreeting","currentGreeting","setCurrentGreeting","isGreetingClosing","setIsGreetingClosing","hasShownGreeting","setHasShownGreeting","showBadge","setShowBadge","AIAssistantWithQuestion","AIAssistant","trigger","component","asMessage","lowerCaseValue","end","synth","preferredVoices","v","onvoiceschanged","handleUserInteraction","initializeIOSSpeech","silentUtterance","passive","greetingTimer","hideTimer","handleCloseGreeting","speechConfig","enable","autoStart","toggleSound","handleJarvisClick","onMouseEnter","handleJarvisHover","dangerouslySetInnerHTML","__html","handleGreetingAction","handleToggleChat","prevIsOpen","Lottie","animationData","chatbotLottie","loop","enableIOSSpeech","ChatBot","headerTitle","botAvatar","userAvatar","Siri","userContext","timeSpent","currentFocus","inferredIntent","suggestionRules","projects_viewed","context","priority","skills_query","education_viewed","recruiter_pattern","visitedMultiple","viewedProjects","viewedExperience","quick_visitor","values","allSuggestions","ruleName","rule","sort","updateContext","update","workflows","HIRING_WORKFLOW","QUICK_OVERVIEW","SKILL_DEEP_DIVE","PROJECT_SHOWCASE","AI_EXPERTISE_TOUR","step","intentPatterns","WANT_TO_HIRE","predictedWorkflow","LEARN_SKILLS","SEE_PROJECTS","AI_FOCUS","highestScore","intentName","previousIntent","complexPatterns","everything","comparison","evaluation","how_when","strategy","lastAnswer","preferences","preferredTopics","responseStyle","interactionPattern","favoriteFeatures","timeOfDayPreference","interaction","prefs","loadPreferences","topic","extractTopic","feedback","hour","getHours","timeSlot","savePreferences","topics","lowerQuestion","getPreferences"],"sourceRoot":""}